<!DOCTYPE html><html class="has-navbar-fixed-top" lang="de" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:exslt="http://exslt.org/common"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-5735649-9', 'auto');
ga('set', 'anonymizeIp', true);
ga('send', 'pageview');</script><title>Apache ActiveMQ Artemis - Message Broker Vergleich</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content=""><meta name="description" content=""><meta name="language" content="de"><link href="/sh2/styles/shCore.css" rel="stylesheet" type="text/css"><link href="/sh2/styles/shThemePredic8.css" rel="stylesheet" type="text/css"><script src="/sh2/scripts/shCore.js" type="text/javascript"></script><script src="/sh2/scripts/shBrushJScript.js" type="text/javascript"></script><script src="/sh2/scripts/shBrushCSharp.js" type="text/javascript"></script><script src="/sh2/scripts/shBrushSql.js" type="text/javascript"></script><script src="/sh2/scripts/shBrushXml.js" type="text/javascript"></script><script src="/sh2/scripts/shBrushJava.js" type="text/javascript"></script><script type="text/javascript">SyntaxHighlighter.all();</script><link rel="stylesheet" href="/b.css"><script type="application/ld+json">
            {
            "@context": "http://schema.org",
            "@type": "Article",
            "url" : "https://www.predic8.de/apache-artemis-vergleich-kafka-activemq.htm",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://www.predic8.de/apache-artemis-vergleich-kafka-activemq.htm"
            },
            "headline": "Apache ActiveMQ Artemis - Message Broker Vergleich" ,
            "image": [
            
                    "https://www.predic8.de"
                    
            ],
            "datePublished": "2018-06-22" ,
            "dateModified": "2018-07-06",
            
                    "author": {
                    "@type": "Person",
                    "name": "Thomas Bayer",
                    "url": "https://www.predic8.de/thomas-bayer.htm"
                    },
                
            "publisher": {
                "@type": "Organization",
                "name": "predic8 GmbH",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://www.predic8.de/bootstrap-theme1.6/img/colors/blue/logo_big.png"
                }
            },
            "description": ""}
        </script><script language="JavaScript">document.addEventListener('DOMContentLoaded', function () { var $nb = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0); if ($nb.length) { $nb.forEach(function ($el) { $el.addEventListener('click', function () { $el.classList.toggle('is-active'); document.getElementById($el.dataset.target).classList.toggle('is-active'); }); }); }});</script></head><body><nav id="navbar" class="navbar is-fixed-top"><div class="container"><div class="navbar-brand"><a class="navbar-item" href="/"><img src="/logo6.png" alt="predic8 GmbH" height="28"></a><div id="navbarBurger" class="navbar-burger burger" data-target="menu2"><span></span><span></span><span></span></div></div><div id="menu2" class="navbar-menu"><div class="navbar-start"><div class="navbar-item has-dropdown is-hoverable"><a href="/entwicklung/" class="navbar-link">Entwicklung</a><div class="navbar-dropdown"><a class="navbar-item" href="/branchen/">Branchen</a><a class="navbar-item" href="/entwicklung/sso-projekte.htm">SSO</a><a class="navbar-item" href="/entwicklung/web-services-enablement.htm">Schnittstellen</a><a class="navbar-item" href="/entwicklung/esb-einfuehrung.htm">ESB Einf&uuml;hrung</a><a class="navbar-item" href="/entwicklung/beispiel-web-services-clients.htm">Beispiel Clients</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/beratung/" class="navbar-link">Beratung</a><div class="navbar-dropdown"><a class="navbar-item" href="/anwendungsintegration-beratung-microservices.htm">Anwendungsintegration</a><a class="navbar-item" href="/api-review.htm">API Review</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/schulung/" class="navbar-link">Schulung</a><div class="navbar-dropdown"><a class="navbar-item" href="/webinar/">Webinare</a><a class="navbar-item" href="/schulung-microservices/">Microservices</a><a class="navbar-item" href="/schulung-integration/">Integration</a><a class="navbar-item" href="/schulung-rest-api/">REST APIs</a><a class="navbar-item" href="/schulung-big-data/">Big Data</a><a class="navbar-item" href="/schulung-soa-esb/">SOA</a><a class="navbar-item" href="/onsite-web-service-schulung.htm">Onsite</a><a class="navbar-item" href="/kursmaterial.htm">Kursmaterial</a><a class="navbar-item" href="/schulung/agbs.htm">AGBs</a><a class="navbar-item" href="/schulung/faq.html">Teilnahme FAQ</a><a class="navbar-item" href="/schulung-bewertung.htm">Bewertungen</a><a class="navbar-item" href="/schulung-termine.htm">Termine</a><a class="navbar-item" href="/schulung-termine-datum.htm">Termine nach Datum</a><a class="navbar-item" href="/schulung/raumanforderungen-fs-praxis.htm">Raumanforderungen</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/referenzen/" class="navbar-link">Referenzen</a><div class="navbar-dropdown"><a class="navbar-item" href="/fallstudien/">Fallstudien</a><a class="navbar-item" href="/referenzen/apps/">Apps</a><a class="navbar-item" href="/referenzen/soa/">SOA</a><a class="navbar-item" href="/mobile-app-entwicklung/apps/">Apps</a><a class="navbar-item" href="/referenzen/web20/">Web 2.0</a><a class="navbar-item" href="/referenzen/sonstiges/">Sonstiges</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/public/" class="navbar-link">Ver&ouml;ffentlichungen</a><div class="navbar-dropdown"><a class="navbar-item" href="/microservices/">Microservices</a><a class="navbar-item" href="/kubernetes-docker/">Kubernetes &amp; Docker</a><a class="navbar-item" href="/rest/">REST</a><a class="navbar-item" href="/security/">Security</a><a class="navbar-item" href="/integration/">Open Source Integration</a><a class="navbar-item" href="/mobile/">Mobile</a><a class="navbar-item" href="/enterprise/">Enterprise</a><a class="navbar-item" href="/iot/">IoT</a><a class="navbar-item" href="/javascript/">JavaScript</a><a class="navbar-item" href="/soa/">SOA &amp; Web Services</a><a class="navbar-item" href="/public/vortrag/">Vortr&auml;ge</a><a class="navbar-item" href="/public/authors/">Autoren</a><a class="navbar-item" href="/video/">Video</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/open-source/" class="navbar-link">Open Source</a><div class="navbar-dropdown"><a class="navbar-item" href="/open-source-api-gateway.htm">API Gateway</a><a class="navbar-item" href="/soa-monitoring.htm">SOA Monitor</a><a class="navbar-item" href="/open-source/virtualisierung/">Service Virtualisierung</a><a class="navbar-item" href="/was-ist-ein-virtueller-service.htm">Virtuelle Services</a></div></div></div><div class="navbar-end"><div class="navbar-item has-dropdown is-hoverable"><a href="/kontakt/" class="navbar-link">Kontakt</a><div class="navbar-dropdown"><a class="navbar-item" href="/kontakt/hotelliste.htm">Hotels</a><a class="navbar-item" href="/kontakt/anreise.htm">Anreise</a><a class="navbar-item" href="/freizeit/">Freizeittipps</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a href="/jobs/" class="navbar-link">Jobs</a><div class="navbar-dropdown"><a class="navbar-item" href="/senior-java-entwickler-job-bonn.htm">Senior Java Entwickler w/m/d</a><a class="navbar-item" href="/java-entwickler-job-bonn.htm">Java Entwickler m/w/d</a><a class="navbar-item" href="/studentenjob-java-bonn.htm">Java Student m/w/d</a><a class="navbar-item" href="/studentenjob-kubernetes-bonn.htm">Kubernetes-Administrator m/w/d</a><a class="navbar-item" href="/jobs/freiberufler-java-bonn.htm">Freiberufler m/w/d</a><a class="navbar-item" href="/jobs/bachelorarbeit.htm">Bachelorarbeiten</a><a class="navbar-item" href="/jobs/wie-bewerbe-ich-mich-als-programmierer.htm">Bewerbung als Coder</a><a class="navbar-item" href="/jobs/was-muss-bewerbung-enthalten.htm">Inhalt der Bewerbung</a><a class="navbar-item" href="/azubi-fachinformatiker-bonn.htm">Azubi Fachinformatiker w/m/d</a></div></div></div></div></div></nav><section><div class="container"><div class="columns"><div class="column content is-three-quarters"><h1>Apache ActiveMQ Artemis - Message Broker Vergleich</h1><p><a href="https://www.predic8.de/thomas-bayer.htm"><img src="/people/thomas-bayer.jpg" align="left" style="padding: 0px 10px 10px 0px"></a><b>Von: </b><a href="https://www.predic8.de/thomas-bayer.htm">Thomas Bayer</a><br><b>Datum: </b>22. Juni 2018<br><b>Aktualisiert: </b>6. Juli 2018</p><em><p>Benannt ist Apache Artemis nach der griechischen G&ouml;ttin der Jagd, des Mondes und der Keuschheit. Der Broker basiert auf dem Quellcode des HornetQ Brokers von JBoss. RedHat hat 2015 den Code der Apache Foundation zur Verf&uuml;gung gestellt. Bei Apache wird der Broker unter dem Namen <i>Apache ActiveMQ Artemis</i> unter der Beteiligung der urspr&uuml;nglichen HornetQ Programmierer weiterentwickelt. M&ouml;glicherweise wird Artemis der Nachfolger des popul&auml;ren ActiveMQ Brokers, vielleicht als ActiveMQ Version 6. Ob es dazu kommt, ist Stand heute noch offen.</p></em><h1>1 Architektur</h1><p>Artemis verwendet nicht-blockierende IO Zugriffe f&uuml;r eine hohe Performanz bei vielen gleichzeitigen Consumer und Producer Verbindungen. Ob die Performanz von Artemis durch die Architektur wirklich um Gr&ouml;&szlig;en besser ist, als z.B. die vom ActiveMQ erf&auml;hrst du weiter unten im Abschnitt Performanz.</p><p>Der Broker unterst&uuml;tzt eine Vielzahl von Protokollen, kann im Cluster betrieben werden und ist &uuml;ber Interceptoren und Plugins erweiterbar.</p><p>JMS verwendet die Konzepte Queue und Topic um zwischen einer <i>1 zu 1</i> Zustellung und Publish/Subscribe zu unterscheiden. Artemis verwendet die Konzepte Adresse, Routing Type und Queue, mit denen JMS Queues und Topics nachempfunden werden k&ouml;nnen. Dar&uuml;ber hinaus erlaubt das <i>Address Model</i> von Artemis auch ein anderes Verhalten zu realisieren. Eine Nachricht wird bei Artemis von einem Producer an einen Endpunkt geschickt. Die Enpunkte hei&szlig;en beim Artemis Adressen. Ein Routing Type bestimmt wie eine Nachricht an Queues geleitet wird. &Uuml;ber die Queues werden die Nachrichten dann den Consumern zur Verf&uuml;gung gestellt. Der Routing Type <i>Anycast</i> sendet eine Nachricht an nur eine einzige aus einer Menge an Queues. Das Verhalten entspricht den Queues bei JMS. Der zweite Routing Type ist ein <i>Multicast</i>, der eine Nachricht auf alle zugeordneten Queues verteilt. Wird jede Queue von nur einem Subscriber konsummiert, dann entspricht dies den JMS Topics.</p><p>Die Abbildung unten zeigt ein Beispiel f&uuml;r das Routing von Nachrichten. Schickt ein Producer Nachrichten an den Endpunkt <i>preise</i>, so bekommt ein Consumer der Queue <i>preise</i> eine Kopie der Nachricht. Die drei Subscriber <i>preise.subscriber.?</i> bekommen jeweils eine Kopie der Nachricht.</p><img src="/public/enterprise/address-routingtype-endpoint-artemis.png" alt="" title="Adresse, Routing Type und Queues" name="address-routingtype-endpoint"><br><p class="imgcap"><b>Abbildung 1: </b><caption>Adresse, Routing Type und Queue</caption></p><p>Ist ein Subscriber offline und kann aus diesem Grunde seine Nachrichten nicht abholen, so werden diese in seiner Queue zwischengespeichert. Im Gegensatz zu vielen reinen JMS Brokern kann die Queue des Subscribers und deren Nachrichten in der Konsole eingesehen werden.</p><p>Mit dem Modell aus Adresse, Routing Type und Queue kann das Verhalten von JMS hundertprozentig abgebildet werden. Artemis verwendet f&uuml;r die Queues ein <i>Anycast</i> und f&uuml;r ein Topic einen <i>Multicast</i>.</p><h1>2 Messaging Protokolle</h1><p>&Uuml;ber Plugins kann Artemis zus&auml;tzliche Messaging Protokolle bedienen. Ausgeliefert werden Plugins f&uuml;r die Protokolle:</p><ul><li>AMQP</li><li>OpenWire ( ActiveMQ)</li><li>MQTT ab Version 3.1</li><li>STOMP</li><li>STOMP over Web Sockets</li><li>HornetQ ( F&uuml;r bestehende HornetQ Clients).</li><li>Core ( Artemis )</li></ul><h2>2.1 AMQP</h2><p>Artemins unterst&uuml;tzt AMQP in der Version 1.0 und ist damit u.a zu .NET und Apache qpid Clients kompatibel. Andere AMQP Versionen bzw. Dialekte wie die Version 0-9-1 werden nicht unterst&uuml;tzt.</p><h2>2.2 OpenWire</h2><p>OpenWire ist das native Protokoll des urspr&uuml;nglichen ActiveMQ Brokers. ActiveMQ Broker Installationen k&ouml;nnen durch Artemis ersetzt werden, ohne die Clients zu ver&auml;ndern, da diese weiterhin wie gewohnt &uuml;ber OpenWire mit dem Broker kommunizieren k&ouml;nnen. Der Screenshot der Artemis Console unten zeigt neben einer Verbindung zu einem Artemis Client auch Verbindungen zu ActiveMQ Consumern &uuml;ber das OpenWire Protokoll.</p><img src="/public/enterprise/artemis-openwire.png" alt="" title="Artemis ( Core) und ActiveMQ Consumer in der Artemis Console" name="artemis-openwire"><br><p class="imgcap"><b>Abbildung 2: </b><caption>Artemis ( Core) und ActiveMQ Consumer in der Artemis Console</caption></p><p>In der Praxis k&ouml;nnte sich die Migration von ActiveMQ nach Artemis etwas aufwendiger gestalten, da nicht nur das Protokoll sondern auch die serverseitigen Features eine Rolle spielen k&ouml;nnen.</p><h1>3 Enterprise Messaging</h1><p>&Uuml;ber einen JCA Connector kann Artemis als JMS Implementierung in Java Enterprise Server integriert werden und dort z.B. die <i>Message Driven Beans</i> (MDBs) Funktionalit&auml;t anbieten. Der WildFly Application Server von JBoss verwendet Artemis als integrierten Message Broker f&uuml;r seinen JEE Stack.</p><h1>4 Programmier Schnittstellen</h1><p>F&uuml;r die Entwicklung von Consumer und Producer stehen dem Programmierer die Schnittstellen JMS und Artemis Core API zur Verf&uuml;gung.</p><h2>4.1 JMS Support</h2><p>Artemis unterst&uuml;tzt JMS in der Version 2.0. Da die <i>Java Messaging Services</i> nur eine Programmierschnittstelle auf der Basis von Java Interfaces definieren und kein Protokoll, findet die JMS Anpassung im Client statt. Mit dem Server kommuniziert der JMS Client &uuml;ber das Artemis Core Protokoll. F&uuml;r die Umstellung eines JMS Clients auf Artemis muss die <i>Initial Factory</i> in den <i>jndi.roperties</i> umgestellt werden. Zum Beispiel von ActiveMQ:</p><div class="code2">java.naming.factory.initial=<b>org.apache.activemq.jndi.ActiveMQInitialContextFactory</b>
connectionFactory.ConnectionFactory=tcp://localhost:61616
queue.queue/orders=orders</div><p>auf Apache Artemis:</p><div class="code2">java.naming.factory.initial=<b>org.apache.activemq.artemis.jndi.ActiveMQInitialContextFactory</b>
connectionFactory.ConnectionFactory=tcp://localhost:61616
queue.queue/orders=orders</div><p>Zus&auml;tzlich m&uuml;ssen noch die Client Bibliotheken ausgetauscht werden. Der Code des Clients muss f&uuml;r eine Migration nicht angepasst werden.</p><h2>4.2 Artemis Core API</h2><p>Wem JMS zu umst&auml;ndlich ist, der kann direkt das Artemis Core API verwenden. Das Core API bietet auch einen gr&ouml;&szlig;eren Funktionsumfang als das JMS API.</p><h1>5 Mangement Console</h1><p>Die Web Konsole f&uuml;r das Management des Artemis wird von einem integrierten Jetty Web Server bereitgestellt. Im Web Server l&auml;uft die Management Konsole, die API Beschreibung und die Dokumentation. Die Management Konsole basiert auf der modularen Java Management Konsole hawtio, die auch f&uuml;r andere Projekte wie z.B. dem JBoss Wildfly Server verwendet wird.</p><p>Der Screenshot unten zeigt die Hawtio Konsole mit dem Plugin f&uuml;r Artemis. Der Graph zeigt eine &Uuml;bersicht der Beziehungen zwischen Broker, Queues, Consumer und Producer.</p><img src="/public/enterprise/artemis-hawtio-console.png" alt="" title="Artemis Console auf der Basis von Hawtio" name="artemis-hawtio-console"><br><p class="imgcap"><b>Abbildung 3: </b><caption>Artemis Console auf der Basis von Hawtio</caption></p><p>Der Administrator kann Nachrichten einer Queue einsehen, l&ouml;schen und verschieben.</p><img src="/public/enterprise/artemis-browse-messages.png" alt="" title="Artemis browse Messages" name="artemis-browse-messages"><br><p class="imgcap"><b>Abbildung 4: </b><caption>Nachrichten Browser mit Funktionen zum Verschieben, L&ouml;schen und erneut Senden.</caption></p><p>N&uuml;tzlich ist das Editieren und erneute Senden einer Nachricht. Die urspr&uuml;ngliche Nachricht wird nicht ver&auml;ndert sondern eine Kopie editiert und diese als zus&auml;tzliche Nachricht versendet.</p><img src="/public/enterprise/artemis-resend-messages.png" alt="" title="&Auml;ndern und erneutes senden einer Nachricht." name="artemis-resend-messages"><br><p class="imgcap"><b>Abbildung 5: </b><caption>Editieren einer Nachricht.</caption></p><h1>6 Management APIs</h1><p>Die Verwaltung des Brokers kann neben der Mangement Console auch &uuml;ber ein Management API erfolgen. Queues anlegen, Parameter setzen und Statistiken auslesen kann man beim Artemis mit JMX, &uuml;ber REST mit Jolokia, dem Client Core API oder &uuml;ber JMS Nachrichten an die spezielle Managementqueue <i>activemq.management</i>.</p><h1>7 Message Persistenz</h1><p>F&uuml;r das Zwischenspeichern von Nachrichten bietet Artemis die zwei Optionen: Ablage der Nachrichten in einer Dateisystem oder &uuml;ber JDBC in einer Datenbank.</p><h2>7.1 File Storage</h2><p>Das Speichern von Nachrichten auf der Platte ist der Default bei Artemis. Alle Operationen wie Nachrichten Persistieren oder L&ouml;schen werden als Schreiboperationen am Ende einer Datei realisiert ( Append Only ). Das Bewegen des Schreib-Lese-Kopfes der Platte wird dadurch m&ouml;glichst vermieden und die langsame Positionierung des Kopfes bremst den Zugriff nicht. Artemis verwaltet selbst die Dateien und optimiert den Speicherplatz der Nachrichten ( Compaktion). </p><p>F&uuml;r die Interaktion mit dem Dateisystem gibt es zwei Implementierung. Die Implementierung auf der Basis von Java NIO bietet gute Performanz und l&auml;uft auf jedem Betriebssystem. F&uuml;r Linux gibt es eine optimierte Variante, welche die <i>Linux Asynchronous IO</i> Bibliothek nutzt.</p><h2>7.2 JDBC Storage</h2><p>Der JDBC Message Store wird zwar mitausgeliefert, ist aber noch unter Entwicklung. Empfohlen wird der File Store. Der JDBC Store wird nur entwickelt f&uuml;r die Benutzer, die einen JDBC Store verwenden m&uuml;ssen. Andere Gr&uuml;nde den JDBC Store einzusetzen gibt es nicht. Der File Storage ist um Gr&ouml;&szlig;enordnungen schneller, als der JDBC Store.</p><h1>8 Clustering</h1><p>Mit Artemis lassen sich verschiedene Cluster Konfigurationen und Topologien realisieren um Lastverteilung und/oder Ausfallsicherheit zu erreichen.</p><h2>8.1 Last Verteilung</h2><p>Wie beim ActiveMQ Broker kann mit Artemis ein Store and Forward Netzwerk an Brokern gebildet werden. Mehrere Broker Instanzen werden dazu &uuml;ber Message Bridges verbunden. &Uuml;ber die Bridges werden Nachrichten zwischen den Brokern ausgetauscht. Eine Nachricht befindet sich zu einem Zeitpunkt immer nur auf einem einzigen Broker. Damit die Last sinnvoll verteilt werden kann, stehen die Broker in Kontakt und tauschen sich &uuml;ber ihre Clients und Subscriptions aus. Mit diesen Informationen k&ouml;nnen Nachrichten gezielt zu den Konsumern geleitet werden. Ein Netzwerk aus Brokern kann mit <i>Client Side Load Balancing</i> kombiniert werden.</p><h2>8.2 Ausfallsicherheit</h2><p>Ausfallsicherheit sorgt daf&uuml;r, dass beim Ausfall eines Brokers alle mit ihm verbundenen Clients &uuml;ber andere Broker weiter arbeiten k&ouml;nnen, ohne dass Nachrichten verloren gehen.</p><p>Artemis erzielt die Ausfallsicherheit &uuml;ber eine <i>Master Slave</i> Topologie. Artemis verwendet f&uuml;r <i>Master Slave</i> bzw. <i>Leader Follower</i> die politisch korrekten Begriffe <i>Live</i> und <i>Backup Server</i>. Ein Live Server bedient alle Anfragen der Consumer und Producer. Die Backup Server erhalten Replikas der Nachrichten und halten sich f&uuml;r einen Ausfall bereit. Nach dem Ausfall des Live Servers &uuml;bernimmt ein Backup Server die Arbeit. Nachdem ein Live Server wieder zur Verf&uuml;gung steht kann der Cluster wieder automatisch auf den Live Server wechseln und der Backup Server stellt seine Arbeit wieder ein.</p><p>Die Backup Server k&ouml;nnen entweder &uuml;ber eine geteiltes Medium ein oder &uuml;ber Replikation mit Daten versorgt werden.</p><p>Die vom Artemis f&uuml;r die Ausfallsicherheit genutzt Master Slave Topologie hat gegen&uuml;ber einer Multimaster oder Masterless Architektur wie sie z.B. Apache Kafka einsetzt die folgenden Nachteile:</p><ul><li>Die Backup Server &uuml;bernehmen keine Arbeit und tragen nicht zur Gesamtperformanz des Clusters bei. Nicht f&uuml;r die Antwortzeiten und auch nicht f&uuml;r die Speicherkapazit&auml;t.</li><li>Es wird zwischen den zwei Rollen Master und Slave unterschieden. Beim Multimaster sind alle Knoten gleich.</li><li>Beim Ausfall des Masters m&uuml;ssen die Clients auf einen Slave umstellen. Dies kann schief gehen, da vielleicht die Clients nicht mit der Slave Adresse versorgt wurden oder das Routing im Netzwerk nicht konfiguriert ist. Beim Multimaster werden st&auml;ndig alle Knoten mit einbezogen so dass es beim Ausfall eines Knotens weniger &Uuml;berraschungen gibt.</li></ul><p>Eine Multimaster Architektur ist mit dem JMS API ohne weiteres nicht m&ouml;glich. Daher passt der Live Server und Backup Server Ansatz zum Produkt.</p><p>Es wird beim Artemis nicht garantiert, dass bei einem Failover keine Nachrichten oder Best&auml;tigungen verloren gehen. In-flight Nachrichten oder Acknowledgements k&ouml;nnen bei einem Ausfall betroffen sein. Beim Failover wurde bewu&szlig;t auf eine 100 prozentige Statereplikation aus Performanzgr&uuml;nden verzichtet.</p><h2>8.3 Service Discovery</h2><p>Mit dem Dynamic Discovery Feature k&ouml;nnen Clients ihre Server im Netz finden. Als Broadcast Technologie kann UDP oder JGroups verwendet werden. Service Discovery ist besonders in Verbindung mit einem Cluster interessant.</p><h1>9 Installation</h1><p>Artemis ist mit der Programmiersprache Java realisiert und kann somit auf einer Vielzahl von Betriebssystemen eingesetzt werden. Besonders unterst&uuml;tzt werden Linux und Windows.</p><p>Nach dem Entpacken der Artemis Distribution muss ein Broker erstellt werden. Dazu wird in der Kommandozeile eine Create-Funktion aufgerufen. Nach wenigen Sekunden steht  eine Broker Instanz zur Verf&uuml;gung, die auf das gepackte Verzeichnis verweist. Mehrere Broker Instanzen k&ouml;nnen sich eine Installation teilen. Diese Aufteilung erleichtert die Migration auf neue Artemis Versionen.</p><p>Artemis gibt es auch als OSGi Bundle welches z.B. auf Apache Karaf oder ServiceMix ausgef&uuml;hrt werden kann.</p><img src="/public/enterprise/apache-artemis-start.png" alt="" title="Start einer Artemis Instanz" name="apache-artemis-start.png"><br><p class="imgcap"><b>Abbildung 6: </b><caption>Start einer Artemis Instanz von der Kommandozeile</caption></p><h1>10 Konfiguration</h1><p>Die Konfiguration von Artemis erfolgt &uuml;ber eine zentrale XML Datei. Dort k&ouml;nnen z.B. neue Queues angelegt, Quotas gesetzt oder Protokolle konfiguriert werden. Die Konfigurationsdatei wird st&auml;ndig &uuml;berwacht und &Auml;nderungen werden ohne Neustart aktiv. Das Hot-Reload Feature ist besonders bei der Entwicklung und dem Erproben von neuen Konfigurationen hilfreich.</p><h1>11 Spring Integration</h1><p>Ein eingebetteter Artemis Server kann &uuml;ber eine Spring Konfiguration gestartet werden. Im Gegensatz zum ActiveMQ ist die Artemis Konfiguration keine Spring Konfiguration. Es ist davon auszugehen, dass Artemis nicht so einfach wie der ActiveMQ &uuml;ber Spring erweitert und ver&auml;ndert werden kann.</p><h1>12 CDI Integration</h1><p>Artemis kann als standalone oder embedded Broker in CDI integriert werden.</p><h1>13 Sicherheit</h1><p>Artemis ist in die Java Plattform integriert und unterst&uuml;tzt eine Authentifikation &uuml;ber JAAS und standardisierte Login Module. Das Sicherheitskonzept ist rollenbasiert und feink&ouml;rnig. F&uuml;r einzelne Queues k&ouml;nnen Lese, Schreib und Admin Rechte an Gruppen vergeben werden. Selbstverst&auml;ndlich kann die Kommunikation mit TLS verschl&uuml;sselt werden.</p><h1>14 Performanz</h1><p>Um ein Gef&uuml;hl f&uuml;r die Performanz des Artemis Brokers zu bekommen, habe ich einen einfachen Lasttest durchgef&uuml;hrt und die Bandbreite in Nachrichten pro Sekunde gemessen. Der Performanztest ist kein Ersatz f&uuml;r ein korrekt durchgef&uuml;hrten Benchmark, sollte aber f&uuml;r eine Idee &uuml;ber die Gr&ouml;&szlig;enordnung ausreichen.</p><p>Beim Test habe ich gemessen, wie lange der Broker ben&ouml;tigt, um 100.000 kleine Nachrichten von einem Producer zu empfangen und zu persistieren. Ein einfaches Testprogramm habe ich einmal mit dem ActiveMQ und einmal mit dem Artemis durchgef&uuml;hrt.</p><p>Aufgrund der neueren Architektur und der asynchronen Verarbeitung von Artemis habe ich erwartet, dass Artemis mindestens um den Faktor 3 schneller fertig ist als ActiveMQ. Vielleicht nicht so schnell wie RabbitMQ oder Apache Kafka, aber mindestenz im Bereich von 10.000 Nachrichten pro Sekunde.</p><p>Tats&auml;ch gemessen habe ich 3.318 Nachrichten pro Sekunde beim ActiveMQ und 3.291 beim Artemis. Das Ergebnis war f&uuml;r mich eine &Uuml;berraschung. Artemis bewegt sich trotz der neuen Architektur in der Gr&ouml;&szlig;enordnung des ActiveMQ Brokers und war im Test sogar etwas langsamer. Vielleicht sind die Einschr&auml;nkungen des JMS APIs f&uuml;r beide Broker der limitierende Faktor.</p><p>Dreitausend Nachrichten pro Sekunde sind f&uuml;r die meisten betriebswirtschaftlichen Anwendungen mehr als genug. Besonders bei einem Broker, der Nachrichten puffert. F&uuml;r <i>Internet of Things</i> oder Anwendungen in der <i>Industrie 4.0</i> fehlen beiden Brokern die Reserven.</p><h1>15 Test Unterst&uuml;tzung</h1><p>Artemis eignet sich f&uuml;r automatisierte Unittests. Der Broker kann embedded in einem Test gestartet und gestoppt werden.</p><h1>16 Migration vom ActiveMQ zu Artemis</h1><p>Artemis unterst&uuml;tzt mit OpenWire das Message Protokoll des ActiveMQ. Das erlaubt es den Broker ohne die &Auml;nderung von Clients auszutauschen. Bei einer Migration ist zu beachten, dass bei einer ActiveMQ Installation vielleicht Funktionen verwendet wurden, die der Artemis Broker noch nicht bietet. Das Artemis Entwickler sind dabei, alle Funktionen, die der ActiveMQ bietet auch f&uuml;r Artemis bereitzustellen. Stand Sommer 2018 ist dies aber noch nicht erreicht.</p><h1>17 ActiveMQ oder Artemis?</h1><p>Die hier getroffenen Aussagen beziehen sich auf den Stand Sommer 2018. In n&auml;chster Zukunft k&ouml;nnte alles wieder anders aussehen.</p><p>Artemis bietet momentan die folgenden Vorteile:</p><ul><li>Artemis bietet ein Master/Slave Clustering vergleichbar mit dem <i>Pure Master Slave</i> der alten ActiveMQ Versionen. Wer momentan eine aktuelle ActiveMQ Version einsetzt hat das Problem, dass nur ein Shared Master Slave oder ein Cluster auf der Basis der LevelDB angeboten wird. Das Clustering mit der LevelDB wird aber nicht mehr weiter entwickelt. Wer Failover einsetzen m&ouml;chte, sollte sich Artemis definitiv ansehen.</li><li>Artemis bietet eine bessere Performanz. Allerdings schafft der ActiveMQ auch mehrere tausend Nachrichten pro Sekunde zu verarbeiten. F&uuml;r die meisten Anwendungen reicht das aus.</li><li>Artemis verf&uuml;gt &uuml;ber eine modernere Architektur und Codebasis.</li></ul><p>Wer momentan den ActiveMQ einsetzt und zufrieden ist, kann zun&auml;chst bei ActiveMQ bleiben. Wer jetzt Messaging neu einf&uuml;hren m&ouml;chte, dem w&uuml;rde ich Artemis empfehlen, sofern er dort alle ben&ouml;tigten Funktionen findet.</p><h1>18 Apache Artemis oder Kafka?</h1><p>Apache Kafka besitzt eine modernere Architektur, bei der der Broker wesentlich einfacher realisiert ist als bei den bisherigen Messaging L&ouml;sungen. Consumer und Producer sind leichtgewichtiger und bereits gelesen Nachrichten k&ouml;nnen beliebig oft erneut gelesen werden. Gerade das erneute Lesen ist eine Schl&uuml;sselfunktion, die beim Messaging schmerzhaft vermi&szlig;t wurde. Beispielsweise kann ein Consumer nach dem Auftreten von Fehlern Nachrichten erneut lesen, ohne den Betreiber des Producers bitten zu m&uuml;ssen, die Nachrichten irgendwie erneut zu senden. Kafka erm&ouml;glicht auch die zeitlich unbegrenzte Ablage von Nachrichten. Des weiteren wird Kafka nicht durch das eingeschr&auml;nkte JMS API limitiert.</p><p>Artemis ist im Gegensatz zu Kafka ein richtiger Enterprise Broker. Artemis unterst&uuml;tzt JMS und l&auml;&szlig;t sich als Broker &uuml;ber JCA in einen Application Server integrieren. Der Zugriff auf Queues kann bei Artemis in einer Transaktion erfolgen. Konsistenz in einer verteilten Anwendung ist mit Artemis leicht herzustellen. Die Garantien <i>At most once</i>, <i>At least once</i> und <i>Exactly once</i> sind mit Artemis einfach zu erreichen. Mit Kafka sind ebenfalls weitreichende Garantien m&ouml;glich, daf&uuml;r muss aber einges bei der Entwicklung beachtet werden.</p><h1>19 Fazit</h1><p>Artemis ist ein Enterprise Broker mit JMS Support und der M&ouml;glichkeit &uuml;ber JCA in einen Application Server integriert zu werden. Zuverl&auml;ssigkeit kann durch Failover &uuml;ber einen Cluster erzielt werden. F&uuml;r die Lastverteilung oder eine geographische Verteilung der Broker kann ein Netzwerk aus Knoten aufgebaut werden.</p><p>Die Architektur des Artemis ist moderner und leistungsf&auml;higer als beim ActiveMQ. Noch fehlen aber n&uuml;tzliche Features, die der ActiveMQ Broker bietet.</p><p>Apache Artemis ist definitiv die Wahl, wenn es um JMS und Enterprise Messaging geht. Wer auf JMS verzichten kann k&ouml;nnte auch einen Blick auf Apache Kafka vor einer Entscheidung f&uuml;r Artemis werfen.</p><p>Ob es Artemis schafft, den in die Tage gekommenen ActiveMQ abzul&ouml;sen und die selbe Popularit&auml;t zu erreichen, muss die Zukunft zeigen.</p></div><div class="column"><div><div class="tags" style="margin-top: 1rem"><span class="tag"><a href="/tag/messaging.html">Messaging</a></span><span class="tag"><a href="/tag/jms.html">JMS</a></span><span class="tag"><a href="/tag/enterprise.html">Enterprise</a></span><span class="tag"><a href="/tag/amqp.html">AMQP</a></span><span class="tag"><a href="/tag/apache-artemis.html">Apache Artemis</a></span><span class="tag"><a href="/tag/apache-activemq.html">Apache ActiveMQ</a></span><span class="tag"><a href="/tag/apache-kafka.html">Apache Kafka</a></span></div><div class="box" style="margin-top: 1rem"><b class="is-5">
				Message Broker Vergleich
			</b><div class="content"><content>Dieser Artikel ist eine Erg&auml;nzung zum <a href="/activemq-hornetq-rabbitmq-apollo-qpid-vergleich.htm">Open Source Message Broker Vergleich</a>.</content></div></div><div class="box" style="margin-top: 1rem"><b class="is-5">
				<a href="/activemq-schulung.htm">Weitere Artikel zum Messaging</a>
			</b><div class="content"><content>
				<ul><li><a href="/mqtt.htm">Das IoT Protokoll MQTT</a></li><li><a href="/message-redelivery.htm">Redelivery von Messages</a></li></ul>

			</content></div></div><div class="box" style="margin-top: 1rem"><b class="is-5">
				<a href="/activemq-schulung.htm">ActiveMQ Schulung</a>
			</b><div class="content"><content>Lerne in unserer ActiveMQ Schulung alles wichtige &uuml;ber Installation, Entwicklung, Clustering und Transaktionen.</content></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="columns"><div class="column"><b>Webinare</b><ul><li><a href="/api-rest-swagger-graphql-webinar.htm">REST APIs</a></li><li><a href="/microservices-webinar-online-training.htm">Microservices</a></li><li><a href="/api-rest-security-webinar-online-schulung.htm">API Sicherheit</a></li><li><a href="/camel-webinar-online-training.htm">Integration mit Apache Camel</a></li><li><a href="/kubernetes-fuer-manager-webinar-online-schulung.htm">Kubernetes f&uuml;r Manager</a></li><li><a href="/kubernetes-webinar-online-schulung.htm">Kubernetes Workshop</a></li><li><a href="/artemis-jms-2-online-training.htm">Apache Artemis</a></li></ul></div><div class="column"><b>Artikel</b><ul><li><a href="/rest-graphql-grpc-api-vergleich-artikel.htm">REST, GraphQL &amp; gRPC im Vergleich</a></li><li><a href="/service-mesh-microservices.htm">Service Mesh: Einf&uuml;hrung &amp; Vergleich von Istio und Linkerd</a></li><li><a href="/microservices-spring-boot-spring-cloud.htm">Microservices mit Spring Boot &amp; Cloud</a></li><li><a href="/api-management.htm">API Management</a></li><li><a href="/camel-fuse-mule-servicemix-talend-esb/">Camel, Nifi, JBoss Fuse, Mule
                &amp; Talend ESB im Vergleich</a></li></ul><br><b>Blog</b><ul><li><a href="/blog/api-gateway-servicemesh.htm">Unterschied zwischen API Gateway und Service Mesh</a></li><li><a href="/blog/minimale-groesse-microservice.htm">Minimale Gr&ouml;&szlig;e eines Microservice</a></li></ul></div><div class="column"><b>Sitemap</b><ul><li><a href="/jobs/">Jobs</a></li><li><a href="/impressum/">Impressum</a></li><li><a href="/unternehmen/datenschutz.htm" rel="nofollow">Datenschutzerkl&auml;rung</a></li></ul></div></div><p>&copy; 2021 predic8 GmbH Bonn (0228) 5552576-0</p><link rel="stylesheet" type="text/css" href="/cookies.css"></div></footer></body></html>