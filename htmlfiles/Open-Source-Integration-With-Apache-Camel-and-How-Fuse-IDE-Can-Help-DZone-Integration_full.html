
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Let's look at Apache Camel and see how it solves a sample integration problem.">
  <meta name="keywords" content="Integrated development environment, Apache Camel, Enterprise integration, Open source, application, Spring Framework, XML, listing, File system, Apache Maven">

  <meta property="og:description" content="Let's look at Apache Camel and see how it solves a sample integration problem.">
  <meta property="og:site_name" content="dzone.com">
  <meta property="og:title" content="Open Source Integration With Apache Camel and How Fuse IDE Can Help - DZone Integration">
  <meta property="og:url" content="https://dzone.com/articles/open-source-integration-apache">
  <meta property="og:image" content="https://dz2cdn3.dzone.com/storage/article-thumb/12345902-thumb.jpg">
  <meta property="og:type" content="article">

  <meta name="twitter:site" content="@DZoneInc">
  <meta name="twitter:image" content="https://dz2cdn3.dzone.com/storage/article-thumb/12345902-thumb.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:description" content="Let's look at Apache Camel and see how it solves a sample integration problem.">
  <meta name="twitter:title" content="Open Source Integration With Apache Camel and How Fuse IDE Can Help - DZone Integration">

  <meta name="referrer" content="origin-when-cross-origin">
  <meta name="google-site-verification" content="kndbhxcupfEqWmZclhCpB6vlgOs7QSmx2UHAGGnP2mA">
  <meta name="df-verify" content="df0d76632b4543">

  <link rel="icon" type="image/x-icon" href="https://dz2cdn1.dzone.com/themes/dz20/images/favicon.png">
  <link rel="image_src" href="https://dz2cdn3.dzone.com/storage/article-thumb/12345902-thumb.jpg">
  <link rel="canonical" href="https://dzone.com/articles/open-source-integration-apache">

  <title>Open Source Integration With Apache Camel and How Fuse IDE Can Help - DZone Integration</title>

  <link rel="preload" href="https://fonts.dzone.com/themes/dz20/font/fontello.woff?11773374" as="font" type="font/woff" crossorigin="anonymous">

  <link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/ftl/icons.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/lib/static/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/ftl/article/global.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/ftl/header/styles.css">
</head>
<body>
<div id="ftl-header">
  <div class="container-fluid header">
    <div class="row">
      <div class="col-md-12" style="padding: 0;">
        <div class="header-top">
          <div class="header-container">
            <div class="pull-left logo-container">
              <div class="logo">
                <a class="inner" href="/">
                  <picture>
                    <source srcset="https://dz2cdn1.dzone.com/themes/dz20/images/dz_logo_2021_cropped.webp" type="image/webp">
                    <source srcset="https://dz2cdn1.dzone.com/themes/dz20/images/dz_logo_2021_cropped.png" type="image/png">
                    <img src="https://dz2cdn1.dzone.com/themes/dz20/images/dz_logo_2021_cropped.png" width="160" height="52" alt="DZone">
                  </picture>
                </a>
              </div>

                <div class="active-portal"><a href="/enterprise-integration-training-tools-news">Integration Zone</a></div>
            </div>

            <div class="pull-right login-and-search">
              <div id="authenticated-block" class="logged-in">
                <div class="welcome-back">Thanks for visiting DZone today,</div>
                <div id="user-header" class="user-info">
                  <button class="user-avatar">
                    <span id="header-username" class="username"></span>
                    <img id="header-avatar" src="" alt="user avatar">
                  </button>
                  <div id="user-dropdown" class="browse-user-menu">
                    <div class="user-content">
                      <a id="header-user-plug" href="#" class="user-description"></a>
                      <a id="header-user-edit" href="#" class="edit-profile">Edit Profile</a>
                    </div>
                    <ul class="user-actions">
                      <li id="first-user-action"><a id="header-dropdown-manage-email" href="#">Manage Email Subscriptions</a></li>
                      <li>
                        <a href="/articles/how-to-submit-a-post-to-dzone?utm_source=DZone&utm_medium=user_dropdown&utm_campaign=how_to_post">
                          How to Post to DZone
                        </a>
                      </li>
                      <li>
                        <a href="/articles/dzones-article-submission-guidelines">
                          Article Submission Guidelines
                        </a>
                      </li>
                    </ul>
                    <div class="bottom">
                      <a href="/users/logout.html" class="sign-out">Sign Out</a>
                      <a id="dropdown-view-profile" href="#" class="view-profile">View Profile</a>
                    </div>
                  </div>
                </div>

                <div class="post-content">
                  <button id="post-button" class="post-content--button">
                    <span class="post-class">Post</span>
                    <i class="icon-plus"></i>
                  </button>

                  <div id="post-menu" class="posting-links">
                    <div class="posting-links-menu">
                      <ul>
                        <li>
                          <img src="/themes/dz20/images/dz-postarticle.svg">
                          <a href="/content/article/post.html">Post an Article</a>
                        </li>
                        <li>
                          <a id="drafts-link" href="#">Manage My Drafts</a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div id="unauthenticated-block">
                <div class="dz-intro">Over 2 million developers have joined DZone.</div>
                <div class="mobile-invisible sign-in-join">
                  <a href="/users/login.html">Log In</a>
                  <span class="dz-intro-span">/</span>
                  <a href="/static/registration.html">Join</a>
                </div>
                <a class="join-icon" href="/users/login.html"><i class="icon-user"></i></a>
              </div>
              <div class="headerSearch">
                <a class="icon-search dropdown-toggle" href="/search"></a>
              </div>
            </div>
          </div>
        </div>

        <div class="header-bottom">


          <ul class="portals header-container scrollable-ul">
            <li>
              <a href="/refcardz" id="header-refcardz">
                <em>Refcardz</em>
              </a>
            </li>
            <li>
              <a href="/trendreports" id="header-research">
                <em>Trend Reports</em>
              </a>
            </li>
            <li>
              <a href="/webinars" id="header-webinars">
                <em>Webinars</em>
              </a>
            </li>
            <li class="last-portal-link">
              <a href="#" id="header-portals">
                <em>
                  Zones
                  <span id="zone-arrow" class="collapsible-toggle">
                    <i class="icon-angle-down"></i>
                    <i class="icon-angle-up"></i>
                  </span>
                </em>
              </a>
            </li>

            <li class="separator" aria-hidden="true" style="color: #d9dcdd;">|</li>
            <li id="portal-list" class="portal-topics">
              <ul>
                  <li>
                    <a href="/agile-methodology-training-tools-news" id="header-2">Agile</a>
                  </li>
                  <li>
                    <a href="/artificial-intelligence-tutorials-tools-news" id="header-4001">AI</a>
                  </li>
                  <li>
                    <a href="/big-data-analytics-tutorials-tools-news" id="header-3">Big Data</a>
                  </li>
                  <li>
                    <a href="/cloud-computing-tutorials-tools-news" id="header-4">Cloud</a>
                  </li>
                  <li>
                    <a href="/database-sql-nosql-tutorials-tools-news" id="header-5">Database</a>
                  </li>
                  <li>
                    <a href="/devops-tutorials-tools-news" id="header-6">DevOps</a>
                  </li>
                  <li>
                    <a href="/enterprise-integration-training-tools-news" id="header-7">Integration</a>
                  </li>
                  <li>
                    <a href="/iot-developer-tutorials-tools-news-reviews" id="header-8">IoT</a>
                  </li>
                  <li>
                    <a href="/java-jdk-development-tutorials-tools-news" id="header-1">Java</a>
                  </li>
                  <li>
                    <a href="/microservices-news-tutorials-tools" id="header-6001">Microservices</a>
                  </li>
                  <li>
                    <a href="/open-source-news-tutorials-tools" id="header-7001">Open Source</a>
                  </li>
                  <li>
                    <a href="/apm-tools-performance-monitoring-optimization" id="header-10">Performance</a>
                  </li>
                  <li>
                    <a href="/application-web-network-security" id="header-2001">Security</a>
                  </li>
                  <li>
                    <a href="/web-development-programming-tutorials-tools-news" id="header-11">Web Dev</a>
                  </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script async src="https://dz2cdn1.dzone.com/themes/dz20/ftl/header/bundle.js"></script><link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/ftl/article/styles.css">




<div id="ftl-article" >
  <div class="container-fluid body">
    <div class="row">
      <div class="col-md-12">
        <div class="articles-wrap">
              <div class="ad-container">
                <div id="div-gpt-ad-1435246566686-0" class="ads-billboard-article" data-gpt-slot="top"></div>
              </div>


          <div class="article-stream widget-top-border">
                <div class="content-right-images">
                  <div id="div-gpt-ad-1435246566686-2" class="sidebar-ad" data-gpt-desktop="true" data-gpt-slot="sidebar1"></div>
                </div>

                <script type="application/ld+json">
                  {
                    "@context": "http://schema.org",
                    "@type": "Article",
                    "headline": "Open Source Integration With Apache Camel and How Fuse IDE Can Help",
                    "author": {
                      "@type": "Person",
                      "name": "Jonathan Anstey"
                    },
                    "audience": "software developers",
                    "keywords": "java,enterprise-integration,apache camel,fuse,integration,tutorial",
                    "timeRequired": "PT11M",
                    "commentCount": 12,
                    "wordCount": "2654",
                    "accessMode": "textual, visual",
                    "dateCreated": "2019-08-14T21:34:12Z",
                    "datePublished": "2019-08-14T00:00:00Z",
                    "dateModified": "2020-12-17T10:48:32Z",
                    "articleSection": "enterprise-integration-training-tools-news",
                    "publisher": {
                      "@type": "Organization",
                      "name": "DZone",
                      "url": "https://dzone.com",
                      "logo": {
                        "@type": "ImageObject",
                        "url": "https://dzone.com/themes/dz20/images/dz_logo_2021_cropped.png"
                      }
                    },
                    "articleBody": "Take any integration project and you have multiple applications talking over multiple transports on multiple platforms. As you can imagine, in large enterprises, applications like this can get complex very fast. Much of the complexity stems from two issues: Dealing with the specifics of applications and transports Coming up with good solutions to integration problems Making your applications speak transports and APIs is relatively easy on its own. I'm sure everyone knows how to send JMS messages to their broker of choice; though it still requires in-depth knowledge of the JMS specification, which many developers may not have. On top of that, what happens when you want to route that JMS message to another application? You then have to take care of mapping the JMS message to the application plus handle any new concepts related to the application. Add a dozen other applications into the mix and you've got quite a headache on your hands. Ignoring the mechanics of how to connect with multiple transports and APIs, we can focus on the high-level design of how applications interact. Fortunately, most solutions to enterprise integration problems have been formalized already. Gregor Hohpe and Bobby Woolfe's book, Enterprise Integration Patterns: Designing, Building, and Deploying Messaging Solutions, boils down years of experience from enterprise architects into a set of sixty-five Enterprise Integration Patterns (EIPs). This is great, but we still have to hand-code all parts of these patterns; these are not packaged solutions, only recommendations. Apache Camel was created with the intention of addressing these two issues. In this article, I'll first give you a quick overview of what Camel is. I’ll then guide you through how Camel solves a sample integration problem. Finally, I’ll show off some new graphical tooling that makes it even easier to solve integration problems with Camel. What Is Camel? Apache Camel is an open source Java framework that focuses on making integration easier and more accessible to developers. It does this by providing: Concrete implementations of all the widely used EIPs Connectivity to a great variety of transports and APIs Easy-to-use Domain-Specific Languages (DSLs) to wire EIPs and transports together Figure 1 shows how these three items actually map to Camel concepts. To give you a good understanding of how Camel is organized, we will discuss Components, Endpoints, Processors, and DSLs. There is, of course, a lot more going on here under the hood, but we'll leave that for another discussion. Figure 1: High-level view of Camel's architecture (from Camel in Action). Components are the extension point in Camel to add connectivity to other systems. The core of Camel is very small to keep dependencies low, promote embeddability, etc. and as a result contains only 13 essential components. There are over 80 components outside the core. To expose these systems to the rest of Camel, Components provide an Endpoint interface. By using URIs, you can send or receive messages on Endpoints in a uniform way. For instance, to receive messages from a JMS queue aQueue and send them to a file system directory \"/tmp\", you could use URIs like \"jms:aQueue\" and \"file:/tmp\". Processors are used to manipulate and mediate messages between Endpoints. All of the EIPs are defined as Processors or sets of Processors. As of writing, Camel supports over 40 patterns from the EIP book and many other useful Processors. To wire Processors and Endpoints together, Camel defines multiple DSLs in regular programming languages such as Java, Scala, and Groovy. It also allows routing rules to be specified in XML. Here are some DSL examples using different languages and staying functionally equivalent: Java DSL from (\"file:/tmp\").to(\"jms:aQueue\"); Spring DSL &lt;route&gt; &lt;from uri=\"file:/tmp\"/&gt; &lt;to uri=\"jms:aQueue\"/&gt; &lt;/route&gt; Scala DSL from \"file:/tmp\" -&gt; \"jms:aQueue\" In all the above examples, we define a routing rule that will load files in the “/tmp” directory into memory, create a new JMS message with the file contents, and send that message to a JMS queue named aQueue. These are the concepts that Camel was built upon. Since then, many other interesting features have been added. I recommend reading Camel in Action, by Claus Ibsen and myself to really get the full picture of what Camel can do. But, to get you started, some of these extra features include: Pluggable data formats and type converters for easy message transformation between CSV, EDI, Flatpack, HL7, JAXB, JSON, XmlBeans, XStream, Zip, etc. Pluggable languages to create expressions or predicates for use in the DSL. Some of these languages include: EL, JXPath, Mvel, OGNL, BeanShell, JavaScript, Groovy, Python, PHP, Ruby, SQL, XPath, XQuery, etc. Support for the integration of beans and POJOs in various places in Camel. Excellent support for testing distributed and asynchronous systems using a messaging approach And much more... Introducing Rider Auto Parts The example in this article is based on a fictional motorcycle parts business used throughout the Camel in Action book. The company, named Rider Auto Parts, supplies parts to motorcycle manufacturers. Over the years, they’ve changed the way they receive orders several times. Initially, orders were placed by uploading comma-separated value (CSV) files to an FTP server. The message format was later changed to XML. Currently, they provide a website through which orders are submitted as XML messages over HTTP. Rider Auto Parts asks new customers to use the web interface to place orders, but because of service level agreements (SLAs) with existing customers, they must keep all the old message formats and interfaces up and running. All of these messages are converted to an internal Plain Old Java Object (POJO) format before processing. A high-level view of the order processing system is shown in Figure 2. Figure 2: High-level view of order processing at Rider Auto Parts (from Camel in Action). We need to find out the best way to implement the “Rider order frontend” in Figure 2 above. Let’s first see how this looks using notation from the Enterprise Integration Patterns book. Solution Using EIPs Rider Auto Parts faces a pretty common problem; over years of operation businesses acquire software baggage in the form of transports/data formats that are popular at the time. Using patterns from the EIP book we can envision the solution as something like Figure 3. Figure 3: This shows the solution to Rider Auto Parts integration problem using notation from the Enterprise Integration Patterns book. So we have several patterns in use here. There are two Message Endpoints; one for FTP connectivity and another for HTTP. Messages from these endpoints are fed into the incomingOrders Message Channel The messages are consumed from the incomingOrders Message Channel and routed by a Content-Based Router to one of two Message Translators. As the EIP name implies, the routing destination depends on the content of the message. In this case, we need to route based on whether the content is a CSV or XML file. Both Message Translators convert the message content into a POJO, which is fed into the orders Message Channel. The whole section that uses a Content-Based Router and several Message Translators is referred to as a Normalizer. This composite pattern has a unique graphic to depict it but was left out here in favor of its sub-patterns to make things clearer. Implementation Using Camel As mentioned before, Camel has a small core set of components included by default. The rest of the components exist as separate modules. In applications that require many types of connectivity, it is useful to figure out what Camel modules to include. Listing 1 shows the dependencies using Apache Maven for the Camel implementation of the Rider Auto Parts example. Of course, you don't need to use Apache Maven for dependencies - it is just the easiest way to rapidly add new dependencies to your applications. The list of dependencies includes support for core Camel, ActiveMQ, JAXB marshaling, CSV marshaling, and HTTP. To make the example easier to try out, I've opted to use the File endpoint instead of the FTP. If we were using the FTP endpoint, we would need to add a dependency on the camel-ftp module as well.Listing 1: Maven dependencies for the Camel implementation &lt;dependencies&gt; &lt;!-- Core Camel --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-core&lt;/artifactId&gt; &lt;version&gt;${camel-version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-spring&lt;/artifactId&gt; &lt;version&gt;${camel-version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Embedded ActiveMQ broker --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt; &lt;artifactId&gt;activemq-core&lt;/artifactId&gt; &lt;version&gt;${activemq-version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.xbean&lt;/groupId&gt; &lt;artifactId&gt;xbean-spring&lt;/artifactId&gt; &lt;version&gt;${xbean-spring-version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- ActiveMQ connectivity for Camel --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt; &lt;artifactId&gt;activemq-camel&lt;/artifactId&gt; &lt;version&gt;${activemq-version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Add support for JAXB marshaling --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-jaxb&lt;/artifactId&gt; &lt;version&gt;${camel-version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Add support for CSV marshaling --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-bindy&lt;/artifactId&gt; &lt;version&gt;${camel-version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Add support for HTTP --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-jetty&lt;/artifactId&gt; &lt;version&gt;${camel-version}&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; While it is perfectly legitimate to use Camel as a standalone Java application, it is often useful to embed it in a container. In this case, we will be loading Camel entirely from Spring. In fact, the entire solution (except for the domain POJO and Maven build script) fits neatly into a single Spring XML file. This is because we are implementing our routing rules using the Spring XML configuration rather than one of Camel’s other DSLs. There are pros and cons to each, of course, but in this case, I mainly wanted to show off some cool tooling that currently works with the XML based routing rules only. The Spring XML file is shown in Listing 2 below. Listing 2: Complete Spring XML file that configures an embedded ActiveMQ broker and initializes a Camel Context with three routes. &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:amq=\"http://activemq.apache.org/schema/core\" xsi:schemaLocation=\" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\"&gt; &lt;amq:broker brokerName=\"localhost\" persistent=\"false\" useJmx=\"false\"/&gt; &lt;bean id=\"jms\" class=\"org.apache.activemq.camel.component.ActiveMQComponent\"&gt; &lt;property name=\"brokerURL\" value=\"vm://localhost\" /&gt; &lt;/bean&gt; &lt;camelContext xmlns=\"http://camel.apache.org/schema/spring\"&gt; &lt;route id=\"FileToJMS\"&gt; &lt;from uri=\"file:target/placeorder\" /&gt; &lt;to uri=\"jms:incomingOrders\" /&gt; &lt;/route&gt; &lt;route id=\"HTTPtoJMS\"&gt; &lt;from uri=\"jetty:http://0.0.0.0:8888/placeorder\" /&gt; &lt;inOnly uri=\"jms:incomingOrders\" /&gt; &lt;transform&gt; &lt;constant&gt;OK&lt;/constant&gt; &lt;/transform&gt; &lt;/route&gt; &lt;route id=\"NormalizeMessageData\"&gt; &lt;from uri=\"jms:incomingOrders\" /&gt; &lt;convertBodyTo type=\"java.lang.String\" /&gt; &lt;choice&gt; &lt;when&gt; &lt;simple&gt;${body} contains '?xml'&lt;/simple&gt; &lt;unmarshal&gt; &lt;jaxb contextPath=\"org.fusesource.camel\" /&gt; &lt;/unmarshal&gt; &lt;to uri=\"jms:orders\" /&gt; &lt;/when&gt; &lt;otherwise&gt; &lt;unmarshal&gt; &lt;bindy packages=\"org.fusesource.camel\" type=\"Csv\" /&gt; &lt;/unmarshal&gt; &lt;to uri=\"jms:orders\" /&gt; &lt;/otherwise&gt; &lt;/choice&gt; &lt;/route&gt; &lt;/camelContext&gt; &lt;/beans&gt; In this file, we first start an embedded Apache ActiveMQ broker and connect Camel to it. Next comes the camelContext element where we define our routing rules. Looking back at Figure 3, we need to receive orders from an FTP (substituted with File in this example) and HTTP endpoint, formatted as shown in Listing 3. In the Spring XML configuration, we can specify these incoming endpoints with two from elements. The “FileToJMS” and “HTTPtoJMS” routes start off with these from elements. Both from elements are connected to a producer (to and inOnly elements) using the “jms:incomingOrders\" URI, which will send the messages to a queue named incomingOrders on the ActiveMQ broker. Listing 3: Incoming message formats; XML on the left, CSV on the right. &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;order name=\"motor\" amount=\"1\"/&gt; \"name\", \"amount\" \"brake pad\", \"2\" In the case of the HTTP endpoint, there are a couple of extra things to mention. First off the HTTP client will be expecting a response from the application so we have to handle that. In Camel, we have full control over what the client gets back from the HTTP endpoint. Each response is determined by the last method in our current route definition. In our case, we use the transform method to set the response to the constant string \"OK\". Since we handle the response ourselves, we don’t want any response to come from the JMS incomingOrders queue. To send to this queue in a fire-and-forget fashion we use the inOnly element rather than the to element. The “NormalizeMessageData” route in Listing 2 specifies the Normalizer, complete with Content-Based Router and two Message Translators. First, we specify that we want to consume messages from the incomingOrders queue on the ActiveMQ broker. The content-based routing of the messages is done with the choice, when, and otherwise elements. In our case, we want to send CSV messages to one Message Translator and XML messages to another. To check what type of message data format we have we use a Simple expression which checks the message body for the “&lt;?xml” start tag. Simple is an expression language built into Camel. Of course, this is demonstration code only. For production cases, you would want to add a more thorough checking of content types. To unmarshal the XML and CSV payloads into an Order object, we use Camel’s data formats. Listing 2 shows how these data formats are defined within the unmarshal elements. As shown in Listing 5, the Order object has JAXB and Camel Bindy annotations to describe the mapping to XML and CSV. Listing 5: The Order domain class with JAXB/Bindy annotations for easy mapping to and from XML/CSV. @XmlRootElement @XmlAccessorType(XmlAccessType.FIELD) @CsvRecord(separator = \",\", skipFirstLine = true) public class Order implements Serializable { @XmlAttribute @DataField(pos = 1) private String name; @XmlAttribute @DataField(pos = 2) private int amount; public Order() { } public Order(String name, int amount) { this.name = name; this.amount = amount; } } At this point, successfully normalized messages are sent to the orders queue for processing by some other application at the Rider Auto Parts business. Implementation using Fuse IDE for Camel As we’ve seen, Apache Camel certainly makes it easy to create integrations. The DSLs in various languages are designed to be concise, powerful and easy to read – all with the goal of making you, the developer, more productive. With improving productivity in mind, FuseSource has created an IDE for Camel development called Fuse IDE for Camel. Fuse IDE is an Eclipse-based tool that allows you to drag and drop enterprise integration pattern (EIP) icons onto a canvas and connect them together to form routing rules. The backend of the IDE generates Camel routing rules in Spring XML for you so you don’t ever have to learn the specifics of Camel’s DSLs. Essentially, you can create a picture like Figure 3 and have Fuse IDE generate the Camel application for you. Figure 4 shows what the Fuse IDE designer looks like when we loaded our example configuration from Listing 2. Figure 4: Spring XML file in Listing 2 loaded into Fuse IDE’s designer. From the designer view, we can see the graphical representation of each of the routes we created in Spring XML beforehand. From this point, we can change how the EIP icons are connected, endpoint URI properties, add additional steps to the routes, and so on. Also, as of version 1.0, Fuse IDE will support all EIPs and components available in Apache Camel — so there is no waiting for version 2.0 to use your favorite Camel features. In this article, we started first by creating the Spring XML configuration by hand. This should not mislead you, however, there is no requirement to do this. In fact, since Fuse IDE supports 1-to-1 round-tripping between Camel Spring XML configuration and the designer view, you can use whichever you prefer. When you have finished constructing your routes, you can then take advantage of another neat feature included in Fuse IDE: that is the ability to generate a JUnit test case from any Camel Spring XML file. Once you are satisfied with your testing, you can then debug in a local Spring container or deploy to your container of choice — all from within the IDE. Of course, much more is planned for Fuse IDE in the future, so Camel development will only get easier. Summary In this article, I've shown two common problems that an integration developer may face: dealing with the specifics of applications and transports and coming up with good solutions to integration problems. The Apache Camel project provides a nice answer to both of these problems. As the example has shown, solving integration problems with Camel is straight forward and results in very concise route definitions. Building on that, we saw how Fuse IDE for Camel makes Camel development even easier. Links Apache Camel – http://camel.apache.org 2FuseSource distribution of Apache Camel – http://fusesource.com/products/enterprise-camel Fuse IDE for Camel - https://tools.jboss.org/features/fusetools.html Camel in Action book - http://www.manning.com/ibsen Jon’s Blog – http://janstey.blogspot.com Article source code - http://repo.fusesource.com/maven2/org/fusesource/examples/rider-auto-spring/2.0/rider-auto-spring-2.0.zip Originally published on 7/1/15",
                    "mainEntityOfPage": {
                      "@type": "WebPage",
                      "@id": "https://dzone.com/articles/open-source-integration-apache"
                    },
                    "image": {
                      "@type": "ImageObject",
                      "url": "https://dzone.com//dz2cdn3.dzone.com/storage/article-thumb/12345902-thumb.jpg"
                    }
                  }
                </script>

                  <script type="application/ld+json">
                    {
                      "@context": "https://schema.org",
                      "@type": "BreadcrumbList",
                      "itemListElement": [{
                        "@type": "ListItem",
                        "position": 1,
                        "name": "DZone",
                        "item": "https://dzone.com"
                      }, {
                        "@type": "ListItem",
                        "position": 2,
                        "name": "Integration Zone",
                        "item": "https://dzone.com/enterprise-integration-training-tools-news"
                      }, {
                        "@type": "ListItem",
                        "position": 3,
                        "name": "Open Source Integration With Apache Camel and How Fuse IDE Can Help",
                        "item": "https://dzone.com/articles/open-source-integration-apache"
                      }]
                    }
                  </script>

            <article>
              <div class="content">
                <div class="header">
                  <div class="col-xs-12 breadcrumb-padding">
                    <a href="/">DZone</a>
                    >
                      <a href="/enterprise-integration-training-tools-news">Integration Zone</a>
                      >
                      <a href="#">Open Source Integration With Apache Camel and How Fuse IDE Can Help</a>
                  </div>


                  <div class="header-title">
                    <div class="title">
                      <h1 class="article-title">Open Source Integration With Apache Camel and How Fuse IDE Can Help</h1>
                    </div>

                    <div class="subhead">
                      <h3>Let's look at Apache Camel and see how it solves a sample integration problem.</h3>
                    </div>

                    <div class="publish-meta">
                        <div class="article-author-meta">
                          <img src="https://secure.gravatar.com/avatar/eee66d2bfce5ea2dd7c561d6000cef72?d=identicon&r=PG" class="avatar" alt="Jonathan Anstey user avatar" width="40">
                          by

                          <div class="author-info">
                            <span class="author-name">
                              <a href="/users/384134/janstey.html" rel="nofollow">Jonathan Anstey</a>
                            </span>
                          </div>




                          &middot;
                        </div>
                      <span class="author-date">
                        Aug. 14, 19
                      </span>
                      &middot;
                        <a href="/enterprise-integration-training-tools-news" id="portal-name">
                          <span class="portal-name">Integration Zone</span>
                        </a>
                      &middot;
                      <span>Tutorial</span>
                    </div>
                  </div>
                </div>

                <div class="author-n-useraction">
                  <div class="like action">
                    <div id="activity-like-icon" class="dz-like icon-thumbs-up">
                      <span class="action-label">
                        <span id="activity-like-text">Like</span>
                      </span>
                      <a href="#">
                        <span id="activity-like-counter">(35)</span>
                      </a>
                    </div>
                  </div>

                  <div class="action">

                    <button class="comment">
                      <i class="icon-comment"></i>
                      Comment
                      <span id="activity-comment-counter" class="comment-count"></span>
                    </button>
                  </div>

                  <div class="save action">
                    <div id="activity-save-icon" class="save icon-star-empty">
                      <span id="activity-save-text" class="action-label">Save</span>
                    </div>
                  </div>

                  <div class="tweet action">
                    <a id="tweet-link" href="" class="title" target="_blank">
                      <span><i class="icon-twitter"></i></span>
                      <span class="action-label">Tweet</span>
                    </a>
                  </div>

                  <div class="pull-right">
                    <div id="activity-view-container" class="article-views action">
                      <i class="icon-eye"></i> 529.91K
                      <span class="action-label">Views</span>
                    </div>
                  </div>
                </div>

                    <div class="signin-prompt">
                      <p>Join the DZone community and get the full member experience.</p>
                      <a id="article-signin-prompt" href="/static/registration.html">Join For Free</a>
                    </div>
                    <div class="arrow-down"></div>

                  <div id="top-bumper-container"></div>

                <div>
                  <div class="content-html"><p pid="1">Take any integration project and you have multiple applications talking over multiple transports on multiple platforms. As you can imagine, in large enterprises, applications like this can get complex very fast. Much of the complexity stems from two issues:</p>
<ol>
 <li>Dealing with the specifics of applications and transports</li>
 <li>Coming up with good solutions to integration problems</li>
</ol>
<p pid="2">Making your applications speak transports and APIs is relatively easy on its own. I'm sure everyone knows how to send JMS messages to their broker of choice; though it still requires in-depth knowledge of the JMS specification, which many developers may not have. On top of that, what happens when you want to route that JMS message to another application? You then have to take care of mapping the JMS message to the application plus handle any new concepts related to the application. Add a dozen other applications into the mix and you've got quite a headache on your hands.</p>
<p pid="3"> Ignoring the mechanics of how to connect with multiple transports and APIs, we can focus on the high-level design of how applications interact. Fortunately, most solutions to enterprise integration problems have been formalized already. Gregor Hohpe and Bobby Woolfe's book, <em>Enterprise Integration Patterns: Designing, Building, and Deploying Messaging Solutions</em>, boils down years of experience from enterprise architects into a set of sixty-five Enterprise Integration Patterns (EIPs). This is great, but we still have to hand-code all parts of these patterns; these are not packaged solutions, only recommendations. </p>
<p pid="4"> Apache Camel was created with the intention of addressing these two issues. In this article, I'll first give you a quick overview of what Camel is. I’ll then guide you through how Camel solves a sample integration problem. Finally, I’ll show off some new graphical tooling that makes it even easier to solve integration problems with Camel.</p>
<h2> What Is Camel? </h2>
<p pid="5">Apache Camel is an open source Java framework that focuses on making integration easier and more accessible to developers. It does this by providing:</p>
<ul>
 <li><p pid="6">Concrete implementations of all the widely used EIPs </p></li>
 <li><p pid="7">Connectivity to a great variety of transports and APIs</p></li>
 <li><p pid="8">Easy-to-use Domain-Specific Languages (DSLs) to wire EIPs and transports together</p></li>
</ul>
<p pid="9"> Figure 1 shows how these three items actually map to Camel concepts. To give you a good understanding of how Camel is organized, we will discuss Components, Endpoints, Processors, and DSLs. There is, of course, a lot more going on here under the hood, but we'll leave that for another discussion. </p>
<p pid="10"><img alt="Image title" class="fr-fin fr-dib" src="http://java.dzone.com/sites/all/files/figure1_1.jpg" width="716" /></p>
<div class="Section4">
 <p style="text-align: center;"><em>Figure 1: High-level view of Camel's architecture (from <a href="http://manning.com/ibsen/" target="_blank">Camel in Action</a>).</em></p>
 <p> Components are the extension point in Camel to add connectivity to other systems. The core of Camel is very small to keep dependencies low, promote embeddability, etc. and as a result contains only 13 essential components. There are over 80 components outside the core. To expose these systems to the rest of Camel, Components provide an Endpoint interface. By using URIs, you can send or receive messages on Endpoints in a uniform way. For instance, to receive messages from a JMS queue <em>aQueue</em> and send them to a file system directory &quot;/tmp&quot;, you could use URIs like &quot;jms:aQueue&quot; and &quot;file:/tmp&quot;.</p>
 <p> Processors are used to manipulate and mediate messages between Endpoints. All of the EIPs are defined as Processors or sets of Processors. As of writing, Camel supports over 40 patterns from the EIP book and many other useful Processors.</p>
 <p> To wire Processors and Endpoints together, Camel defines multiple DSLs in regular programming languages such as Java, Scala, and Groovy. It also allows routing rules to be specified in XML. Here are some DSL examples using different languages and staying functionally equivalent:</p>
 <ul>
  <li>Java DSL</li>
 </ul>
 <pre><code lang="text/x-java">from (&quot;file:/tmp&quot;).to(&quot;jms:aQueue&quot;);</code></pre>
 <ul>
  <li>Spring DSL</li>
 </ul>
 <pre><code lang="application/xml">&lt;route&gt;
  &lt;from uri=&quot;file:/tmp&quot;/&gt;
  &lt;to uri=&quot;jms:aQueue&quot;/&gt;
&lt;/route&gt;</code></pre>
 <ul>
  <li>Scala DSL</li>
 </ul>
 <pre><code lang="text/x-java">from &quot;file:/tmp&quot; -&gt; &quot;jms:aQueue&quot;</code></pre>
 <p>In all the above examples, we define a routing rule that will load files in the “/tmp” directory into memory, create a new JMS message with the file contents, and send that message to a JMS queue named <em>aQueue</em>. </p>
 <p>These are the concepts that Camel was built upon. Since then, many other interesting features have been added. I recommend reading <em>Camel in Action</em>, by Claus Ibsen and myself to really get the full picture of what Camel can do. But, to get you started, some of these extra features include:</p>
 <ul>
  <li>Pluggable data formats and type converters for easy message transformation between CSV, EDI, Flatpack, HL7, JAXB, JSON, XmlBeans, XStream, Zip, etc. </li>
  <li>Pluggable languages to create expressions or predicates for use in the DSL. Some of these languages include: EL, JXPath, Mvel, OGNL, BeanShell, JavaScript, Groovy, Python, PHP, Ruby, SQL, XPath, XQuery, etc. </li>
  <li>Support for the integration of beans and POJOs in various places in Camel. </li>
  <li>Excellent support for testing distributed and asynchronous systems using a messaging approach</li>
  <li>And much more...</li>
 </ul>
 <h2>Introducing Rider Auto Parts </h2>
 <p>The example in this article is based on a fictional motorcycle parts business used throughout the <em>Camel in Action</em> book. The company, named Rider Auto Parts, supplies parts to motorcycle manufacturers. Over the years, they’ve changed the way they receive orders several times. Initially, orders were placed by uploading comma-separated value (CSV) files to an FTP server. The message format was later changed to XML. Currently, they provide a website through which orders are submitted as XML messages over HTTP. </p>
 <p>Rider Auto Parts asks new customers to use the web interface to place orders, but because of service level agreements (SLAs) with existing customers, they must keep all the old message formats and interfaces up and running. All of these messages are converted to an internal Plain Old Java Object (POJO) format before processing. A high-level view of the order processing system is shown in Figure 2.</p>
 <p><img alt="Image title" class="fr-fin fr-dib" src="http://java.dzone.com/sites/all/files/figure2_1.jpg" width="655" /></p>
 <p style="text-align: center;"><em>Figure 2: High-level view of order processing at Rider Auto Parts (from <a href="http://manning.com/ibsen/" target="_blank">Camel in Action</a>).</em></p>
 <p>We need to find out the best way to implement the “Rider order frontend” in Figure 2 above. Let’s first see how this looks using notation from the <em>Enterprise Integration Patterns</em> book.</p>
 <h2 class="MsoBodyText">Solution Using EIPs</h2>
 <p>Rider Auto Parts faces a pretty common problem; over years of operation businesses acquire software baggage in the form of transports/data formats that are popular at the time. Using patterns from the EIP book we can envision the solution as something like Figure 3. </p>
</div>
<div class="Section5">
 <p><img alt="Image title" class="fr-fin fr-dib" src="http://java.dzone.com/sites/all/files/figure3_2.jpg" width="669" /></p>
</div>
<p pid="11" style="text-align: center;"><em>Figure 3: This shows the solution to Rider Auto Parts integration problem using notation from the Enterprise Integration Patterns book.</em></p>
<p pid="12"> So we have several patterns in use here.</p>
<ol>
 <li><p pid="12">There are two Message Endpoints; one for FTP connectivity and another for HTTP.</p></li>
 <li><p pid="12">Messages from these endpoints are fed into the <em>incomingOrders</em> Message Channel</p></li>
 <li><p pid="12">The messages are consumed from the <em>incomingOrders</em> Message Channel and routed by a Content-Based Router to one of two Message Translators. As the EIP name implies, the routing destination depends on the content of the message. In this case, we need to route based on whether the content is a CSV or XML file.</p></li>
 <li><p pid="12">Both Message Translators convert the message content into a POJO, which is fed into the <em>orders</em>&nbsp;Message Channel.</p></li>
</ol>
<p pid="12">The whole section that uses a Content-Based Router and several Message Translators is referred to as a Normalizer. This composite pattern has a unique graphic to depict it but was left out here in favor of its sub-patterns to make things clearer. </p>
<h2>Implementation Using Camel </h2>
<p pid="13">As mentioned before, Camel has a small core set of components included by default. The rest of the components exist as separate modules. In applications that require many types of connectivity, it is useful to figure out what Camel modules to include. Listing 1 shows the dependencies using Apache Maven for the Camel implementation of the Rider Auto Parts example. Of course, you don't need to use Apache Maven for dependencies - it is just the easiest way to rapidly add new dependencies to your applications. The list of dependencies includes support for core Camel, ActiveMQ, JAXB marshaling, CSV marshaling, and HTTP. To make the example easier to try out, I've opted to use the File endpoint instead of the FTP. If we were using the FTP endpoint, we would need to add a dependency on the camel-ftp module as well.<br /><br /><em>Listing 1: Maven dependencies for the Camel implementation</em></p>
<pre><code lang="application/xml">&lt;dependencies&gt;
    &lt;!-- Core Camel --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-core&lt;/artifactId&gt;
      &lt;version&gt;${camel-version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-spring&lt;/artifactId&gt;
      &lt;version&gt;${camel-version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- Embedded ActiveMQ broker --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
      &lt;artifactId&gt;activemq-core&lt;/artifactId&gt;
      &lt;version&gt;${activemq-version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.xbean&lt;/groupId&gt;
      &lt;artifactId&gt;xbean-spring&lt;/artifactId&gt;
      &lt;version&gt;${xbean-spring-version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- ActiveMQ connectivity for Camel --&gt;           
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
      &lt;artifactId&gt;activemq-camel&lt;/artifactId&gt;
      &lt;version&gt;${activemq-version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- Add support for JAXB marshaling --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-jaxb&lt;/artifactId&gt;
      &lt;version&gt;${camel-version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- Add support for CSV marshaling --&gt;   
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-bindy&lt;/artifactId&gt;
      &lt;version&gt;${camel-version}&lt;/version&gt;
    &lt;/dependency&gt;    

    &lt;!-- Add support for HTTP --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-jetty&lt;/artifactId&gt;
      &lt;version&gt;${camel-version}&lt;/version&gt;
    &lt;/dependency&gt;

  &lt;/dependencies&gt;</code></pre>
<p pid="14"> While it is perfectly legitimate to use Camel as a standalone Java application, it is often useful to embed it in a container. In this case, we will be loading Camel entirely from Spring. In fact, the entire solution (except for the domain POJO and Maven build script) fits neatly into a single Spring XML file. This is because we are implementing our routing rules using the Spring XML configuration rather than one of Camel’s other DSLs. There are pros and cons to each, of course, but in this case, I mainly wanted to show off some cool tooling that currently works with the XML based routing rules only. The Spring XML file is shown in Listing 2 below. <br /><br /><em>Listing 2: Complete Spring XML file that configures an embedded ActiveMQ broker and initializes a Camel Context with three routes.</em></p>
<pre><code lang="application/xml">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:amq=&quot;http://activemq.apache.org/schema/core&quot;
       xsi:schemaLocation=&quot;
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://activemq.apache.org/camel/schema/spring
       http://activemq.apache.org/camel/schema/spring/camel-spring.xsd
       http://activemq.apache.org/schema/core
       http://activemq.apache.org/schema/core/activemq-core.xsd&quot;&gt;

  &lt;amq:broker brokerName=&quot;localhost&quot; persistent=&quot;false&quot; useJmx=&quot;false&quot;/&gt;

  &lt;bean id=&quot;jms&quot; class=&quot;org.apache.activemq.camel.component.ActiveMQComponent&quot;&gt;
    &lt;property name=&quot;brokerURL&quot; value=&quot;vm://localhost&quot; /&gt;
  &lt;/bean&gt;

  &lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
    &lt;route id=&quot;FileToJMS&quot;&gt;
      &lt;from uri=&quot;file:target/placeorder&quot; /&gt;
      &lt;to uri=&quot;jms:incomingOrders&quot; /&gt;
    &lt;/route&gt;

    &lt;route id=&quot;HTTPtoJMS&quot;&gt;
      &lt;from uri=&quot;jetty:http://0.0.0.0:8888/placeorder&quot; /&gt;
      &lt;inOnly uri=&quot;jms:incomingOrders&quot; /&gt;
      &lt;transform&gt;
        &lt;constant&gt;OK&lt;/constant&gt;
      &lt;/transform&gt;
    &lt;/route&gt;

    &lt;route id=&quot;NormalizeMessageData&quot;&gt;
      &lt;from uri=&quot;jms:incomingOrders&quot; /&gt;
      &lt;convertBodyTo type=&quot;java.lang.String&quot; /&gt;
      &lt;choice&gt;
        &lt;when&gt;
          &lt;simple&gt;${body} contains '?xml'&lt;/simple&gt;
          &lt;unmarshal&gt;
            &lt;jaxb contextPath=&quot;org.fusesource.camel&quot; /&gt;
          &lt;/unmarshal&gt;
          &lt;to uri=&quot;jms:orders&quot; /&gt;
        &lt;/when&gt;
        &lt;otherwise&gt;
          &lt;unmarshal&gt;
            &lt;bindy packages=&quot;org.fusesource.camel&quot; type=&quot;Csv&quot; /&gt;
          &lt;/unmarshal&gt;
          &lt;to uri=&quot;jms:orders&quot; /&gt;
        &lt;/otherwise&gt;
      &lt;/choice&gt;     
    &lt;/route&gt;
  &lt;/camelContext&gt;
&lt;/beans&gt;</code></pre>
<p pid="15">In this file, we first start an embedded Apache ActiveMQ broker and connect Camel to it. Next comes the <em>camelContext</em> element where we define our routing rules. Looking back at Figure 3, we need to receive orders from an FTP (substituted with File in this example) and HTTP endpoint, formatted as shown in Listing 3. In the Spring XML configuration, we can specify these incoming endpoints with two <em>from</em> elements. The “FileToJMS” and “HTTPtoJMS” routes start off with these <em>from</em> elements. Both <em>from</em> elements are connected to a producer (<em>to</em> and <em>inOnly</em> elements) using the “<em>jms:incomingOrders&quot;</em> URI, which will send the messages to a queue named <em>incomingOrders</em> on the ActiveMQ broker.</p>
<p pid="16"><em>Listing 3: Incoming message formats; XML on the left, CSV on the right.</em></p>
<table class="MsoNormalTable">
 <tbody>
  <tr>
   <td><p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br /> &lt;order name=&quot;motor&quot; amount=&quot;1&quot;/&gt; </p></td>
   <td><p>&quot;name&quot;, &quot;amount&quot;<br /> &quot;brake pad&quot;, &quot;2&quot; </p></td>
  </tr>
 </tbody>
</table>
<p pid="17">In the case of the HTTP endpoint, there are a couple of extra things to mention. First off the HTTP client will be expecting a response from the application so we have to handle that. In Camel, we have full control over what the client gets back from the HTTP endpoint. Each response is determined by the last method in our current route definition. In our case, we use the transform method to set the response to the constant string &quot;OK&quot;. Since we handle the response ourselves, we don’t want any response to come from the JMS <em>incomingOrders </em>queue. To send to this queue in a fire-and-forget fashion we use the <em>inOnly</em> element rather than the <em>to</em> element.</p>
<p pid="18"> The “NormalizeMessageData” route in Listing 2 specifies the Normalizer, complete with Content-Based Router and two Message Translators. First, we specify that we want to consume messages from the <em>incomingOrders</em> queue on the ActiveMQ broker. The content-based routing of the messages is done with the <em>choice</em>, <em>when</em>, and <em>otherwise</em> elements. In our case, we want to send CSV messages to one Message Translator and XML messages to another. To check what type of message data format we have we use a <em>Simple</em> expression which checks the message body for the “&lt;?xml” start tag. <em>Simple</em> is an expression language built into Camel. Of course, this is demonstration code only. For production cases, you would want to add a more thorough checking of content types.</p>
<p pid="19"> To unmarshal the XML and CSV payloads into an <em>Order</em> object, we use Camel’s data formats. Listing 2 shows how these data formats are defined within the <em>unmarshal</em> elements. As shown in Listing 5, the <em>Order</em> object has JAXB and Camel Bindy annotations to describe the mapping to XML and CSV.</p>
<p pid="20"><em>Listing 5: The Order domain class with JAXB/Bindy annotations for easy mapping to and from XML/CSV.</em></p>
<pre><code lang="text/x-java">@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@CsvRecord(separator = &quot;,&quot;, skipFirstLine = true)
public class Order implements Serializable {
    @XmlAttribute
    @DataField(pos = 1)
    private String name;

    @XmlAttribute
    @DataField(pos = 2)
    private int amount;

   public Order() {
    }

    public Order(String name, int amount) {
        this.name = name;
        this.amount = amount;
    }
}</code></pre>
<p pid="21"> At this point, successfully normalized messages are sent to the <em>orders</em> queue for processing by some other application at the Rider Auto Parts business.</p>
<h2 pid="262" class="MsoBodyText">Implementation using Fuse IDE for Camel</h2>
<p pid="22">As we’ve seen, Apache Camel certainly makes it easy to create integrations. The DSLs in various languages are designed to be concise, powerful and easy to read – all with the goal of making you, the developer, more productive. With improving productivity in mind, FuseSource has created an IDE for Camel development called <em><a href="http://fusesource.com/ide" target="_blank">Fuse IDE for Camel</a></em>.</p>
<p pid="23">Fuse IDE is an Eclipse-based tool that allows you to drag and drop enterprise integration pattern (EIP) icons onto a canvas and connect them together to form routing rules. The backend of the IDE generates Camel routing rules in Spring XML for you so you don’t ever have to learn the specifics of Camel’s DSLs. Essentially, you can create a picture like Figure 3 and have Fuse IDE generate the Camel application for you.<br /><br /> Figure 4 shows what the Fuse IDE designer looks like when we loaded our example configuration from Listing 2.</p>
<p pid="24"><img alt="Image title" class="fr-fin fr-dib fr-image-move" src="http://java.dzone.com/sites/all/files/figure4_2.jpg" width="794" /></p>
<p pid="25" style="text-align: center;"><em>Figure 4: Spring XML file in Listing 2 loaded into Fuse IDE’s designer.</em></p>
<p pid="26">From the designer view, we can see the graphical representation of each of the routes we created in Spring XML beforehand. From this point, we can change how the EIP icons are connected, endpoint URI properties, add additional steps to the routes, and so on. Also, as of version 1.0, Fuse IDE will support <strong>all</strong> EIPs and components available in Apache Camel — so there is no waiting for version 2.0 to use your favorite Camel features.</p>
<p pid="27">In this article, we started first by creating the Spring XML configuration by hand. This should not mislead you, however, there is no requirement to do this. In fact, since Fuse IDE supports 1-to-1 round-tripping between Camel Spring XML configuration and the designer view, you can use whichever you prefer.&nbsp;</p>
<p pid="30">When you have finished constructing your routes, you can then take advantage of another neat feature included in Fuse IDE: that is the ability to generate a JUnit test case from any Camel Spring XML file. Once you are satisfied with your testing, you can then debug in a local Spring container or deploy to your container of choice — all from within the IDE. Of course, much more is planned for Fuse IDE in the future, so Camel development will only get easier.</p>
<h2 pid="276" class="MsoBodyText">Summary</h2>
<p pid="31">In this article, I've shown two common problems that an integration developer may face: dealing with the specifics of applications and transports and coming up with good solutions to integration problems. The Apache Camel project provides a nice answer to both of these problems. As the example has shown, solving integration problems with Camel is straight forward and results in very concise route definitions. Building on that, we saw how Fuse IDE for Camel makes Camel development even easier.</p>
<h3>Links</h3>
<ol>
 <li>Apache Camel – <a href="http://camel.apache.org/" target="_blank">http://camel.apache.org</a></li>
 <li>2FuseSource distribution of Apache Camel – <a href="http://fusesource.com/products/enterprise-camel" target="_blank">http://fusesource.com/products/enterprise-camel</a></li>
 <li>Fuse IDE for Camel -&nbsp;<a href="https://tools.jboss.org/features/fusetools.html" target="_blank">https://tools.jboss.org/features/fusetools.html</a></li>
 <li>Camel in Action book - <a href="http://affiliate.manning.com/idevaffiliate.php?id=1152_215" target="_blank">http://www.manning.com/ibsen</a></li>
 <li>Jon’s Blog – <a href="http://janstey.blogspot.com/" target="_blank">http://janstey.blogspot.com</a></li>
 <li>Article source code - <a href="http://repo.fusesource.com/maven2/org/fusesource/examples/rider-auto-spring/2.0/rider-auto-spring-2.0.zip" target="_blank">http://repo.fusesource.com/maven2/org/fusesource/examples/rider-auto-spring/2.0/rider-auto-spring-2.0.zip</a></li>
</ol>
<p pid="32"><em>Originally published on 7/1/15</em></p></div>
                </div>

                  <div id="bottom-bumper-container"></div>
                  <div class="article-tag-pill-container">
                      <span class="article-tag-pill">Integrated development environment</span>
                      <span class="article-tag-pill">Apache Camel</span>
                      <span class="article-tag-pill">Enterprise integration</span>
                      <span class="article-tag-pill">Open source</span>
                      <span class="article-tag-pill">application</span>
                      <span class="article-tag-pill">Spring Framework</span>
                      <span class="article-tag-pill">XML</span>
                      <span class="article-tag-pill">Listing (computer)</span>
                      <span class="article-tag-pill">File system</span>
                      <span class="article-tag-pill">Apache Maven</span>
                  </div>

                  <div class="attribution">
                    <p>Opinions expressed by DZone contributors are their own.</p>
                  </div>

                    <div class="related">
                      <h3>Popular on DZone</h3>
                        <ul>
                            <li class="relateddiv">
                              <a href="/articles/refactoring-java-application-object-oriented-and-f?fromrel=true">Refactoring Java Application: Object-Oriented And Functional Approaches</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/the-engineers-guide-to-creating-a-technical-debt-p?fromrel=true">The Engineer’s Guide to Creating a Technical Debt Proposal</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/why-performance-projects-fail?fromrel=true">Why Performance Projects Fail</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/take-control-of-your-application-security?fromrel=true">Take Control of Your Application Security</a>
                            </li>
                        </ul>
                      </div>
<div class="comments-overlay"></div>
<div id="comment-box">
  <div class="comment-box-wrapper">
    <div id="comment-input-editor"></div>
  </div>
  <div class="info hidden"></div>
  <div class="comments-content">
    <div class="comment-header">
      <hr />
      <span class="icon-comment">
        <span class="numOfComments"></span> Comments
      </span>
    </div>
    <div class="comments"></div>
  </div>
</div>
            </article>
          </div>

            <div id="above-pr-ad" class="bottom-ad-container">
              <div id="div-gpt-ad-1435246566686-11" data-gpt-slot="bottom"></div>
            </div>
            <div class="layout-card widget-top-border partner-resources-block" style="width:100%; margin-bottom: 1em;">
              <div class="main-container">
                <div class="featured-header">
                  <h2>
                      Integration<span> Partner Resources</span>
                  </h2>
                </div>
                <div class="partner-resources-container">
                  <div id="div-gpt-ad-1435246566686-5" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr1"></div>
                  <div id="div-gpt-ad-1435246566686-6" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr2"></div>
                  <div id="div-gpt-ad-1435246566686-7" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr3"></div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>

    <div id="bsa-parent" class="bottom-sticky-ad-container hide">
      <div class="container">
        <div class="col-md-9">
          <div class="fixed-bottom-div">
            <div class="inline-block">
              <div id="div-gpt-ad-1635294790718-12" data-gpt-desktop="true" class="bottom-sticky-ad"></div>
            </div>
            <div class="inline-block">
              <span id="close" class="bottom-sticky-ad-close-button" onclick="removeBottomStickyAd()">
                X
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

  <div class="modal fade bd-example-modal-lg" id="modal-message" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"></div>
        <div class="modal-body"></div>
      </div>
    </div>
  </div>
</div>

<script async>const articleTitle = 'Open Source Integration With Apache Camel and How Fuse IDE Can Help'
const articleUrl = 'https://dzone.com/articles/open-source-integration-apache'

const retweetLink = document.querySelector('#tweet-link')

function retweet(event) {
    event.preventDefault()
    event.stopPropagation()

    const twitter = 'https://twitter.com/intent/tweet'
    const params = '?text=' + encodeURIComponent(articleTitle) + '&url=' + articleUrl + '&ref=dzone.com&via=DZoneInc'
    const win = window.open(twitter + params, '_blank')
    win.focus()
}

retweetLink.addEventListener('click', retweet);

function showStatusMessage(options) {
  var modal = document.getElementById("modal-message");

  if(modal) {
    modal.classList.add(options.type);
    var modalBody = modal.querySelector(".modal-content .modal-body");
    var modalHeader = modal.querySelector(".modal-content .modal-header");

    modalHeader.innerText = options.header ? options.header : "";
    modalBody.innerText = options.body ? options.body : "" ;

    $(modal).modal("show");

    $(modal).on('hidden.bs.modal', function () {
      modal.classList.remove(options.type);
    });
  }
}

function showConfirmMessage(options) {
  var modal = document.getElementById("modal-message");

  if(modal) {
    modal.classList.add(options.type);
    var modalBody = modal.querySelector(".modal-content .modal-body");
    var modalHeader = modal.querySelector(".modal-content .modal-header");

    modalHeader.innerText = options.header ? options.header : "";
    modalBody.innerText = options.body ? options.body : "" ;

    if (options.textarea) {
      const textareaDiv = document.createElement('div')
      const textareaLabel = document.createElement('label')
      textareaLabel.setAttribute('for', 'modal-textarea')
      textareaLabel.innerText = options.textarea.label

      const textarea = document.createElement('textarea')
      textarea.id = 'modal-textarea'
      textarea.placeholder = (options.textarea.placeholder || '')
      textarea.setAttribute('rows', (options.textarea.rows || 3))
      textarea.classList.add('form-control', 'not-resizable')

      if (options.textarea.maxlength) {
        textarea.maxLength = options.textarea.maxlength
      }

      textareaDiv.appendChild(textareaLabel)
      textareaDiv.appendChild(textarea)
      modalBody.appendChild(textareaDiv)
    }

    var btnContainer = document.createElement("div");
    btnContainer.classList.add("btn-container");

    var noBtn = document.createElement("button");
    noBtn.innerText = options.noBtnText ? options.noBtnText : "No";
    noBtn.classList.add("no-btn");

    var yesBtn = document.createElement("button");
    yesBtn.innerText = options.yesBtnText ? options.yesBtnText : "Yes";
    yesBtn.classList.add("yes-btn");

    btnContainer.appendChild(noBtn);
    btnContainer.appendChild(yesBtn);

    modalBody.appendChild(btnContainer);

    $(modal).modal("show");

    $(noBtn).one("click", function() {
      $(modal).modal("hide");

      if(options.noCallback) {
        $(modal).one('hidden.bs.modal', function () {
          options.noCallback();
        });
      }
    });

    $(yesBtn).one("click", function() {
      $(modal).modal("hide");

      if(options.yesCallback) {
        $(modal).one('hidden.bs.modal', function () {
          options.yesCallback();
        });
      }
    });

    $(modal).on('hidden.bs.modal', function () {
      modal.classList.remove(options.type);
    });
  }
}
</script><link rel="stylesheet" media="all" href="https://dz2cdn1.dzone.com/themes/dz20/ftl/footer/styles.css">

<div id="ftl-footer">
  <div class="container-fluid footerOuter">
    <div class="row">
      <div class="col-md-12">
        <div class="container">
          <div class="row footer">
            <div class="col-md-12 footerWidget">
              <div class="row footerContainer footer">
                <div class="left col-xs-12 col-sm-7">
                  <div class="col-xs-12 social-media-icons footer-mobile">
                    <ul class="icons-only">
                      <li class="rss-icon" id="rss-footer-1">
                        <a href="/pages/feeds" target="_blank" rel="noreferrer noopener">
                          <i class="icon-rss-1"></i>
                        </a>
                      </li>
                      <li class="twitter-icon">
                        <a href="https://twitter.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-twitter"></i>
                        </a>
                      </li>
                      <li class="facebook-icon">
                        <a href="https://www.facebook.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-facebook-1"></i>
                        </a>
                      </li>
                      <li class="linkedin-icon">
                        <a href="https://www.linkedin.com/company/dzone/" target="_blank"
                           rel="noreferrer noopener">
                          <i class="icon-linkedin-1"></i>
                        </a>
                      </li>
                    </ul>
                  </div>

                  <div class="top-section col-xs-12">
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">ABOUT US</p>
                      <ul class="link-group">
                        <li><a href="/pages/about" rel="noreferrer noopener">About DZone</a></li>
                        <li><a href="mailto:support@dzone.com" rel="noreferrer noopener">Send feedback</a></li>
                        <li><a href="https://careers.dzone.com/" target="_blank" rel="noreferrer noopener">Careers</a></li>
                          <li><a href="/sitemap" rel="noreferrer noopener">Sitemap</a></li>
                      </ul>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">ADVERTISE</p>
                      <ul class="link-group">
                        <li><a href="https://advertise.dzone.com" target="_blank" rel="noreferrer noopener">Advertise with DZone</a></li>
                      </ul>
                    </div>
                  </div>

                  <div class="bottom-section col-xs-12">
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">CONTRIBUTE ON DZONE</p>
                      <ul class="bottom-top-list link-group">
                        <li><a href="/articles/dzones-article-submission-guidelines">Article Submission Guidelines</a></li>
                        <li><a href="/pages/mvb" rel="noreferrer noopener">MVB Program</a></li>
                        <li><a href="/pages/contribute" rel="noreferrer noopener">Become a Contributor</a></li>
                        <li><a href="/writers-zone" rel="noreferrer noopener">Visit the Writers' Zone</a></li>
                      </ul>

                      <p class="section-header">LEGAL</p>
                      <ul class="link-group">
                        <li><a href="/pages/tos" rel="noreferrer noopener">Terms of Service</a></li>
                        <li><a href="/pages/privacy" rel="noreferrer noopener">Privacy Policy</a></li>
                      </ul>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">CONTACT US</p>
                      <ul class="link-group">
                        <li>600 Park Offices Drive</li>
                        <li>Suite 300</li>
                        <li>Durham, NC 27709</li>
                        <li><a href="mailto:support@dzone.com" rel="noreferrer noopener">support@dzone.com</a></li>
                        <li><a href="tel:+19196780300" rel="noreferrer noopener">+1 (919) 678-0300</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="right col-xs-12 col-sm-5">

                  <p class="connect-text">Let's be friends:</p>
                  <div class="col-xs-12 social-media-icons footer-wide">
                    <ul class="icons-only">
                      <li class="rss-icon" id="rss-footer-1">
                        <a href="/pages/feeds" target="_blank" rel="noreferrer noopener">
                          <i class="icon-rss-1"></i>
                        </a>
                      </li>
                      <li class="twitter-icon">
                        <a href="https://twitter.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-twitter"></i>
                        </a>
                      </li>
                      <li class="facebook-icon">
                        <a href="https://www.facebook.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-facebook-1"></i>
                        </a>
                      </li>
                      <li class="linkedin-icon">
                        <a href="https://www.linkedin.com/company/dzone/" target="_blank"
                           rel="noreferrer noopener">
                          <i class="icon-linkedin-1"></i>
                        </a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-xs-12 powered-by">
                    <p>DZone.com is powered by&nbsp;</p>
                    <a href="https://devada.com/answerhub/" rel="noreferrer noopener">
                      <img src=""
                           data-src="https://dz2cdn1.dzone.com/themes/dz20/images/answerhub_logo_white_footer.png"
                           width="150"
                           height="56"
                           class="lazyload"
                           alt="AnswerHub logo">
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

  <script async>
      (function(w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
          var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j,f);
      })(window, document, 'script', 'dataLayer', 'GTM-K25QL22');
  </script>

  <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-410289-1', 'auto');
      ga('require', 'linkid', 'linkid.js');
      ga('require', 'GTM-TSD9TZP');
      ga('set', 'siteSpeedSampleRate', 25);
  </script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>
  <script async>const analytics = {
    'dimension1': 'integration',
    'dimension2': 'article/tutorial',
    'dimension3': '2019-08-14',
    'dimension4': '0',
    'dimension5': '',
    'dimension7': 'Integrated development environment, Apache Camel, Enterprise integration, Open source, application, Spring Framework, XML, listing, File system, Apache Maven',
    'dimension8': 'janstey',
    'dimension9': 'undefined',
    'dimension10': 'Progress Software'
}

if (window.ga) {
    Object.keys(analytics).forEach(function(key) {
        window.ga('set', key, analytics[key])
    })

    window.ga('send', 'pageview')
}</script>

  <script>
      !function (e, o, n, i) {
          if (!e) {
              e = e || {}, window.permutive = e, e.q = [];
              var t = function () {
                  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (e) {
                      return (e ^ (window.crypto || window.msCrypto).getRandomValues(new Uint8Array(1))[0] & 15 >> e / 4).toString(16)
                  })
              };
              e.config = i || {}, e.config.apiKey = o, e.config.workspaceId = n, e.config.environment = e.config.environment || "production", (window.crypto || window.msCrypto) && (e.config.viewId = t());
              for (var g = ["addon", "identify", "track", "trigger", "query", "segment", "segments", "ready", "on", "once", "user", "consent"], r = 0; r < g.length; r++) {
                  var w = g[r];
                  e[w] = function (o) {
                      return function () {
                          var n = Array.prototype.slice.call(arguments, 0);
                          e.q.push({
                              functionName: o,
                              arguments: n
                          })
                      }
                  }(w)
              }
          }
      }(window.permutive, "bca90777-e088-4f2a-96c2-13ad18deeccc", "18ad0c5b-460c-4d19-a729-dc537805538f", {});
      window.googletag = window.googletag || {}, window.googletag.cmd = window.googletag.cmd || [], window.googletag.cmd.push(function () {
          if (0 === window.googletag.pubads().getTargeting("permutive").length) {
              var e = window.localStorage.getItem("_pdfps");
              window.googletag.pubads().setTargeting("permutive", e ? JSON.parse(e) : []);
              var o = window.localStorage.getItem("permutive-id");
              o && (window.googletag.pubads().setTargeting("puid", o), window.googletag.pubads().setTargeting("ptime", Date.now().toString())), window.permutive.config.viewId && window.googletag.pubads().setTargeting("prmtvvid", window.permutive.config.viewId), window.permutive.config.workspaceId && window.googletag.pubads().setTargeting("prmtvwid", window.permutive.config.workspaceId)
          }
      });


      permutive.addon('web', {
          'page': {
              'category': 'Integration',
              'node': {
                  'authorCompany': 'Progress Software',
                  'authors': [384134, ],
                  'publishDate': new Date(1565740800000),
                  'sponsorAuthor': false,
                  'tags': ['Integrated development environment', 'Apache Camel', 'Enterprise integration', 'Open source', 'application', 'Spring Framework', 'XML', 'listing', 'File system', 'Apache Maven', ],
                  'title': 'Open Source Integration With Apache Camel and How Fuse IDE Can Help',
                  'type': 'article',
              },
              'section': 'article',
          }
      });
  </script>
  <script async src="https://18ad0c5b-460c-4d19-a729-dc537805538f.edge.permutive.app/18ad0c5b-460c-4d19-a729-dc537805538f-web.js"></script>

  <script>
      const csrf = '-8067759697794860379'
      const articleId = 475785
      const likes = 35
      const assetDomain = 'https://dz2cdn1.dzone.com'
      const codemirrorVars = {
          modeURI: 'https://dz2cdn1.dzone.com/themes/dz20/lib/codemirror/mode/',
          requiredScripts: [
              'https://dz2cdn1.dzone.com/themes/dz20/lib/codemirror/lib/codemirror.js',
              'https://dz2cdn1.dzone.com/themes/dz20/lib/codemirror/mode/meta.js'
          ]
      }

      const gptTags = {
          'zone': 'integration',
          'topicTag': 'Integrated development environment,Apache Camel,Enterprise integration,Open source,application,Spring Framework,XML,listing,File system,Apache Maven',
          'company': '',
          'siteSection': 'Zones',
          'articleCategory': 'tutorial',
          'nodeID': '475785',
          'authorID': '384134',
          'publishYear': '2019',
          'publishMonth': '08',
          'jobRole': '',
          'companySize': ''
      }

      const minCommentChar = 10;
      const peer39Enabled = true;
  </script>

  <script src="https://dz2cdn1.dzone.com/themes/dz20/lib/static/jquery/jquery.min.js"></script>
  <script async src="https://dz2cdn1.dzone.com/themes/dz20/lib/static/bootstrap/bootstrap.min.js"></script>
  <script async src="https://dz2cdn1.dzone.com/themes/dz20/ftl/article/ads.js"></script>



  <script>
      function loadScript(src) {
          return new Promise(function (resolve, reject) {
              const s = document.createElement('script')
              s.src = src
              s.onload = resolve
              s.onerror = reject
              document.head.appendChild(s)
          })
      }

      function loadStyle(href) {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = href
          document.head.appendChild(link)
      }

      function loadScriptsSync(deferred) {
          var p = Promise.resolve()
          for (var i = 0; i < deferred.length; i++) {
              let script = deferred[i]
              p = p.then(function() {
                  return loadScript(script)
              })
          }
          return p
      }

      function loadStyles() {
          const deferred = [
              'https://dz2cdn1.dzone.com/themes/dz20/lib/codemirror/lib/codemirror.css',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/comments/styles.css',
              'https://dz2cdn1.dzone.com/themes/dz20/lib/froala3/css/froala_editor.pkgd.min.css',
              'https://dz2cdn1.dzone.com/themes/dz20/lib/froala3/css/themes/gray.min.css',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/article/mini-profile.css'
          ]

          for (var i = 0; i < deferred.length; i++) {
              loadStyle(deferred[i])
          }
      }

      window.addEventListener('load', function(event) {
          loadStyles()
          loadScriptsSync([
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/header/auth-status.js',
              'https://dz2cdn1.dzone.com/themes/dz20/lib/lazysizes.min.js',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/article/codeblocks.js',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/article/activity-bar.js',
              'https://dz2cdn1.dzone.com/themes/dz20/lib/froala3/js/froala_editor.pkgd.min.js',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/froala/content.js',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/comments/content.js',
              'https://dz2cdn1.dzone.com/themes/dz20/ftl/article/content.js'
          ])
      })
  </script>
</body>
</html>