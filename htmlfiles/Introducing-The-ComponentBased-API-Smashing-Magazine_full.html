<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Introducing The Component-Based API — Smashing Magazine</title><link rel=preconnect href=https://cloud.netlifyusercontent.com><link rel=preconnect href=https://smashingcomments.netlify.app crossorigin><link rel=preconnect href=https://res.cloudinary.com><link rel=preconnect href=https://www.google-analytics.com/><link rel=preconnect href=https://storage.googleapis.com><style>@font-face{font-family:Elena;src:url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2)format("woff2"),url(/fonts/ElenaWebRegular/ElenaWebRegular.woff)format("woff")}@font-face{font-family:Elena;src:url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2)format("woff2"),url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic.woff)format("woff");font-style:italic}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2)format("woff2"),url(/fonts/ElenaWebBold/ElenaWebBold.woff)format("woff");font-weight:700}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic-subset.woff2)format("woff2"),url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic.woff)format("woff");font-weight:700;font-style:italic}@font-face{font-family:Mija;src:url(/fonts/MijaRegular/Mija_Regular-webfont-subset.woff2)format("woff2"),url(/fonts/MijaRegular/Mija_Regular-webfont.woff)format("woff")}@font-face{font-family:Mija;src:url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2)format("woff2"),url(/fonts/MijaBold/Mija_Bold-webfont.woff)format("woff");font-weight:700}</style><script>var fontsInServiceWorker=sessionStorage.foutFontsStage1Loaded&&sessionStorage.foutFontsStage2Loaded||'serviceWorker'in navigator&&navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.state==='activated',docEl;if(!fontsInServiceWorker&&'fonts'in document){function fetchFonts(a){return Promise.all(a.map(function(a){return document.fonts.load(a)}))}sessionStorage.foutFontsStage2Loaded?document.documentElement.className+=" wf-loaded-stage2":sessionStorage.foutFontsStage1Loaded=!0}if("fonts"in document&&!("connection"in navigator&&navigator.connection.saveData)){let a=new FontFace("Elena","url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format('woff2')"),b=new FontFace("Elena","url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format('woff2')",{weight:"700"}),c=new FontFace("Elena","url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format('woff2')",{style:"italic"}),d=new FontFace("Mija","url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format('woff2')",{weight:"700"}),e=Promise.all([a.load(),b.load(),d.load(),c.load()]).then(a=>{a.forEach(a=>document.fonts.add(a)),document.documentElement.classList.add('wf-loaded-stage2'),sessionStorage.foutFontsStage2Loaded=!0}).catch(a=>{throw new Error(`Error caught: ${a}`)})}(sessionStorage.foutFontsStage1Loaded&&sessionStorage.foutFontsStage2Loaded||'serviceWorker'in navigator&&navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.state==='activated')&&(docEl=document.documentElement,docEl.classList.add('wf-loaded-stage2')),!1 in document&&'addEventListener'in window&&'getComputedStyle'in window&&(window.document.documentElement.className+=' no-js'),window.document.documentElement.className+=' enhanced js'</script><style>@charset "UTF-8";@media(prefers-color-scheme:dark){:root{--article-background-color:linear-gradient(-45deg, #162c35 70%, #0c252f 100%)}}*,::after,::before{box-sizing:border-box}html{font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;overflow-y:scroll}body{margin:0;display:flex;flex-direction:column;background-color:#fff;font-feature-settings:"onum" 1;color:#333;overflow:hidden;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:-apple-system,BlinkMacSystemFont,Roboto,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif;font-size:1.125em}body,html{min-height:100%;overflow-x:hidden}img{max-width:100%;position:relative;border-style:none}article,aside,figcaption,figure,footer,header,main,nav,section{display:block}:focus{outline:3px dotted var(--THEME_COLOR_HOVER,#d33a2c)!important;outline-offset:2px}article,figure,header,main,nav,section{display:block}@media(prefers-reduced-data:reduce){.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 body,.wf-loaded-stage2 h1,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 tbody td,.wf-loaded-stage2 th,.wf-loaded-stage2 time{font-family:-apple-system,BlinkMacSystemFont,Roboto,roboto slab,droid serif,segoe ui,system-ui,Arial,sans-serif!important}}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 h1,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 th{font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto,roboto slab,droid serif,segoe ui,system-ui,Arial,sans-serif}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 body,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 tbody td,.wf-loaded-stage2 time{font-family:Elena,-apple-system,BlinkMacSystemFont,Roboto,roboto slab,droid serif,segoe ui,system-ui,Arial,sans-serif}@media all and (max-width:750px){.c-garfield-the-cat{display:flex;flex-direction:column}.c-garfield-the-cat>*{margin-bottom:0}.article__image,.c-garfield-the-cat>figure{margin:1em auto .25em}.c-garfield-aside--meta{margin-bottom:1em}.c-garfield-the-cat>pre{margin-top:1em}.c-garfield-the-cat .code-toolbar{margin-top:1em}.c-garfield-the-cat .code-toolbar>pre{margin-top:0}.c-garfield-the-cat>pre{margin-bottom:.5rem}.c-garfield-the-cat>table{margin-top:1em;margin-bottom:1em}.c-garfield-the-cat .pull-quote__quotation{margin-top:1em}.drop-caps{display:none}}.js-show-secondary .menu-text--sm,.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}.js-show-secondary .menu-text--sm--close{display:block}@media all and (min-width:800px){.js-show-secondary .main-nav__secondary{display:block;top:50px}.js-show-secondary .menu-text--lg--close,.menu-text--lg{display:block}.js-show-secondary .menu-text--lg,.js-show-secondary .menu-text--sm--close,.menu-text--sm{display:none}}.js-show-secondary .main-nav-more-item__button:before{content:"";display:block;margin-left:.35em;width:45px;height:30px;background-position:50%;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50.21 35.05'%3E%3Cellipse cx='27.8' cy='32.92' fill='rgba(60,60,60,0.5)' rx='19.64' ry='1.2'/%3E%3Cpath fill='%23fff' d='M46.48 15.53a5.2 5.2 0 00-2-.31 7 7 0 00-1.43.19 7.66 7.66 0 001.19-1.52 7.12 7.12 0 011.12-.13 5.18 5.18 0 012 .31h.05a2.82 2.82 0 011.44 1.24 2.75 2.75 0 01.18 2 2.36 2.36 0 00-.74-.46 2 2 0 01.86 1c.11.45-.23 1-.67.92a1.86 1.86 0 00-.22-1 2.65 2.65 0 00-.29-1 2.74 2.74 0 00-1.49-1.24zM16.56 28.07c.06-.21.37-1.29.19-1.47 0 0 5.18 5.08 7.22-2.7a6 6 0 001.16.62c-.75 7-6.44 3.43-6.44 3.43.22.13.14 1.25.12 1.47-.16 2.2-3 1.63-3.74.11a2.44 2.44 0 01-.14-.34 1.4 1.4 0 001.63-1.12z' class='cls-2'/%3E%3Cpath fill='%23fff' d='M1.26 14.52c.08.23.18.45.28.67v.05c1.26 2.67 3.76 5 6.81 4.61a12 12 0 003.51-1.05 8.6 8.6 0 013.64-1 7.28 7.28 0 00.1 2.65A9.82 9.82 0 0117 18.5s-.77 2.34-.41 3a1 1 0 00-.15-.18 1.28 1.28 0 00-.8-.4 1 1 0 00-.89.7c-.23.45-.24.83-.63 1.17-1 .87-2.17 2-1.79 3.47a2.64 2.64 0 002.06 1.82A1.39 1.39 0 0016 27c.06-.21.36-1.28.18-1.46 0 0 5.19 5.07 7.23-2.7a5.65 5.65 0 001.16.61c1.43.56 3.94.91 6.11-2.07a20.36 20.36 0 005.68 1.13s-1.55-.55-1.61-1.28c0 0 3.84 1 6 0l-2.43-.32a3.69 3.69 0 001.68-.42 5.24 5.24 0 012.46 0c.73.08 1.06-.31 1.54-.78a1.17 1.17 0 00.09.33 2.06 2.06 0 00.12.35 3.21 3.21 0 00.37.65 1.35 1.35 0 001.27.53.92.92 0 00.53-.28 1.2 1.2 0 00.19-1.16 2 2 0 00-.77-.94 1.85 1.85 0 011 1.76c.44.08.78-.48.67-.93a1.13 1.13 0 00-.13-.32 2.4 2.4 0 00-.72-.7 2.26 2.26 0 01.74.45 2.67 2.67 0 00.1-.64v-.3a2.59 2.59 0 00-.28-1A2.65 2.65 0 0046 16.32l-.14-.06-.08-.05h-.06a10.1 10.1 0 00-3.9-.54 6.3 6.3 0 001.59-2.45 3 3 0 01-.12.73s1.61-.69.71-2.95a1 1 0 01.63.49 4.17 4.17 0 00-1.74-2.81 2.35 2.35 0 01.88.17 3.64 3.64 0 00-1.72-1.34l-.27-2.21.88.31s0-.35-.89-.86a7.17 7.17 0 00.36-3.37C39.32 1 38.27 2.48 38 2.94a12.73 12.73 0 00-2.56.26 2.83 2.83 0 011.29-.62 3.87 3.87 0 00-3.23.94s-2.73-2-5.37-1.29c0 0-.27 1.36 1.42 4.77a6.37 6.37 0 00-2.31 2.67 7.38 7.38 0 011.63-1.59s-2.44 2.6-1.46 4.67a3.77 3.77 0 01.35-1.55c0 .4-.24 3.2 1 4.61a9.92 9.92 0 01-.32-2s.37 2.53 3.84 3.6a4.35 4.35 0 01-1.49-1.54 11.65 11.65 0 002.47 1.23c-.61.18-1 .31-1 .31l-.81.38a6.56 6.56 0 01-2.34-1.49h-.07a.58.58 0 01-.31.08.64.64 0 01-.46-.21 5.47 5.47 0 01-1.14-2.91.66.66 0 01-.33-.31 3.48 3.48 0 01-.19-2.24 6.84 6.84 0 00-6.5-.26 18.29 18.29 0 012.43.43s-4.84.26-7.22 3.71c0 0 1.93-2 2.77-1.7a8.44 8.44 0 00-2.1 3A9.13 9.13 0 0012 16c-3.7.78-5.2-1.7-5.79-3.65 0-.13-.08-.25-.11-.37a.14.14 0 000-.07v-.16a.14.14 0 010-.06q-.1-.24-.1-.47v-.05a.68.68 0 000-.14 2.4 2.4 0 010-.24v-.09a.09.09 0 000-.05v-.08a.28.28 0 010-.09v-.12c-.09-2-1.43-2.88-3-1.92C.82 9.6.44 12.35 1.26 14.52zm26.58-3.41v.05z' class='cls-2'/%3E%3C/svg%3E");order:1}.js-show-secondary .main-nav-more-item__button:after{width:15px;height:15px;order:2;background-image:url(/images/icons/close.svg)}.js-show-secondary .main-nav__secondary{display:flex}strong{font-weight:bolder;letter-spacing:0}svg:not(:root){overflow:hidden}button{text-transform:none;cursor:pointer;font:inherit;margin:0}[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}.l-author-bio{display:flex;flex-wrap:wrap;align-items:center}.l-author-bio-content{flex-grow:1;flex-shrink:1;flex-basis:300px}.bio-image__large .bio-image{--bio-image-border-width:8px}.bio-image{padding:0;margin:0;display:block;width:100%;height:100%;border-radius:inherit;position:relative}.bio-image::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100%;background-repeat:no-repeat;top:89%;left:-30%;right:0;transform-origin:30% 50%;opacity:1;transition:opacity .3s ease-in-out}.bio-image:hover::before{opacity:0}a.bio-image-link{background:0 0;text-shadow:none;color:inherit;padding:0;display:block;border-radius:inherit;width:100%;height:100%}a.bio-image-link::before{display:block;content:'';height:120%;width:120%;position:absolute;top:-10%;left:-12%}.bio-image-wrapper{background:var(--bio-image-background-color,var(--bio-image-border-color,#d33a2c));border:solid var(--bio-image-border-width,8px)var(--bio-image-border-color,#d33a2c);border-radius:inherit;transform:scale(.84)translateX(15%)rotateZ(calc(-1 * (11 * 1deg)));transform-origin:0 100%;overflow:hidden;width:100%;height:100%;transition:transform .2s ease-out}.bio-image-image{width:100%;height:100%;object-fit:cover;display:block;transform:scale(1.2)rotateZ(calc(11 * 1deg));transition:transform .2s ease-out}.bio-image-link:active .bio-image-wrapper,.bio-image-link:focus .bio-image-wrapper,.bio-image:hover .bio-image-wrapper{transform:scale(.84)translateX(15%)rotateZ(0)}.bio-image-link:active .bio-image-image,.bio-image-link:focus .bio-image-image,.bio-image:hover .bio-image-image{transform:scale(1.2)rotateZ(0)}.article__content .author-post__author-title{color:#d33a2c;text-decoration-line:underline;font-weight:700;font-size:.9em}.light-grey{color:#767676!important}.rounded-3xl{border-radius:1.2em}.block{display:block}.h-48{height:12rem}.mr-3{margin-right:.75rem}.mb-5{margin-bottom:1.25rem}@media all and (max-width:600px){.mobw-40{width:8rem!important}.mobh-40{height:8rem!important}}.w-48{width:12rem}.mt-2{margin-top:.5rem}.mtn{margin-top:0!important}.mbn{margin-bottom:0!important}small{font-size:80%}.row{box-sizing:border-box;display:flex;flex:initial;flex-direction:row;flex-wrap:wrap;margin-right:-1rem;margin-left:-1rem}[class*=col-]{box-sizing:border-box;flex:none;padding-right:1rem;padding-left:1rem}.row::after{clear:both}.col-12{flex-basis:100%;max-width:100%}@media screen and (min-width:48em){.col-12{flex-basis:100%;max-width:100%}}.container{width:calc(100% - .5em);max-width:1440px;margin:0 auto;z-index:1;position:relative}.container::after{content:"";display:table;clear:both}@media(min-width:40em){.container{width:92vw!important}}@media(min-width:48em){.container{width:85vw}}@media(min-width:64em){.container{width:68rem}}@media(min-width:75em){.container{width:79rem}}@media screen and (min-width:160em){.container{max-width:1650px}}@media(min-width:187.5em){.container{max-width:1860px}}.c-garfield-the-cat>p:first-of-type{font-size:1.1em;line-height:1.55em}.c-garfield-the-cat>p:empty{display:none}.c-felix-the-cat{background-color:#f3f3f3;border-left:11px solid #e6e4e1;padding:1em 1em 1em 1.5em;color:#424242;margin-left:0;margin-top:1em;font-size:1.05em;line-height:1.6em;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0 0,#fff 100%)}.c-felix-the-cat h4{margin-top:.5em}.sponsor-panel{display:flex;justify-content:center;align-items:center}.sponsor-panel-content{flex:3}.sponsor-panel-image{display:none}@media screen and (min-width:1100px){.sponsor-panel-image{display:block;background-image:none;margin-left:1.5em;flex:1}}@media(max-width:1024px){.col{width:100%!important;padding:0 1em}.row{margin-left:0;margin-right:0}.article__content{float:none}.article__content::before{display:none}}#main{position:relative;z-index:0;background-color:#fff}@supports(display:grid){.main-nav{display:grid;align-items:center}}.main-nav{position:relative;display:block;min-width:0;color:#fff;grid-column:span 2;font-size:1.05em}.main-nav__primary .nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav__secondary .nav-item--active{background-color:transparent;margin:0}.c-garfield-the-cat figcaption a{color:#666;text-decoration-line:underline;text-decoration-color:#666}.c-garfield-the-cat figcaption a.btn{color:#fff;text-decoration:none}@media all and (min-width:1100px){@supports(grid-row-gap:0){.c-garfield-the-cat{display:grid;grid-template-columns:0 minmax(0,.5fr)repeat(10,minmax(0,1fr)).7fr .3fr 17rem;margin:0 auto}.c-garfield-the-cat ol,.c-garfield-the-cat ul,.c-garfield-the-cat>div,.c-garfield-the-cat>p,.c-garfield-the-cat>table{margin-bottom:1.4em}.c-garfield-the-cat>h2{margin-top:1.5em;margin-bottom:1em}.c-garfield-the-cat>h3,.c-garfield-the-cat>h4{margin-top:1.5em;margin-bottom:.65em}.c-garfield-the-cat>h5{margin-top:.65em;margin-bottom:.65em}.article__image,.c-garfield-the-cat>figure{margin:0 auto 1.4em;width:100%}.c-garfield-the-cat .code-toolbar pre,.c-garfield-the-cat blockquote,.c-garfield-the-cat pre,.c-garfield-the-cat>figure.video-embed-container{margin-bottom:1.7em;margin-top:.3em}.c-garfield-the-cat .code-toolbar{margin-bottom:0}.c-garfield-the-cat>*{grid-column:3/13;margin-top:0;margin-bottom:0}.c-garfield-the-cat .c-garfield-bio{grid-column:1/2;grid-row:1/4;align-self:start}.c-garfield-the-cat .c-garfield-header{grid-column-end:16}.c-garfield-the-cat .c-garfield-aside--meta{grid-column:15/16;grid-row:2/7;align-self:start;margin:0}.c-garfield-the-cat .toc-components li{margin-bottom:.75em}.c-garfield-the-cat>.break-out{grid-column:3/14;width:100%}.c-garfield-the-cat>.break-out img{margin:0 auto}.c-garfield-the-cat>.break-out figcaption{max-width:50em}.article__content .c-garfield-the-cat figcaption{margin:0 auto}.c-garfield-the-cat .c-garfield-native-panel{grid-column:15/16;grid-row:8/15;align-self:start;text-align:center;position:relative}.c-garfield-native-panel__right{grid-column:15/16;grid-row:15/22;align-self:start;text-align:center}.c-garfield-the-cat .c-garfield-native-panel__below{grid-row:19/25}.c-garfield-the-cat .c-garfield-native-panel__end{grid-row:26/33}.feature-panel-container{margin-top:6em;margin-bottom:1em}}}.no-ads .c-garfield-native-panel,.no-panels .feature-panel-container,.subscriber .c-garfield-native-panel,.subscriber .feature-panel-container{display:none!important}figcaption a{color:inherit}figcaption code,figcaption pre{font-style:normal}.article h1,.article h2,.article h3,.article h4,.article h5,.article h6{position:relative}.feature-panel-container{grid-column:1/15;margin-top:3em;margin-bottom:1em}.article__image img,.c-garfield-the-cat>figure img{display:block;width:auto;max-width:100%;margin:0 auto;height:auto}.article__image>a,.c-garfield-the-cat>figure>a{display:block;background:0 0;position:relative;z-index:99}.article__image figcaption,.c-garfield-the-cat>figure figcaption{color:#666;font-size:.95em;font-style:italic;padding:.75em 2em .75em 0;display:table}.article__image figcaption a,.c-garfield-the-cat>figure figcaption a{color:#666}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before,.internal__page__wrapper figure:not(.bio-image) figcaption::before{content:url("data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 17 13.09%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23c2c2c2%7D%3C/style%3E%3C/defs%3E%3Ctitle%3Ecamera%3C/title%3E%3Cpath class=%22cls-1%22 d=%22M8.5 5.44a2.21 2.21.0 102.21 2.21A2.21 2.21.0 008.5 5.44zm6.29-3.23h-2.55A2.21 2.21.0 0010 0H7A2.21 2.21.0 004.76 2.21H2.21a2.21 2.21.0 00-2.21 2.21v6.46a2.21 2.21.0 002.21 2.21h12.58A2.21 2.21.0 0017 10.88V4.42a2.21 2.21.0 00-2.21-2.21zM8.5 11.56a3.91 3.91.0 113.91-3.91A3.91 3.91.0 018.5 11.56z%22/%3E%3C/svg%3E");height:1em;width:1.5em;padding-right:.6em;display:table-cell;vertical-align:baseline;position:relative;top:.05em}.c-garfield-the-cat>figure.article__figure figcaption::before{content:'';display:none}.hidden{display:none!important}.c-garfield-header{clear:both}.c-promo-box{font-size:.9em;border-radius:11px}.c-promo-box a:not(.btn){color:#006fc6}.c-promo-box--ad::before{display:block;white-space:pre-wrap;padding:2em 0 3em;font-size:.85em;font-style:italic;color:#666}.c-promo-box--ad img{border-top-left-radius:11px;border-top-right-radius:11px}.c-garfield-the-cat .author__desc{font-size:.9em;color:#555}.summary__heading{font-style:normal;font-size:1rem;letter-spacing:2px;margin:0;font-weight:700;color:#d33a2c;text-transform:uppercase}.c-promo-box--ad ul{padding-left:0;margin:0}.bnnr-list{display:flex;text-align:center;justify-content:center;flex-direction:row}.sponsors.c-promo-box:not(.c-promo-box--wide) .bnnr-list{flex-direction:column}.c-garfield-the-cat{padding:0 1em}@media screen and (min-width:80em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr))1.4fr .6fr 21rem 1fr}}@media screen and (min-width:100em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr))1.9fr .4fr 21rem 1fr}}@media screen and (min-width:160em){.c-garfield-the-cat{display:grid;grid-template-columns:18.5rem repeat(11,minmax(0,1fr)).7fr .3fr 18.5rem;grid-column-gap:1.75rem}}@media(min-width:187.5em){.c-garfield-the-cat{display:grid;grid-template-columns:20rem repeat(11,minmax(0,1fr)).7fr .3fr 20rem;grid-column-gap:2.25rem}}.header{background:#d33a2c;background:var(--THEME_COLOR,#d33a2c);position:relative;display:grid;justify-content:flex-start;align-items:center;padding:.8em;z-index:2;grid-template-columns:min-content min-content 1fr;column-gap:5px}@media all and (min-width:31.25em){.header{grid-template-columns:-webkit-min-content -webkit-min-content 0 minmax(100px,100%);grid-template-columns:min-content min-content 0 minmax(100px,100%);column-gap:10px}}@media(min-width:700px){.header{grid-template-columns:-webkit-min-content minmax(140px,2fr)0 minmax(100px,350px);grid-template-columns:min-content minmax(140px,2fr)0 minmax(100px,350px)}}@media(min-width:740px){.header{padding:1rem 2em}}.search{flex-basis:100px;flex-shrink:1}@media screen and (min-width:48em){body{font-size:calc(.35842vw + .95296em)}}body .form__field__label,body li,body p{line-height:calc(1.5em + .2vw);word-break:break-word}body h1{line-height:1.2}.article--post__title a:focus,.article--post__title a:hover{color:#d33a2c}@supports(-ms-ime-align:auto){.article__image figcaption,.c-garfield-the-cat>figure figcaption{display:inline-block}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before{display:inline-block}body{font-feature-settings:normal}}::-webkit-input-placeholder{color:#666}::-moz-placeholder{color:#000}:-ms-input-placeholder{color:#666}.article-header--meta-item__date,time{color:#666;font-feature-settings:"smcp" 1,"c2sc" 1;letter-spacing:1px;text-transform:lowercase;background-position:50% 72%}.article-header--meta-item__date{display:flex}.wf-loaded-stage2 time{font-variant:petite-caps}.kbd,kbd{font-size:.9em;padding:.0625rem .5rem;border-radius:.125rem;border:1px solid #d33a2c;box-shadow:1px 1px #d33a2c,2px 2px #d33a2c;margin:0 .25rem;color:#d33a2c;font-family:monospace}figure{margin:0;padding:0}figure:after,figure:before{content:" ";display:table;clear:both}a{padding:7px 0;background-color:transparent;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;text-decoration-line:underline;color:#006fc6}.h1,h1{font-size:calc(1.625rem + 1.6vw);margin:0}.h2,.h3,.h4,.h5,h2,h3,h4,h5{color:#333}.h2,h2{font-size:calc(1.5rem + .25vw);margin:2em 0 .75em;text-transform:capitalize}.h3,h3{font-size:calc(1.125rem + .25vw);text-transform:uppercase;letter-spacing:1px;margin-top:2em;margin-bottom:1em}h4{font-size:1.1em;margin-top:2em}h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{text-transform:none}@keyframes fadeOut-headings{0%{background:#ffde95;box-shadow:-10px 0 0 12px #ffde95}100%{background:#fff1d2;box-shadow:-10px 0 0 12px #fff1d2}}h2:target,h3:target,h4:target,h5:target,h6:target{border-radius:11px;animation:fadeOut-headings .4s;animation-fill-mode:forwards}.article__content h2:target a,.article__content h3:target a,.article__content h4:target a,.article__content h5:target a{color:#d33a2c}:target{scroll-margin-top:2rem}ol,ul{margin:1em 0;max-width:100%}ol{padding:0;list-style:none;counter-reset:listCounter}ol>li{padding-left:calc(1.65em + .7vw);position:relative;counter-increment:listCounter;margin-bottom:1em}ol>li::before{content:counter(listCounter,decimal-leading-zero);font-size:.7em;font-weight:700;color:#d33a2c;left:.8em;position:absolute;font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif}ul{list-style:disc}ul>li::marker{color:#d33a2c}ul>li{margin-bottom:.75em;padding-left:.15em}.rh{color:#d33a2c}.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}@media(min-width:800px){.search{flex-basis:500px}.main-nav{grid-column:auto}.menu-text--sm{display:none}.menu-text--lg{display:block}}.secondary-nav{position:relative;grid-row-start:2;grid-column:1/5}body:not(.enhanced) .main-nav{overflow-x:auto;-webkit-overflow-scrolling:touch}.main-nav__primary{display:flex;list-style:none;padding:.4em 0;margin:0;flex-wrap:nowrap;width:100%;height:100%;flex-shrink:1;min-width:0;justify-content:flex-start}.main-nav span:empty{display:none}@media all and (min-width:53.125em){.main-nav__primary{justify-content:space-between}}.nav-item{flex-grow:0;background:0 0;text-shadow:none;color:inherit;font-weight:700;display:flex;align-items:center;margin-bottom:0;padding-left:0}.nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav-more-item{position:relative;width:145px}@media(min-width:42.9375em){.main-nav-more-item{margin-left:.35em}}@media all and (max-width:52.5em){.main-nav-more-item{justify-content:center}}.main-nav-more-item__button{padding:.4em .5rem .4em 1rem;border:1px solid rgba(0,0,0,5%);color:inherit;display:flex;align-items:center;justify-content:space-around;line-height:1;position:relative;background-color:rgba(0,0,0,.2);border-radius:11px;box-shadow:0 13px 7px -15px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.main-nav-more-item__button,.nav-item-link{white-space:nowrap}.nav-item-link{padding:.35em .9rem;background:0 0;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);text-decoration:none}@media screen and (min-width:800px){.main-nav__secondary .nav-item-link{color:#d33a2c!important}}.nav-item-link:focus,.nav-item-link:hover{background-color:rgba(0,0,0,.15);border-radius:11px}.main-nav__secondary .nav-item-link:focus,.main-nav__secondary .nav-item-link:hover{background-color:transparent;box-shadow:none}.main-nav-more-item__button:active,.main-nav-more-item__button:focus,.nav-item-link:active,.nav-item-link:focus{outline-color:var(--THEME_COLOR_OUTLINE,#811d15)!important}.secondary-nav .nav-item-link:active,.secondary-nav .nav-item-link:focus{outline-color:#811d15!important}.main-nav__secondary .nav-item-link{text-shadow:none;width:100%;text-decoration:none;text-decoration-color:#d33a2c;padding:.25em .7rem}.main-nav-more-item__button:after{content:"";display:block;margin-left:9px;width:30px;height:30px;background-position:50%;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 35.96 33.31'%3E%3Cellipse cx='17.98' cy='31.55' fill='rgba(60,60,60,0.3)' rx='14.75' ry='.57'/%3E%3Cpath fill='%23fff' d='M34.94 15v-.93c-.23-3-2.16-5.93-5.22-6.3-2.31-.28-3.39 1.45-2.4 3.84a.43.43 0 000 .05v.11a.14.14 0 010 .06.63.63 0 000 .09v.17c0 .08.06.18.09.29s0 0 0 .05a1 1 0 000 .17.64.64 0 010 .07c0 .18.1.38.14.6a.24.24 0 010 .08v.29c0 .03.06.33.08.5.37 2.58 0 6.27-4.73 7.37A12.74 12.74 0 0019.7 23c-.17-.65-.36-1.25-.55-1.77a5.16 5.16 0 002.05-2.56 11.26 11.26 0 01-.69 2.33c1.81-1.55 2-5.05 2-5.54a4.72 4.72 0 01.21 2c1.55-2.41-1.17-6-1.17-6a9.67 9.67 0 011.84 2.24C23 11.75 20.82 10 20.82 10c2.65-4 2.51-5.68 2.51-5.68-3.26-1.34-7 .73-7 .73a5.12 5.12 0 00-4-1.7 3.61 3.61 0 011.56 1 16.79 16.79 0 00-3.23-.74C10.41 3 9.4 1.16 6.22 1h-.58S5 3.64 5.61 5.19c-1.15.49-1.26.93-1.26.93l1.17-.25-.67 2.67a4.66 4.66 0 00-2.39 1.38 3 3 0 011.15-.07A5.11 5.11 0 001 13.05a1.32 1.32 0 01.87-.51c-1.47 2.69.49 3.76.49 3.76a3.8 3.8 0 010-.92 8.52 8.52 0 002.19 3.9 14.13 14.13 0 01-.24-1.59 5.46 5.46 0 001.93 2.7 6.25 6.25 0 01-.4-1.52 5.87 5.87 0 001.36 1.75c-.12.24-.24.47-.34.71a12 12 0 00-.7 2.13c0 .23-.09.45-.13.66a1.4 1.4 0 00-1-.31 1.4 1.4 0 00-1.09 1 3.1 3.1 0 000 1.57 9.48 9.48 0 001.8 3.92A2.92 2.92 0 004 30.06c-.56.16-1 .83-.72 1.34H22.6c.29-.51-.16-1.18-.72-1.34a2.92 2.92 0 00-1.71.24A9.48 9.48 0 0022 26.44 3.24 3.24 0 0022 25a15.89 15.89 0 012.87-.21 14.93 14.93 0 004.65-.69c3.72-1.24 5.38-5.25 5.38-9zm-12.49.42h-.05v-.07z'/%3E%3C/svg%3E")}.main-nav__secondary{display:none;color:#fff;padding:.2em 0;flex-wrap:wrap;flex-direction:column;justify-content:flex-start;align-items:flex-start;height:10em}@media all and (min-width:31.25em){.main-nav__secondary .nav-item-link{padding:.25em 1.1rem}.main-nav__secondary{padding:.2em .5em}}@media(-webkit-min-device-pixel-ratio:1.3),(min-resolution:124.8dpi){.main-nav__secondary{height:11em}}@media(min-width:800px){.secondary-nav{grid-row:auto;grid-column:auto}.main-nav__secondary{display:none;position:absolute;top:0;left:-80px;transform:translate(-50%,0);max-width:unset;background:#fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px;margin:0;padding:14px 20px 10px 10px;min-width:180px;color:#d33a2c;flex-direction:row;justify-content:space-between;align-items:center;height:auto}.main-nav__secondary:before{content:"";display:block;position:absolute;top:1px;left:50%;transform:translate(-50%,-100%);width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:15px solid #fff}}.nav-item-1,.nav-item-10,.nav-item-2,.nav-item-3,.nav-item-4,.nav-item-5,.nav-item-6,.nav-item-7,.nav-item-8,.nav-item-9{display:none}.main-nav__secondary .nav-item-1,.main-nav__secondary .nav-item-10,.main-nav__secondary .nav-item-2,.main-nav__secondary .nav-item-3,.main-nav__secondary .nav-item-4,.main-nav__secondary .nav-item-5,.main-nav__secondary .nav-item-6,.main-nav__secondary .nav-item-7,.main-nav__secondary .nav-item-8,.main-nav__secondary .nav-item-9{display:flex}@media(min-width:42.9375em){.nav-item-1{display:flex}.main-nav__secondary .nav-item-1{display:none}}@media(min-width:52.5em){.nav-item-2{display:flex}.main-nav__secondary .nav-item-2{display:none}}@media(min-width:56.5625em){.nav-item-3{display:flex}.main-nav__secondary .nav-item-3{display:none}}@media(min-width:70em){.nav-item-4{display:flex}.main-nav__secondary .nav-item-4{display:none}}@media(min-width:77.8125em){.nav-item-5{display:flex}.main-nav__secondary .nav-item-5{display:none}}@media(min-width:97.5em){.nav-item-6{display:flex}.main-nav__secondary .nav-item-6{display:none}}@media(min-width:108.4375em){.nav-item-7{display:flex}.main-nav__secondary .nav-item-7{display:none}}@media(min-width:120.625em){.nav-item-8{display:flex}.main-nav__secondary .nav-item-8{display:none}}@media(min-width:136.5625em){.nav-item-9{display:flex}.main-nav__secondary .nav-item-9{display:none}}@media(min-width:179.6875em){.nav-item-10{display:flex}.main-nav__secondary .nav-item-10{display:none}.main-nav-more-item{display:none}.main-nav__primary{justify-content:flex-start}.nav-item{padding:0 .65em}.header,.header.searchFocused{grid-template-columns:-webkit-min-content minmax(140px,-webkit-max-content)0 minmax(250px,600px);grid-template-columns:min-content minmax(140px,max-content)0 minmax(250px,600px)}}@media(max-width:480px){.header .search{grid-column:1/5;margin-top:.5em}.main-nav__primary{justify-content:flex-end}.main-nav-more-item{justify-content:flex-end}}.btn--text-shadow,a.btn.btn--text-shadow{text-shadow:1px 1px 1px rgba(0,0,0,.25)}.btn-wrapper{display:none}@media screen and (min-width:1100px){.btn-wrapper{display:block;padding:4px}}.btn,.toolbar-item{display:inline-block;border-radius:11px;text-align:center;color:#fff;text-decoration:none;border:none;font-weight:700;background:0 0;font-size:.9em;outline:0;background-color:#d33a2c;background-image:linear-gradient(to bottom,#f88040,#d33a2c);position:relative;top:-2px;transition:top .1s ease-in-out,box-shadow .1s ease-in-out}.toolbar-item{box-shadow:0 4px #dedada}.toolbar-item{transition:all .3s ease-in-out}.toolbar-item:active,.toolbar-item:focus{position:relative;top:3px}.btn{padding:.5em 1em}.btn.btn--green,.btn.btn--member{background-color:#41b14f;background-image:linear-gradient(#9ec14c,#41b14f);color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);box-shadow:0 4px #2d8f39;position:relative}.btn,.btn--blue,.btn--green{position:relative}.btn--blue:focus,.btn--green:focus,.btn:focus{top:3px;box-shadow:0 4px transparent}.cta--green{display:block;padding:.5em;color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0;font-weight:700;text-decoration:none;border-radius:11px;text-align:center;font-size:.85em}.cta--green:hover{background-color:#c8f1e0;border:1px solid #a0dcc4}.cta--green:active,.cta--green:active:hover,.cta--green:focus,.cta--green:focus:hover{background-color:#137d54;color:#fff!important}.btn--white{background:#fff;color:#267dcc;transition:color .1s ease-out;box-shadow:0 4px transparent}.btn--white--bordered,.btn--white--bordered:active,.btn--white--bordered:focus,.btn--white--bordered:hover,.toolbar-item{border:1px solid #ddd}.btn span{color:#811d15;font-size:.8em;margin-left:5px;margin-top:.5em;line-height:1}.btn.btn--medium{font-size:calc(.9em + .1vw);padding:.75em 1em}@media(max-width:64em){pre{max-width:100%}}.input{border:none;display:block;color:#333;background-color:#fff;padding:.4em .75em;border-radius:5.5px;outline:0;font:inherit;margin:0;font-size:1.15rem;width:100%}.input::-webkit-input-placeholder{color:#666}.input:-ms-input-placeholder{color:#666}.input::-moz-placeholder{color:#000}.input::-ms-clear{display:none}.search .search-input{padding-left:calc(22px + 15px + 15px);background-image:url("data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 height=%2224%22 width=%2224%22%3E%3Cdefs%3E%3ClinearGradient id=%22linear-gradient%22 x1=%2222.31%22 y1=%2223.62%22 x2=%223.73%22 y2=%223.05%22 gradientUnits=%22userSpaceOnUse%22%3E%3Cstop offset=%220%22 stop-color=%22%23e93722%22/%3E%3Cstop offset=%221%22 stop-color=%22%23f86f25%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Ctitle%3EMagnifier%3C/title%3E%3Cpath fill=%22url(%23linear-gradient)%22 d=%22M23.33 20.1l-4.73-4.74a10.06 10.06.0 10-3.23 3.23l4.74 4.74a2.29 2.29.0 103.22-3.23zM5.85 14.26a5.94 5.94.0 118.42.0 6 6 0 01-8.42.0z%22/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:22px;background-position:15px 45%;font-size:calc(1em + .1vw);border-radius:11px;padding-top:1rem;padding-bottom:1rem;font-weight:700;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}@media all and (max-width:550px){.search .search-input{min-height:54px}}.search-button{width:0;height:0;padding:0}.enhanced .search-button{display:none}.search-input-wrapper{position:relative}.search-clear-button{background:0 0;border:none;position:absolute;right:0;top:50%;transition:opacity .2s ease-out;transform:translate(-25%,-50%);opacity:0;padding:.5em}.search-clear-button.enabled{opacity:1}.search-results{background:var(--THEME_COLOR,#d33a2c);color:#fff}.search-results img{border-radius:11px;border:4px solid #fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}.search-results img:hover{box-shadow:0 0 3px -1px rgba(50,50,93,.25),0 4px 12px -6px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.search-results ol img{min-height:100px;height:auto}.logo{font-size:1em;line-height:0;width:3em;flex-basis:3em;flex-shrink:0;position:relative;z-index:0}@media all and (min-width:1450px){.logo{width:10.5em;flex-basis:10.5em}.logo img{transform:none}}.logo a{display:block;background:0 0;outline:0;padding:0;color:transparent;text-shadow:none}.logo a picture{display:block}.logo img{height:3.5em;transform:translate(0,15%)}.cart-active .back-to-top-wrapper{display:none}a.back-to-top{display:block;background:0 0;width:50px;height:50px;opacity:.7;text-shadow:none;border-radius:11px;padding:13px;transform-origin:bottom left;will-change:transform;transform:rotate(-11deg);transition:background-color .1s ease-out,transform .2s ease-out,opacity .1s ease-out;background-color:#666}@media all and (max-width:64em){a.back-to-top{opacity:.3}}a.back-to-top:focus,a.back-to-top:hover{background-color:#282634;opacity:1}a.back-to-top svg{display:block}.back-to-top-wrapper{width:50px;height:50px;display:none;position:fixed;bottom:20px;right:20px;z-index:9;will-change:transform;backface-visibility:hidden}.back-to-top-wrapper::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100%;background-repeat:no-repeat;top:89%;left:-30%;right:0;transition:all .1s ease-out;transform-origin:30% 50%;pointer-events:none}@media(min-height:600px){.back-to-top-wrapper{display:block}}label{max-width:100%}.form__field__input,input[type=email],input[type=password],input[type=text],textarea{background:#effaff;font-size:1em;border:1px solid #d2dfe4;transition:box-shadow .3s ease-in-out,color .3s ease-in-out;background-position:right 1.35em center;background-size:.25em .25em;background-repeat:no-repeat;margin-bottom:5px;border-radius:11px;padding:.9em 2em .7em 1.1rem;display:block;width:100%;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.2)}.form__field__label{display:block;margin-bottom:.5em;cursor:pointer}input{border-color:#aaa}.sponsors ul{padding-left:0;text-align:center;list-style-image:none}.sponsors__native ul.bnnr-list li a{border-radius:11px;background-color:#fff;margin-bottom:3em;position:relative;top:0;padding:0;background-image:none;text-decoration-line:underline;text-decoration-color:#006fc6!important;text-decoration-thickness:1px;display:flex;flex-direction:column}.sponsors.sponsors-leaderboard ul li a,.sponsors.sponsors__lead ul li a,.sponsors__lead ul a,.sponsors__native ul.bnnr-list li a{box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,3%);transition:box-shadow .2s ease-in-out,top .1s ease-in-out;border-radius:11px}.sponsors.sponsors-leaderboard ul li a:hover,.sponsors.sponsors__lead ul li a:hover,.sponsors__native ul.bnnr-list li a:hover{box-shadow:0 1px 7px -5px rgba(50,50,93,.25),0 3px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,3%)}.sponsors.sponsors-leaderboard ul li a:active,.sponsors.sponsors-leaderboard ul li a:focus,.sponsors.sponsors__lead ul li a:active,.sponsors.sponsors__lead ul li a:focus,.sponsors__native ul.bnnr-list li a:active,.sponsors__native ul.bnnr-list li a:focus{box-shadow:inset 0 1px 7px -1px rgba(50,50,93,.25),inset 0 3px 6px -4px rgba(0,0,0,.3),inset 0 -6px 16px -6px rgba(0,0,0,3%);outline-offset:.75em;top:7px}.sponsors__native ul.bnnr-list li img{max-width:none;width:100%;height:auto;display:inherit}.sponsors.sponsors__lead a{box-shadow:none}.sponsors__lead ul a:active,.sponsors__lead ul a:focus{outline-offset:.75em;position:relative;top:7px;border-radius:11px}.sponsors__lead ul a:active img,.sponsors__lead ul a:focus img{border:2px solid #fff;box-shadow:0 1px 7px -1px rgba(50,50,93,.25),inset 0 3px 6px -4px rgba(0,0,0,.3),inset 0 -6px 16px -6px rgba(0,0,0,3%)}img::before{height:2.5em;display:block;top:2em;content:" ";width:100%;z-index:2;left:0}img::after{content:url("data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%221em%22 height=%221em%22 viewBox=%220 0 32 32%22 style=%22margin-right:10px%22%3E%3Cpath fill=%22%23777%22 d=%22M26 28H6v-4l6-10 8.219 10L26 20v8z%22/%3E%3Cpath fill=%22%23777%22 d=%22M26 15c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z%22/%3E%3Cpath fill=%22%23777%22 d=%22M28.681 7.159c-.694-.947-1.662-2.053-2.724-3.116s-2.169-2.03-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319H4.5c-1.378.0-2.5 1.121-2.5 2.5v27C2 30.878 3.122 32 4.5 32h23c1.378.0 2.5-1.122 2.5-2.5V10c0-.448-.137-1.23-1.319-2.841zM24.543 5.457c.959.959 1.712 1.825 2.268 2.543H22V3.189c.718.556 1.584 1.309 2.543 2.268zM28 29.5c0 .271-.229.5-.5.5h-23c-.271.0-.5-.229-.5-.5v-27c0-.271.229-.5.5-.5.0.0 15.499.0 15.5.0v7c0 .552.448 1 1 1h7v19.5z%22/%3E%3C/svg%3E")" " attr(alt);font-size:.9em;display:block;color:#666;line-height:1.5;position:absolute;font-style:italic;z-index:2;top:calc(2em - 35px);text-align:center;width:104%;left:-2%;padding:2.25em 1em;text-shadow:none;background-color:#eee;border-radius:11px}@media screen and (min-width:40em){.author__desc{margin-left:1em}}.author__desc{font-size:.8em;position:relative;font-style:normal!important;color:#333;padding:0!important}.author__desc p{margin:1em 0}.author__desc .show-more-link{display:inline}.author__desc__title{color:#666;text-transform:uppercase;letter-spacing:2px;font-size:.9em;margin:0;font-weight:400}@media(max-width:40em){.author__desc{width:100%}}.article{padding-top:calc(.5em + 2vw)}.article__summary{font-size:1.05em}.c-garfield-the-cat .article__summary{position:initial}.author__desc p{font-size:.95em}.wf-loaded-stage2 .author__desc p{font-size:1em}.article__summary{align-self:center;margin-top:0;color:#666;position:relative;padding-bottom:1.5em;margin-bottom:.5em;border-bottom:3px solid #e5e5e5;font-size:1.05em;line-height:1.55em;font-style:italic}.wf-loaded-stage2 .article__summary{font-size:1.15em}@media all and (max-width:420px){.article__content{margin-top:0}}.article__content{line-height:1.5;padding:0!important}.article__content a{color:#006fc6}.article__content .btn{color:#fff}.drop-caps+p::first-line{font-weight:700;font-variant:all-petite-caps;text-transform:lowercase;letter-spacing:.5px;font-size:1.15em}.drop-caps{width:calc(96px + 1vw);height:calc(120px + 4vw);float:left;margin-right:1.5em;position:relative;left:calc(-1.3em - .5vw);top:.5vw}@media all and (min-width:500px){.drop-caps{width:150px;height:186px;min-width:100px;margin-left:0}}@media screen and (min-width:64em){.author__desc{margin-left:0}}.drop-caps img{max-width:100%}.drop-caps img:nth-of-type(2){position:absolute;bottom:0;right:-40px;width:75%}@media all and (min-height:700px){body.articlepage{overflow:initial}}.form__field__label--extra{display:inline}@media(max-width:64em){.form__field__label--extra{display:none}}.article-header{margin:0}@media all and (max-width:1099px){.article-header--meta{flex-wrap:nowrap;overflow-x:auto;scroll-snap-type:x;overflow-y:hidden}.article-header--meta::-webkit-scrollbar{display:none;width:0;background:0 0}.sponsors:not(.sponsors__lead):not(.sponsors-leaderboard):not(#sponsors-article-end):not(.sponsors__mobile){display:none}.c-garfield-aside--meta{display:none}.sponsors__mobile{display:block}.meta-box{margin:1.5em 0}.comment-count{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.article-header--comments a{color:#d33a2c;text-decoration:none;font-weight:700}.article-header--meta .article-header--meta-comments{background-image:url("data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 28.84 26.6%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32%7D%3C/style%3E%3C/defs%3E%3Ctitle%3EArtboard 29%3C/title%3E%3Cpath class=%22cls-1%22 d=%22M3.29 2.73a66.7 66.7.0 003.21 9.52l6.29 1.08-4.69 2.2c2.91 5.28 7 9.09 12.14 4.55L25 24.52l.57-.52-3.83-5.48c3.6-4.32 1.74-7.76-1.93-10.36L17 13.29l-.1-6.85A43.83 43.83.0 0011 4L9 7.7V3.39c-2.2-.65-4.07-1.08-5.08-1.3a.52.52.0 00-.63.64z%22/%3E%3C/svg%3E");background-size:auto .75em;background-repeat:no-repeat;background-position:0 45%;padding-left:1em}}.c-garfield-the-cat .article-header--meta{display:flex;align-items:flex-end;list-style:none;padding:0;margin:0 0 .95em;height:30px}.article-header--meta li{padding:0;margin:0;min-width:max-content}.article-header--meta li::before{display:none}.article-header--meta li::after{content:"/";font-size:1em;color:#a7a7a7;display:inline-block;margin:0 .25em}.article-header--meta li:last-of-type::after{display:none}.article-header--date{color:#585858;font-family:inherit;font-size:.95em}.article-header--comments{font-size:.9em}.article-header--updated{padding:0 .8rem;color:#137d54;background-color:#d6f3e7;border:1px solid #c6f2e0;border-radius:11px;font-weight:700;text-transform:initial;font-feature-settings:normal;font-variant:none;font-size:.9em;letter-spacing:0;min-width:fit-content;margin-right:7px}.meta-box{background:#f6f6f6;padding:.6em 1em;list-style:none;width:max-content;max-width:100%;border-radius:11px;font-size:.9em;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;gap:.5em 2em}.c-garfield-the-cat .meta-box--item{line-height:1.4;padding-left:1.5em;background-size:auto 1em;background-repeat:no-repeat;background-position:0 2px;margin-bottom:0}.meta-box li:last-child,.meta-box--item:last-child{margin-bottom:0}.meta-box--tags{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cpath fill='%23e93e32' class='cls-1' d='M12.78 22.74l1.35 1.35a2.09 2.09 0 003 0l8.12-8.15a2.09 2.09 0 000-3l-1.34-1.33zM14.71 2.51a2.09 2.09 0 00-1.52-.61l-10 .22L3 12.1a2.09 2.09 0 00.61 1.52l7.14 7.12L21.87 9.65zm-4.64 9.88a3.17 3.17 0 113.44-2.86 3.17 3.17 0 01-3.44 2.86z'/%3E%3C/svg%3E")}.meta-box--share{background-image:url("data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 400%22%3E%3Cpath d=%22M126.16 359.66c148 0 228.93-122.61 228.93-228.94.0-3.48.0-6.94-.23-10.4A163.83 163.83.0 00395 78.68a160.93 160.93.0 01-46.21 12.66 80.82 80.82.0 0035.37-44.51 161.17 161.17.0 01-51.09 19.53A80.54 80.54.0 00196 139.74 228.42 228.42.0 0130.13 55.68 80.52 80.52.0 0055 163.09 80 80 0 0118.52 153v1a80.49 80.49.0 0064.55 78.87 80.37 80.37.0 01-36.33 1.38 80.55 80.55.0 0075.17 55.87A161.38 161.38.0 0122 324.67a163.54 163.54.0 01-19.16-1.16 227.73 227.73.0 00123.33 36.08%22 fill=%22%231da1f2%22/%3E%3C/svg%3E")}.meta-box--published{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32%7D%3C/style%3E%3C/defs%3E%3Crect class='cls-1' x='8.25' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Crect class='cls-1' x='17.53' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Cpath class='cls-1' d='M24.1 5.39h-2.56a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59h-4.28a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59H4.75a2.07 2.07 0 00-2.08 2.07v14.75a2.07 2.07 0 002.07 2.07H24.1a2.07 2.07 0 002.07-2.07V7.46a2.07 2.07 0 00-2.07-2.07zm-.29 16.15H5.23V8.45h18.58z'/%3E%3Cpath class='cls-1' d='M7.18 11.71h2.5v2.5h-2.5zM11.27 11.71h2.5v2.5h-2.5zM15.26 11.71h2.5v2.5h-2.5zM19.35 11.71h2.5v2.5h-2.5zM7.18 15.78h2.5v2.5h-2.5zM11.27 15.78h2.5v2.5h-2.5zM15.26 15.78h2.5v2.5h-2.5zM19.35 15.78h2.5v2.5h-2.5z'/%3E%3C/svg%3E")}.meta-box--author{background-image:url(/images/icons/author.svg)}code,pre{font-feature-settings:normal;color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Fira Code,Menlo,Consolas,Monaco,andale mono,ubuntu mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-variant-ligatures:none;word-wrap:normal;tab-size:4;hyphens:none}pre{padding:1rem;margin:.5rem 0;resize:both;max-width:100vw;color:#666;background:#fafafa;border:1px solid #eee;font-size:1em;border-radius:11px;min-width:250px;overflow:auto;box-shadow:0 6px 12px -17px rgba(50,50,93,.25),0 7px 6px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,3%)}.code-toolbar{position:relative}li>.code-toolbar{margin-top:1em}.code-toolbar>.toolbar{position:absolute;top:.5em;right:.5em;opacity:0;transition:opacity .3s ease-in-out}.code-toolbar>.toolbar .toolbar-item{display:inline-block}code.diff-highlight{width:100%}a code{background:0;padding:0;text-decoration-line:underline}:not(pre)>code,code{background:#fff2ea;color:#333;font-size:calc(.75em + .1vw);line-height:calc(1.5em + .2vw);padding:0 .2725em;font-style:normal;display:inline-block}:not(pre)>code{white-space:normal}pre>code{line-height:calc(1.75rem + .2vw);background:0 0;white-space:break-spaces}pre[data-line]>code{white-space:pre}pre[data-line]>code>span{height:calc(1.75rem + .2vw);display:inline-block}.table,table{width:100%;border-collapse:collapse;margin-bottom:calc(2em + 2vw);clear:both}.tr,tr{border-bottom:4px solid #eee}.td,.th,td,th{padding:1em 1.5em;border:none;text-align:left}.scroll-pane{overflow-x:auto;scrollbar-color:#666 #201c29;-webkit-overflow-scrolling:touch}.scroll-pane::-webkit-scrollbar{height:.75em}.scroll-pane::-webkit-scrollbar-thumb{background:#b0b0b0;border-radius:11px}.scroll-pane table td{min-width:30vw}@media all and (min-width:650px){.scroll-pane table td{min-width:auto}}.layout-fixed{table-layout:fixed}.figure table{margin-bottom:0}.tablesaw td{line-height:165%;text-align:left;vertical-align:middle}.tablesaw td,.tablesaw th{padding:.8em 1em}tbody tr:nth-child(2n) td{background-color:#f7f7f7}.tablesaw th,table th{border-bottom:4px solid #ddd}@media screen and (max-width:767px){.tablesaw thead{display:none}.tablesaw tr{display:flex;flex-direction:column;margin-bottom:1.5em;width:100%;border-radius:11px;border:1px solid #eee}.tablesaw td:before{content:attr(data-label);display:table-cell;font-weight:700;padding:0 1em 0 0;text-align:right}.tablesaw td:last-child:after{content:'';position:absolute;left:0;right:0;bottom:0}}a.skip-main{left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999}a.skip-main:active,a.skip-main:focus{color:#d33a2c;background-color:#fff;left:auto;top:auto;width:auto;height:auto;overflow:auto;padding:.5em 1em;text-align:center;font-size:1.2em;z-index:999}.video-embed-container .video-embed-container--wrapper{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}.signature{margin:1.5em 0;font-size:.9em;color:silver;font-style:italic}.author .show-more-link{font-size:.9em;display:inline;color:#666;text-decoration-line:underline;text-decoration-color:initial;font-weight:400}.cookie-banner{background-color:#fff;border-radius:11px;position:fixed;width:calc(19em + 1vw);padding:1em 1.5em;font-size:1em;z-index:99;box-shadow:0 6px 40px rgba(0,0,0,.3);bottom:1.25em;right:1.25em}.cookie-banner p{font-size:.9em;margin-top:0}.cookie-banner__container{display:flex}.cookie-banner button{padding:.9em 1em}@media screen and (max-width:480px){.cookie-banner{right:0;left:0;width:100%;border-radius:0;bottom:0}.cookie-banner p{margin-top:1em}}@media screen and (max-width:380px){.cookie-banner p{margin-top:0}}.cookies--btn{width:100%}.mr5{margin-right:.5em}.mr0{margin-right:0!important}.btn--white{background:#fff;color:#267dcc;border:1px solid #fff}.btn--white--bordered{border:1px solid #ddd}.sponsors ul li{display:inline-block;margin-bottom:3em;font-size:.85em;padding:0;text-align:center;vertical-align:top;max-width:25rem;border-radius:11px;border:1px solid #eee;min-height:90px}.c-promo-box--ad.sponsors li{width:auto}.sponsors__native ul.bnnr-list li{border:0;width:100%;height:auto;max-width:85%;margin:0 0 2em auto}.sponsors__native ul.bnnr-list .ad__desc{padding:1em}.sponsors__native ul.bnnr-list li:only-child{padding-bottom:0}blockquote:not(.pull-quote){font-style:italic;border-left:11px solid #e6e4e1;padding:1em calc(1.5em + .5vw);color:#424242;margin-left:0;margin-right:0;font-size:1.05em;line-height:1.65em;letter-spacing:0;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0e3 0,#fff 100%)}blockquote:not(.pull-quote) p{margin:0}.btn--small.toolbar-item,.btn.btn--small{font-size:.9em;border-radius:6px;margin:0;padding:.4em 1em}.c-felix-the-cat a.btn{display:table;margin-top:1em;margin-bottom:1.5em}@media screen and (max-height:880px){.article__comments--notes{display:none}.article__comments__form__desc{margin-top:4em}}header.subnav__header{background-color:#fff;background-color:var(--headers-bg-color,#fff);padding:.2rem 0 0;z-index:1}.subnav__primary::-webkit-scrollbar{display:none;width:0;background:0 0}.subnav__tags li:first-child{padding-left:14px}.subnav__tags li:last-child{padding-right:.8em}.subnav__tags .subnav-item{margin-bottom:0}@media(min-width:740px){header.subnav__header{padding:.25rem 0 0;box-shadow:0 4px 20px rgba(0,0,0,.12)}.subnav__tags li:first-child{padding-left:35px}}.subnav .nav-item-link{color:#d33a2c;text-shadow:none!important;font-weight:700;font-family:Mija;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;border-radius:11px;font-size:1rem;background-color:#ffe7e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #fee0e0}.subnav .nav-item-link:hover{text-shadow:none;font-weight:700;font-family:Mija;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.subnav-item a:active,.subnav-item a:active:hover,.subnav-item a:focus,.subnav-item a:focus:hover{box-shadow:inset 0 1px 3px rgba(0,0,0,.12);background-color:#d33a2c;color:#fff!important;outline:0}.subnav-item--active a.nav-item-link,.subnav-item--active a.nav-item-link:hover{background-color:#d33a2c;color:#fff!important;border:1px solid #d33a2c}.subnav-item{display:flex;margin-right:9px;padding-left:3px}.subnav-item .nav-item-link{padding:2px 12px}.subnav a{background:0 0;font-weight:700;display:flex;align-items:center;text-decoration:none}.subnav__primary{padding:.25em 0;margin-top:.25em;margin-bottom:.35em;display:flex;position:relative;scroll-snap-type:x;scroll-padding:1rem;overflow-x:auto;scrollbar-width:none}.subnav-more-item__button{padding:.2em 1em;color:#d33a2c;border:1px solid #ddd;border-radius:11px;background:0 0;display:flex;align-items:center;justify-content:space-around;position:relative;font-size:.85em;min-width:max-content;transition:none}.hidden{display:none!important}.c-garfield-the-cat .subnav-item--green .nav-item-link{color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0}.c-garfield-the-cat .subnav-item--green .nav-item-link:hover{color:#137d54!important;background-color:#c8f1e0;border:1px solid #a0dcc4}.subnav .nav-item-link:hover{color:#d33a2c;text-shadow:none;font-weight:700;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.feature-panel__desc,.sponsors__desc{font-size:.75em;color:#666;padding-bottom:10px;top:-15px;position:relative}.feature-panel::before{position:absolute;left:0;transform:translate(0,-100%);top:-5px;content:"";border-bottom:8px solid #eee;width:100%}@media(min-width:1000px){.feature-panel::before{width:73%}}.feature-panel{position:relative;border-radius:11px;padding:1.25em;display:flex;flex-wrap:wrap;background-color:#f6f6f6}@media(min-width:1000px){.feature-panel{padding:2.5em}}.feature-panel-left-col,.feature-panel-right-col{flex-basis:100%;position:relative;padding:0;flex-shrink:0}.feature-panel-right-col{order:-1;display:flex;align-items:flex-start;margin-bottom:1em;justify-content:flex-start;margin-top:2em}@media(min-width:800px){.feature-panel-left-col{flex-basis:65%}.feature-panel-right-col{order:0;flex-basis:35%;margin:0;justify-content:center}}.feature-panel-description>:first-child{margin-top:0}.feature-panel-description>:last-child{margin-bottom:0}.feature-panel-image-link{position:relative;text-decoration:none;width:100%;max-width:210px;transition:scale,opacity .2s ease-out;padding-left:2.5em;background-image:none}.feature-panel-image{width:100%;max-width:14.375rem;margin:0 auto;display:block;transition:all .2s ease-out;will-change:transform;transform-origin:0 100%;transform:rotate(-11deg)}@media(min-width:1000px){.feature-panel-image-link{position:absolute;max-width:14.375rem;top:-90px;right:0}}.feature-panel-image-img{height:auto}.btn--large.toolbar-item,.btn.btn--large{font-size:calc(1em + .25vw);padding:.75em 1em}.btn .sr-only,.sr-only{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.c-garfield__nl{display:none}@media all and (min-width:1100px){.drop-caps{display:none}.l-author-bio{display:flex}.c-garfield__nl{display:block}.nl-box__form{display:flex;padding-bottom:7px;text-align:center;letter-spacing:-.5px;color:#fff;font-size:1.15em}.nl-box__desc{margin-top:10px;color:#666;font-size:80%;line-height:1.5em;text-align:center}.nl-box__form .nl-box__form--button,.nl-box__form .nl-box__form--email{flex-grow:1;flex-shrink:0;box-sizing:border-box;width:auto;margin:0;padding:.75em 1em;border:0;border-radius:11px;background:#fff;font-size:.95em}.nl-box__form--button:active,.nl-box__form--button:focus,input.nl-box__form--email:active,input.nl-box__form--email:focus{box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form--button:-ms-input-placeholder,.nl-box__form--email:-ms-input-placeholder{color:#777;font-style:italic}.nl-box__form--button::placeholder,.nl-box__form--email::placeholder{color:#777;font-style:italic}.nl-box__form .nl-box__form--button{transition:all .2s ease-in-out;color:#fff;background-color:#0168b8;font-family:Mija,-apple-system,Arial,BlinkMacSystemFont,roboto slab,droid serif,segoe ui,Ubuntu,Cantarell,Georgia,serif;font-weight:700;box-shadow:0 1px 1px rgba(0,0,0,.3);width:100%;border:0;border-left:1px solid #ddd;flex:2;border-top-left-radius:0;border-bottom-left-radius:0}.nl-box__form .nl-box__form--email{border-top-right-radius:0;border-bottom-right-radius:0;width:100%;flex:4}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus,.nl-box__form .nl-box__form--button:hover{cursor:pointer;color:#fff;background-color:#0168b8;border-color:#dadada;box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus{outline:0!important;text-shadow:1px 1px 1px rgba(0,0,0,.3);box-shadow:inset 0 3px 3px rgba(0,0,0,.3)}.nl-box__group{display:flex;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px}.nl-box__wrapper{display:flex;flex-direction:column;justify-content:center}.nl-box__form form{width:100%}.nl-box__form .nl-box__group{margin:0}.nl-box{margin:1.5em 0;padding:1em 0;box-shadow:none;max-width:750px;justify-self:center}}.article__content a.anchor{color:#767676;text-decoration:none;transition:color .2s ease-in-out;padding:.35em .05em}.article__content a.anchor:active,.article__content a.anchor:focus,.article__content a.anchor:hover{color:#106fc6;background-image:linear-gradient(90deg,#006fc6 0,#2ca2d3 30%,#006fc6 85%,#006fc6 100%);background-size:100%;background-repeat:repeat;-webkit-background-clip:text;-webkit-text-fill-color:transparent;-moz-background-clip:text;-moz-text-fill-color:transparent;text-decoration:none}#promo-article-end,#sponsors-article-end,.article__comments,.main-footer{content-visibility:auto}.toc-components{box-shadow:0 9px 30px -5px rgba(50,50,83,.25),0 8px 8px -12px rgba(0,0,0,.2),0 -6px 16px -6px rgba(0,0,0,3%);border-radius:11px;padding:2em;background-color:#fff;margin:1.25em 0 3em;grid-column:3/13}@media screen and (min-width:500px){.toc-components{display:grid;grid-template-columns:1fr 1fr}}@media screen and (min-width:800px){.toc-components{padding:2em 3em}}.article__content .btn--white{background:#fff;color:#267dcc}</style><link rel=preload href=/js/nav-v2.js as=script fetchpriority=high><link rel=preload href=/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2 as=font type=font/woff2 crossorigin fetchpriority=high media="(prefers-reduced-data: no-preference)"><link rel=preload href=/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2 as=font crossorigin fetchpriority=high media="(prefers-reduced-data: no-preference)"><link rel=preload href=/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2 as=font type=font/woff2 media="(min-width: 800px)" crossorigin fetchpriority=high media="(prefers-reduced-data: no-preference)"><link rel=preload href=/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2 as=font media="(min-width: 800px)" type=font/woff2 crossorigin fetchpriority=low media="(prefers-reduced-data: no-preference)"><link rel=alternate type=application/rss+xml title="Smashing Magazine &amp;raquo; Feed" href=https://www.smashingmagazine.com/feed/><meta name=description content="In the world of APIs, GraphQL has lately overshadowed REST due to its ability to query and retrieve all required data in a single request. In this article, I will describe a different type of API, based around components, which takes a step further the amount of data it can fetch from a single request."><meta name=robots content="noodp"><link rel=canonical href=https://www.smashingmagazine.com/2019/01/introducing-component-based-api/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Introducing The Component-Based API — Smashing Magazine"><meta property="og:description" content="In the world of APIs, GraphQL has lately overshadowed REST due to its ability to query and retrieve all required data in a single request. In this article, I will describe a different type of API, based around components, which takes a step further the amount of data it can fetch from a single request."><meta property="og:url" content="https://www.smashingmagazine.com/2019/01/introducing-component-based-api/"><meta property="og:site_name" content="Smashing Magazine"><meta property="article:publisher" content="https://www.facebook.com/smashmag"><meta property="article:author" content="https://www.smashingmagazine.com/author/leonardolosoviz/"><meta property="article:tag" content="API"><meta property="article:tag" content="GraphQL"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="Performance"><meta property="article:section" content="General"><meta property="article:published_time" content="2019-01-21 13:00:21 +0100 +0100"><meta property="article:modified_time" content=" 2019-01-21 13:00:21 +0100 +0100"><meta property="og:updated_time" content="2019-01-21 13:00:21 +0100 +0100"><meta property="og:image" content="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ad0b6f19-9f11-4931-ba73-c5c4e3745adb/comparison-data-fetching-apis-800w.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:description content="In the world of APIs, GraphQL has lately overshadowed REST due to its ability to query and retrieve all required data in a single request. In this article, I will describe a different type of API, based around components, which takes a step further the amount of data it can fetch from a single request."><meta name=twitter:title content="Introducing The Component-Based API — Smashing Magazine"><meta name=twitter:site content="@smashingmag"><meta name=twitter:image content="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ad0b6f19-9f11-4931-ba73-c5c4e3745adb/comparison-data-fetching-apis-800w.png"><meta property="DC.date.issued" content="2019-01-21 13:00:21 +0100 +0100"><meta name=theme-color content="#d33a2c"><meta property="fb:pages" content="45576747489"><meta name=google-site-verification content="X5sd8PEDJqYLSR98RKgSozn-0RNpknXFlGoA-UXe5K0"><link rel=icon href=/images/favicon/favicon.ico><link rel=icon href=/images/favicon/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/images/favicon/apple-touch-icon.png><link rel=manifest href=/manifest.json></head><body data-instant-whitelist class="no-js articlepage"><div data-handler=PreLoad id=top></div><a href=#main class=skip-main>Skip to main content</a>
<a href=#all-topics class=skip-main>Jump to all topics</a>
<a href=#article__start class=skip-main>Start reading the article</a>
<a href=/articles/ class=skip-main>Jump to list of all articles</a><header class="global-header header"><div class=logo><a href=/ title="&larr; Back to the homepage"><picture><source media="(max-width: 1450px)" srcset=/images/logo.svg><source media="(min-width: 1450px)" srcset=/images/logo--full.svg><img src=/images/logo/logo.svg loading=eager decoding=async alt="Smashing Magazine"></picture></a></div><nav class=main-nav><ul class=main-nav__primary><li class="nav-item nav-item-1 nav-item--active"><a data-instant class=nav-item-link href=/articles/>Articles</a></li><li class="nav-item nav-item-2"><a data-instant class=nav-item-link href=/guides/>Guides</a></li><li class="nav-item nav-item-3"><a data-instant class=nav-item-link href=/printed-books/>Books</a></li><li class="nav-item nav-item-4"><a data-instant class=nav-item-link href=/events/>Events</a></li><li class="nav-item nav-item-5"><a data-instant class=nav-item-link href=/membership/>Membership</a></li><li class="nav-item nav-item-6"><a data-instant class=nav-item-link href=/jobs/>Job Board</a></li><li class="nav-item nav-item-7"><a data-instant class=nav-item-link href=/the-smashing-newsletter/>Newsletter</a></li><li class="nav-item nav-item-8"><a class=nav-item-link href=https://podcast.smashingmagazine.com>Podcasts</a></li><li class="nav-item nav-item-9"><a class=nav-item-link href=/write-for-us/>Write for us</a></li><li class="nav-item nav-item-10"><a class=nav-item-link href=mailto:advertising@smashingmagazine.com>Advertise with us</a></li><li role=none class="nav-item main-nav-more-item"><button class=main-nav-more-item__button type=button aria-haspopup=true aria-expanded=false>
<span class=menu-text--lg>More</span>
<span class=menu-text--lg--close>Less</span>
<span class=menu-text--sm>Menu</span>
<span class=menu-text--sm--close>Less</span></button></li></ul></nav><nav class=secondary-nav><ul class=main-nav__secondary><li class="nav-item nav-item-1 nav-item--active"><a data-instant class=nav-item-link href=/articles/>Articles</a></li><li class="nav-item nav-item-2"><a data-instant class=nav-item-link href=/guides/>Guides</a></li><li class="nav-item nav-item-3"><a data-instant class=nav-item-link href=/printed-books/>Books</a></li><li class="nav-item nav-item-4"><a data-instant class=nav-item-link href=/events/>Events</a></li><li class="nav-item nav-item-5"><a data-instant class=nav-item-link href=/membership/>Membership</a></li><li class="nav-item nav-item-6"><a data-instant class=nav-item-link href=/jobs/>Job Board</a></li><li class="nav-item nav-item-7"><a data-instant class=nav-item-link href=/the-smashing-newsletter/>Newsletter</a></li><li class="nav-item nav-item-8"><a class=nav-item-link href=https://podcast.smashingmagazine.com>Podcasts</a></li><li class="nav-item nav-item-9"><a class=nav-item-link href=/write-for-us/>Write for us</a></li><li class="nav-item nav-item-10"><a class=nav-item-link href=mailto:advertising@smashingmagazine.com>Advertise with us</a></li></ul></nav><div class=search><form data-handler=Search id=js-search-form class=search-form method=get action="https://www.google.com/webhp?q=site:smashingmagazine.com"><div class=search-input-wrapper><input class="input search-input" inputmode=search type=search name=q id=js-search-input autocomplete=off placeholder="Search articles..." aria-label="Search articles">
<input type=hidden name=sitesearch value=smashingmagazine.com>
<a id=js-search-clear-button class=search-clear-button tabindex=-1 role=button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.35 15.36" width="16" height="16" tabind="-1"><title>Clear Search</title><path fill="#e33b2a" d="M8.38 11.41c-.5-.5-.78-.52-1.33.0L4 14.49c-1.18 1.18-1.7 1.18-3-.16s-1.18-2-.18-3L4 8.14A.69.69.0 003.93 7l-3-3c-1-1-1.13-1.81.0-3s1.9-1.21 3.13.0L7 4a.66.66.0 001.11.0c.63-.65 2.49-2.51 3.28-3.35a1.46 1.46.0 012.3-.15c.24.24.47.42.89.84.86.86.94 1.57.05 2.46l-3.27 3.26c-.36.34-.52.58-.16.94l3.27 3.27c1.1 1.1 1.23 1.7.05 2.88l-.58.58a1.59 1.59.0 01-2.46-.21z"/></svg></a></div><input type=submit class="search-button btn" name=submit value=Search id=js-search-submit></form></div></header><script src=/js/nav-v2.js fetchpriority=high defer></script><div><div data-component=SearchResults class=search-results data-lite=true></div></div><header class=subnav__header id=all-topics><nav class=subnav role=navigation><ul class="subnav__primary subnav__tags flex"><li class=subnav-item><a data-instant class=nav-item-link href=/category/accessibility/>Accessibility</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/ux/>UX</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/css/>CSS</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/javascript/>JavaScript</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/performance/>Performance</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/design/>Design</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/figma/>Figma</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/wallpapers/>Wallpapers</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/react/>React</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/vue/>Vue</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/round-ups/>Round-Ups</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/web-design/>Web Design</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/guides/>Guides</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/business/>Business</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/career/>Career</a></li><li class=subnav-item><a data-instant class=nav-item-link href=/category/privacy/>Privacy</a></li><li role=none class="subnav-item subnav-more-item"><a class=subnav-more-item__button href=/articles/><span class=menu-text>Jump to all articles ↬</span></a></li></ul></nav></header><main id=main tabindex=-1><script id=gotell type=application/json>{"created_at":"2019-01-21T13:00:21+01:00"}</script><article class="block article" role=main><div class="container article-container"><div class=row><div class="col-12 article__content" id=article__content><div class=c-garfield-the-cat><div class=c-garfield-header><header class=article-header><ul class=article-header--meta><li class="article-header--meta-item article-header--meta-item__author"><a class=author-post__author-title href=/author/leonardolosoviz/>Leonardo Losoviz</a></li><li class="article-header--meta-item article-header--meta-item__date"><time class=article-header--date datetime=2019-01-21>Jan 21, 2019</time></li><li class="article-header--meta-item article-header--meta-comments"><span class=article-header--comments><a href=#comments-introducing-component-based-api><span data-component=CommentsCount data-insert=true data-thread=/2019/01/introducing-component-based-api/ data-article=articles/2019-01-21-introducing-component-based-api.md>0 <span class=comment-count>comments</span></span></a></span></li></ul><h1 class=article-header--title>Introducing The Component-Based API</h1></header></div><ul class="meta-box meta-box--article"><li class="meta-box--item meta-box--published">37 min read</li><li class="meta-box--item meta-box--tags"><a href=/category/api>API</a>,
<a href=/category/graphql>GraphQL</a>,
<a href=/category/javascript>JavaScript</a>,
<a href=/category/performance>Performance</a></li><li class="meta-box--item meta-box--share">Share on <a rel=nofollow href="https://TwItTeR.CoM/intent/tweet?text=Introducing%20The%20Component-Based%20API&url=https%3A%2F%2Fwww.smashingmagazine.com%2f2019%2f01%2fintroducing-component-based-api%2f&via=smashingmag">Twitter</a>,&nbsp;<a rel=nofollow href="/api/ball?uri=//www.linkedin.com/shareArticle?url=https://www.smashingmagazine.com%2f2019%2f01%2fintroducing-component-based-api%2f&title=Introducing%20The%20Component-Based%20API">LinkedIn</a></li></ul><div class=c-garfield-aside--meta><div class=l-author-bio><div class="mobw-40 mobh-40 w-48 h-48 rounded-3xl bio-image__large mb-5 mr-3"><figure role=presentation class=bio-image><a href=/author/leonardolosoviz/ class=bio-image-link><div class=bio-image-wrapper><picture><source type=image/avif srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAADjYAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAMgAAADIAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAADj5tZGF0EgAKChgd8fH7IEBAMIAypRwSEAJFNMFJpgohRKOnWhhSCuICc7FCrr3X+wijsDXvd6fhWpDdC7FN/8uo8WdWfl+7UIQzpcB5+gChzH0kB1QTOqWKdWzveX93uDg+a88GFYShDpxxs3qbI5Tmd5+gdhyZ53TJNh4XgDEoDO+j9g7GjRw7+NJBFDJys3gsxatfPzUB5DR+dmFyr8Vzl9CCy2SRAbf7ecmiWZsUPh5uDb1pCSMESGaMGzDorrNISAQmlAT0CusvMFg2fhRyySySniFJtYyiqFoiqAE/yB/vI6+ucOda04cq1tWmiTpfQ0ZbEQlKsbTdo5unXtTCHlyyWFGoLXdQnSdOA9KG19zjvPTLureopf2h6CgC1D4YB/ZtF9bzt1emYm2+Cq7vnrM4Q2mLl8LjWWatktDvQGiuvJM2BYn0XS5wNN/Dc0aeIP3AHZbVDFN6ytFnkZXQf47FSDRSEeAwGG6GZ3Vjy5LcDwfhPpUztt0/JhepfMu53G1teeGxLVMt1ggB5CIV7vqkG3pn4XpEmkJl/rQSrRz/6K7CkdnbBxls7OKqCgaln9VQ0UoV6Vmyqex9FmIW+7X/11cB/+VDG+ogm6ZfFWDQYUy+rqbUIpdY08V9N9JkqkHYiVSG0UlIiUwWs/PoZ7vFtxw7oqQ0STKu4VcIzPhwuG66rg/G/hgPnFM367HE5QVzsosdv9fZXLxv53gf2JvCCHULc055Pw7onnK0ys8bW3GhhoOoiSKF7w7zQNBa6wKD60U6V76tDxeX7eE3cXE061JLkFZ0BXFiu9Nqc7SEkptnLXiWMzsdS4q6WJl2aGWM/OI+A/5o48Nrt5HomYtcT5haL1Nip4MYcumNcUoqn0UUzcRwdM+E7NfHg1iGDXMqwSuwudVm2owVVG9QWvbDb3grJsy2tRI7GGD1hgWSh71Y5l5/VsF0vfi8DW6/Dq8X85tCMWmSk2sG1hzXjKqoQWHiRxEm/XiF3bvw9PDiOzIHyL+Fm4afk+GtW4dTL1PTJUOlxQTRtEtMyMWaEFJBzXjcHHC5oCzvYXwu3uBz0Br71q1h3nNxDxdZYsXq/xvhxFzJwQEJm82ZyzGJGtjVCdsLcWDZb7bgy7ClAT1a+qUXKiymfiXji+l/iAi2M7RsvsGxUu+T7QK/8Hznl4Uoo4h9qU2UY+kLRrIDKocIjNMHAlzbZt1Gm2eGfY7DFQ+FUfdF8fogX+CENXFA0/K5KgUJKrjFEDVrEziJIOhhcg/3NFeYQBUZUShd8bOPZ0/mlR/3Xg/3Cgb9yp3GCVzHuQ346zx9nCJfcqhBLo+09DrO3Mi9cw7QFfEUY3puTVOqLa6riK/V6JI7SqV8OQRkK/C2j0/IJeitZrI5Ya7JNa+3CT1ycxSnt8AG90o1HfUGLsfaqY9e3NBJR3IeN5w9wAUNh0FtVLgseQDFgqs0S9/uwVqEAFvnanuEsptccA5K8BcnUix9hsmpmnvKK28xjHXj0wm9p9j7GWTlkgEXBH1l5VLx/AftwYkO5B7k2aduVkRR3IF6Ej3p00x4ikNP1RjijZnT9ZiGoUeftHTjgBbuTXfBPtt6R5w29WcVzqgnfKImDNrQ6VNRsbqccuP4aG7Mv5Myo3wLBpqg0mj+WKoXH/EKAEHXsn96td1ydhdvnSgexsoJv+z6umQI7OwmERXY3f/YMQsxZqZK803ndg0+GRqjlr3E9lMP6WccuzbrvEs8KlVsUPbvPpdxRTaU8gvEcqG2sLrvuDDBB1E6tpssame/WDtjJ0hsJw05TKM3m/LdXG70F3eIp1IAQ/UpUUWfCJtsGHsJ+Yjb019/Bd0DUJpZkvI3JMpqhH0kHqtdmF4BVyxSZkLg1cIXKTbx4k5u4vZ05koil9yPegTa/PiowVFi3BgTlpo1iTkMrKSd3TSBLSICRhg4iJMtwpTbxqKu9mNG9vvpKl1vow6fAJVFagVtTgU56GF1E6N0PhPHZua11hvLBcvvOy2X4VMDveq/Mx5U9jzM570dhsHJ3MfM2AMjd7g2fc+QGWKxGb3rjK2yt+kj19eTGQI/EviexOiu5xKeI1s1glTyuCNukwWv05SwMs0QZ3xDGsPaLrAmO1x53XoYpxnQ9GPwLepWJbIVGCvqe59PXnswqHi7vSuFdowX6UyoNHdHOFOiu8r08rPHOwU48LoVnl5+j84SHzwk29VWig2p5OnZC6SCmKXdoRH3wFP4VpJUQW5AfbuxZbbZZt9SmKqO0ZtQrNOPpLaQ5vZlNEuUospTkoMbJYnQ4uHvndXJhvV07j8ndOnGXgBv3tITBtACAWIt8kTd428zhM9Krh7iAgcnWCMxxBOqemlroSGAtUmGmqA68rdvlp1DXsDOLfCKVaRg104wnIOQ2ZAaKdZbaipABrzuZVyXAiywzRgXTcDYnl5rTahkI5arKPRoBwubt9QnD4qqr2cze0xFMJ0+CXkuewk+GyS8oVs3A00YH5rFYdKLDGhYsxXKxCGK0/Av3vKPBmzw6iDfeEPQybD8gbekrA1Qia8/YUkG6xmqFiI4eBLqkTYmTl8VbILadkWF/aAUVWG5oIp3ZNK6YH2eDbc+Btfa860/yU5cH2TZ9aWm4Qyrn/PJI9ryIBsaJ70B7Zftqo19+bXzomeg2GVhkqpRLzGuwyseP+0SgXlibnUUw7fnj239YENwlngqUFf6n/yZ4qWzcPdOZrrPsAHEC4QrAvY/wjBa8BjctJjbFb4i4rOzDc1iLlRYIulk/cXbxBx2j47s9VqiffwTrQKcl0QyQeyB4tQj/AEPENNfTLLlGY+n6RlDDs5hSmFkX7tFF/lHPuLOjmxV7wBKWMC+IWFUqm9m5GQzSnWVTdH4+QDUq+sgVcKTr/9eUzv0hyYo0IluB5dI0lkXE772K7LLTASnz4tLDZXQNonqIA6WLLm5a+34FnJNrzUPBGH1Wg504seQzGtT29tgj3w8eAJZJvulVaUeXu02QcBAdYVW9OdS6WkekXLeHYleiFjPYhbty1Pb4IRi4b+pG4udmJvsvt0Ez6YB1PvYN1YxbIyqqEQD/QV+OLaWSsKj5N+XQq4roUtHoyy0G+l5/ZHj6ArZ85cBhCTojW+/bjeSd80SIdE8zTaUfCHCBlWQwbs+yO9hfzfzJ7/+jsbZQrIUNLFGU8Db3GnYAggc4M6xcuwQ4IEL/YnArVOjTXHxJkzgw+M8kaoOZdd81hoLAXlFl6u2VcxQADD1bU630AJCoNHExqAIXWz0xmZucl30UGLpy28684aLRacZ/UuA8ehKCeh/bxYBSU8oO1J5+xzF+UViMXgMtCJHKo829PidN4OOtMmyTzwAjAGRmZUp3OsX/OKrR7oT6VcCyuiLiXBhmdHyR8/IowJ02P11RNspp671EAOGp54pM7zR0Uatefl2SPZmEDsIv1kpPGBWC5zxy3wKQFNHcf1ExcAcFkQPV3LJ4gOmayiUwDUEv/zpcxUTj27xTBjXYAXxH8aX1vKJeeH1YukeciolaeV1cq8vyUbdGY6nYegD79I4P61KorW9nYIs7NEadQthClTy4p495mhokD2qRI3GXq4igKS4/jlTCKPX1AAULoJBd1hrNVC9P1dpBEw3Qu4uL8wG4KcS5aZ25EFpku6XxpmLawyo1480ryyStZW/u6ik3rZwVWtehFy47Tw7xmuLI1aCZKhi44KsSyubee5fK6VH6GbbjEvr9pZu1/TXnyuObpOWYmDj/muv0RJOxhzHNA/iavmM9QDXZ3xoPtlsoMzhLHu9wcNWZYWHZT/mBgtuJgHM7QEHSTICF+P+9HVAsYcCof+NaBKg6/2xU+/c2wCQQakQ2wmDxkBaNmvNdihhnDzJLW2MpT2TDx4Q15IZObaqwUkVTlBCHMTu6Nwnoi6IpwZw7haMa0ll7/4cjH8yRZN+xHyC4NoxkF3URggc900zUezrrXs+TpyiRYHXC0bpK2tizMNwQI7VCtRixHB7DTBy4aSw1W/OlvI5RVC9d8Yb7X0oSqwWbKglt0b9Eqd0bs2bR1jZgKaqgSrBvORrqcZr8diTxUviBqWxuwdLHAV+5dQvZy5tmW123gR1Vh/T4HObTDBbj4Ef0X3fi6EoGEKVu4VYE6E1wsHuRMmmtl0PWqOeufgQLtF10ArsKQRWqRfrrcDmXBO2yY9GDJk9ty7reQ6hPxdSF1ol0P8ComxvPYXc9eUtFWeWrneQ9+2j0QtxYBL4jsdJn6bMUWu5akyabEixqe6ShWWCItp5Z9xqMqwVFmo56NTwIPHvN9dFGrYR+f1Ex3o3F7LYt2Snvjqo4f/H+TCj8ZzBjp4J4tigbOkOY7d+ar75ZpNh6flTfDjuUWhj7Ak35hBz/e9nqPVjEWxFzpE9Cic1X79icsapGMM4o4RzWbAolTvVhMFWtjPTYsUMyQ/jK1fu0HTXhR1x9wH00Mml58ZBcExahjrc/ZQGNjWwkOYjhfC9Q6meuitlG4M6X/GFvvgqFUgS7QQXCKmmLDdPJP92kqDAkfMX08jhQ5/hnvfhxbVWikSEMfyotkgkiUDq1WX83yX1i3NMFV5w/fnYXKJ6k2WewI+Bk4ehWYBSGDCHHM/Vrhe+XlJGD8f5sg3Hy5JtMNaDnkq1AC4ErYrLcYPr20RQ7Z1Re2oOB9rZ8Tf7g0nnGm0kn6wobcjTdU14UX09Lh8A8ngt2/qWsP3V94tgxTKnmheQby9JjxqbWFfM/uwZxAaG4Ya6QRqAja/GDrB3qAo9PDwKNlXbJQNBz/+I6qSDD2xXqWj2xZS4R5rtAokpkgRkXPVLulsePcifDxd8nOOU8itmKz+GgexwpNO13EmsVm0/CIv7RIg="><img class=bio-image-image src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3f7cfd44-56a1-44a0-bd84-47ad9a11cb4e/leonardo-losoviz-portrait.jpg loading=eager decoding=async fetchpriority=high width=100 height=100 alt="Leonardo Losoviz"></picture></div></a></figure></div><div class="l-author-bio-content author__desc" id=author__desc><h4 class=author__desc__title>About The Author</h4><p>Leonardo Losoviz is a freelance developer and writer, with an ongoing quest to integrate innovative paradigms (Serverless PHP, server-side components, GraphQL) …
<a href=/author/leonardolosoviz/ class=show-more-link>More about
Leonardo&nbsp;↬</a></p></div></div><div class=c-garfield__nl><h4 class=h2>Email Newsletter</h4><section class=nl-box__form><form action="//smashingmagazine.us1.list-manage.com/subscribe/post?u=16b832d9ad4b28edf261f34df&id=a1666656e0" method=post><div class=nl-box__wrapper><label for=mce-EMAIL-hp class=sr-only>Your (smashing) email</label><div class=nl-box__group><input type=email name=EMAIL class=nl-box__form--email id=mce-EMAIL-hp placeholder="Your email">
<input type=submit value=Meow! name=subscribe class=nl-box__form--button></div></div></form></section><p class=nl-box__desc><em><a href=https://www.smashingmagazine.com/the-smashing-newsletter/>Weekly tips on front-end & UX</a>.<br>Trusted by 176.000 folks.</em></p></div></div><div class=c-garfield-native-panel__right><div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience=non-subscriber data-remove=true data-rendered=true data-amount=3><ul class=bnnr-list><li><a href=https://bit.ly/51degrees_may_1><img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/384e7b41-99fa-4d6c-aea5-dd348816bf49/51degrees1.png loading=lazy width=300 height=250 alt="Filter spam from your website analytics">
<em class=ad__desc>Filter spam from your website analytics</em></a></li></ul></div></div><div class=c-garfield-native-panel><div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience=non-subscriber data-remove=true data-rendered=true data-amount=3><ul class=bnnr-list><li><a href=https://bit.ly/northwestern_uni_winter><img src=https://res.cloudinary.com/indysigner/image/upload/v1601395101/ads/NWU_Oct.gif loading=lazy width=180 height=150 alt="In-demand skills with Northwestern online">
<em class=ad__desc>Build in-demand skills like UX, UI and HCI — Northwestern online MS in Info. Design & Strategy</em></a></li><li><a href=https://www.smashingmagazine.com/contact/><picture><source type=image/avif srcset=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/0e85aad3-9649-4f1a-800c-dcd6b6d07021/smashing-friskies-300x250.avif><img src=https://www.smashingmagazine.com/images/banners/smashing-friskies-300x250.png loading=lazy width=300 height=250 alt="Boost your skills online, with our friendly online workshops on front-end and design."></picture>
<em class=ad__desc>Advertise on Smashing Magazine</em></a></li></ul></div></div><div class="c-garfield-native-panel c-garfield-native-panel__below"><div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience=non-subscriber data-remove=true data-rendered=true data-amount=3><ul class=bnnr-list><li><a href=https://bit.ly/memberful_may><img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/752075a1-771f-4249-9782-603fda763d0f/memberful-dev.png loading=lazy width=300 height=250 alt="Top Membership Software">
<em class=ad__desc>Top Membership Software</em></a></li><li><a href=https://smashingconf.com/online-workshops/workshops/yuval-keshtcher/><picture><source type=image/avif srcset=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/619be64e-ed29-4767-ab42-48c64d8929f6/yuval-keshtcher.avif><img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/1b1bfb4b-05fd-4045-98a8-04efc556ef5b/yuval-keshtcher.png loading=lazy width=300 height=250 alt="Boost your skills online, with our friendly online workshops on front-end and design."></picture>
<em class=ad__desc>The Fundamentals of UX Writing Workshop</em></a></li></ul></div></div><div class="c-garfield-native-panel c-garfield-native-panel__end"><div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience=non-subscriber data-remove=true data-rendered=true data-amount=3><ul class=bnnr-list><li><a href=https://smart-interface-design-patterns.com><picture><source type=image/avif srcset=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c108c007-2de1-4eb6-b66d-ab0e05177c20/smart-interface-design-patterns-opt.avif><img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/06044161-765b-4a9c-8521-b7a86eb1795f/smart-interface-design-patterns-opt.png loading=lazy width=300 height=250 alt="Boost your skills online, with our friendly online workshops on front-end and design."></picture>
<em class=ad__desc>Smart Interface Design Patterns, with Vitaly Friedman</em></a></li><li><a href=https://bit.ly/noble_desktop><img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ce993ab-60a3-494f-8090-8477646680d4/noble-webinars.png loading=lazy width=300 height=250 alt="Learn design, coding, video, motion graphics & more.">
<em class=ad__desc>Learn design, coding, video, motion graphics & more.</em></a></li></ul></div></div><div class=c-garfield-summary id=article__start><section aria-label="quick summary" class=article__summary><span class=summary__heading>Quick summary&nbsp;↬</span>
In the world of APIs, GraphQL has lately overshadowed REST due to its ability to query and retrieve all required data in a single request. In this article, I will describe a different type of API, based around components, which takes a step further the amount of data it can fetch from a single request.</section></div><p><em>This article was updated on January 31, 2019 to react to readers’ feedback. The author has added <a href=#update-31st-jan-custom-querying-capabilities>custom-querying capabilities</a> to the component-based API and describes how it works</em>.</p><p>An API is the communication channel for an application to load data from the server. In the world of APIs, REST has been the more established methodology, but has lately been <a href=https://2018.stateofjs.com/data-layer/overview/>overshadowed by GraphQL</a>, which <a href=https://medium.freecodecamp.org/rest-apis-are-rest-in-peace-apis-long-live-graphql-d412e559d8e4>offers important advantages over REST</a>. Whereas REST requires multiple HTTP requests to fetch a set of data to render a component, GraphQL can query and retrieve such data in a single request, and the response will be exactly what is required, without over or under-fetching data as typically happens in REST.</p><p>In this article, I will describe another way of fetching data which I have designed and called “PoP” (and open sourced <a href=https://github.com/leoloso/PoP>here</a>), which expands on the idea of fetching data for several entities in a single request introduced by GraphQL and takes it a step further, i.e. while REST fetches the data for one resource, and GraphQL fetches the data for all resources in one component, the component-based API can fetch the data for all resources from all components in one page.</p><p>Using a component-based API makes most sense when the website is itself built using components, i.e. when the webpage is iteratively composed of components wrapping other components until, at the very top, we obtain a single component that represents the page. For instance, <a href=https://demo.getpop.org/en/posts/a-lovely-tango/>the webpage</a> shown in the image below is built with components, which are outlined with squares:</p><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg sizes=100vw alt="Screenshot of a component-based webpage"></a><figcaption class=op-vertical-bottom>The page is a component wrapping components wrapping components, as shown by the squares. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5746b3e0-4c4e-488a-964a-f087e297388f/everything-is-a-module.jpg>Large preview</a>)</figcaption></figure><p>A component-based API is able to make a single request to the server by requesting the data for all of the resources in each component (as well as for all of the components in the page) which is accomplished by keeping the relationships among components in the API structure itself.</p><p>Among others, this structure offers the following several benefits:</p><ul><li>A page with many components will trigger only one request instead of many;</li><li>Data shared across components can be fetched only once from the DB and printed only once in the response;</li><li>It can greatly reduce &mdash; even completely remove &mdash; the need for a data store.</li></ul><p>We will explore these in details throughout the article, but first, let’s explore what components actually are and how we can build a site based on such components, and finally, explore how a component-based API works.</p><p><strong>Recommended reading</strong>: <em><a href=https://www.smashingmagazine.com/2018/01/graphql-primer-new-api-part-1/>A GraphQL Primer: Why We Need A New Kind Of API</a></em></p><div data-audience=non-subscriber data-remove=true class=feature-panel-container><span class=feature-panel__desc>More after jump! Continue reading below&nbsp;&darr;</span><aside class=feature-panel><div class=feature-panel-left-col><div class=feature-panel-description><p>Meet <strong><a data-instant href=/printed-books/typescript-in-50-lessons/>“TypeScript in 50 Lessons”</a></strong>, our shiny new guide to TypeScript. With detailed <strong>code walkthroughs</strong>, hands-on examples and common gotchas — all broken down into short, manageable lessons. For developers who know enough <strong>JavaScript</strong> to be dangerous.</p><a data-instant href=/printed-books/typescript-in-50-lessons/ class="btn btn--green btn--large">Jump to table of contents&nbsp;↬</a></div></div><div class=feature-panel-right-col><a data-instant href=/printed-books/typescript-in-50-lessons/ class=feature-panel-image-link><div class=feature-panel-image><picture><source type=image/avif srcset=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/2732dfe9-e1ee-41c3-871a-6252aeda741c/typescript-panel.avif><img loading=lazy decoding=async class=feature-panel-image-img src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2f2c6d6-4e85-449a-99f5-58bd053bc846/typescript-shop-cover-opt.png alt="Feature Panel" width=481 height=698></picture></div></a></div></aside></div><h2 id=building-a-site-through-components>Building A Site Through Components</h2><p>A component is simply a set of pieces of HTML, JavaScript and CSS code put all together to create an autonomous entity. This can then wrap other components to create more complex structures, and be itself wrapped by other components, too. A component has a purpose, which can range from something very basic (such as a link or a button) to something very elaborate (such as a carousel or a drag-and-drop image uploader). Components are most useful when they are generic and enable customization through injected properties (or “props”), so that they can serve a wide array of use cases. In the utmost case, the site itself becomes a component.</p><p>The term “component” is often used to refer both to functionality and design. For instance, concerning functionality, JavaScript frameworks such as <a href=https://reactjs.org/>React</a> or <a href=https://vuejs.org>Vue</a> allow to create client-side components, which are able to self-render (for instance, after the API fetches their required data), and use props to set configuration values on their wrapped components, enabling code reusability. Concerning design, <a href=https://getbootstrap.com/>Bootstrap</a> has standardized how websites look and feel through its front-end component library, and it has become a healthy trend for teams to create design systems to maintain their websites, which allows the different team members (designers and developers, but also marketers and salesmen) to speak a unified language and express a consistent identity.</p><p>Componentizing a site then is a very sensible way to make the website become more maintainable. Sites using JavaScript frameworks such as React and Vue are already component-based (at least on the client-side). Using a component library like Bootstrap doesn’t necessarily make the site be component-based (it could be a big blob of HTML), however, it incorporates the concept of reusable elements for the user interface.</p><p>If the site <em>is</em> a big blob of HTML, for us to componentize it we must break the layout into a series of recurring patterns, for which we must identify and catalogue sections on the page based on their similarity of functionality and styles, and break these sections down into layers, as granular as possible, attempting to have each layer be focused on a single goal or action, and also trying to match common layers across different sections.</p><p><strong>Note</strong>: <em>Brad Frost’s “<a href=https://bradfrost.com/blog/post/atomic-web-design/>Atomic Design</a>” is a great methodology for identifying these common patterns and building a reusable design system.</em></p><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c5ac26f8-9fe4-4cca-a84e-aedd1cb07cf1/atomic-design.png><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e0836d27-9497-4a86-81eb-8308b55f5bbc/atomic-design-wide.png sizes=100vw alt="Identifying elements to componentize a webpage"></a><figcaption class=op-vertical-bottom>Brad Frost identifies five distinct levels in atomic design for creating design systems. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c5ac26f8-9fe4-4cca-a84e-aedd1cb07cf1/atomic-design.png>Large preview</a>)</figcaption></figure><p>Hence, building a site through components is akin to playing with LEGO. Each component is either an atomic functionality, a composition of other components, or a combination of the two.</p><p>As shown below, a basic component (an avatar) is iteratively composed by other components until obtaining the webpage at the top:</p><figure><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ff198c31-19eb-4e9e-bdfb-7ff79bf7f40b/module-sequence.gif><img loading=lazy decoding=async src=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5780f521-21f1-47d7-854c-08c9fe8d3e1e/module-sequence-800w.gif width='“800"' height alt="Sequence of components creating a webpage"></a><figcaption>Sequence of components produced, from an avatar all the way up to the webpage. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ff198c31-19eb-4e9e-bdfb-7ff79bf7f40b/module-sequence.gif>Large preview</a>)</figcaption></figure><h2 id=the-component-based-api-specification>The Component-Based API Specification</h2><p>For the component-based API I have designed, a component is called a &ldquo;module&rdquo;, so from now on the terms “component” and “module” are used interchangeably.</p><p>The relationship of all modules wrapping each other, from the top-most module all the way down to the last level, is called the “component hierarchy”. This relationship can be expressed through an associative array (an array of key => property) on the server-side, in which each module states its name as the key attribute and its inner modules under the property <code>modules</code>. The API then simply encodes this array as a JSON object for consumption:</p><pre><code class=language-javascript>// Component hierarchy on server-side, e.g. through PHP:
[
  "top-module" &#61;&#62; [
    "modules" &#61;&#62; [
      "module-level1" &#61;&#62; [
        "modules" &#61;&#62; [
          "module-level11" &#61;&#62; [
            "modules" &#61;&#62; [...]
          ],
          "module-level12" &#61;&#62; [
            "modules" &#61;&#62; [
              "module-level121" &#61;&#62; [
                "modules" &#61;&#62; [...]
              ]
            ]
          ]
        ]
      ],
      "module-level2" &#61;&#62; [
        "modules" &#61;&#62; [
          "module-level21" &#61;&#62; [
            "modules" &#61;&#62; [...]
          ]
        ]
      ]
    ]
  ]
]

// Component hierarchy encoded as JSON:
{
  "top-module": {
    modules: {
      "module-level1": {
        modules: {
          "module-level11": {
            ...
          },
          "module-level12": {
            modules: {
              "module-level121": {
                ...
              }
            }
          }
        }
      },
      "module-level2": {
        modules: {
          "module-level21": {
            ...
          }
        }
      }
    }
  }
}
</code></pre><p>The relationship among modules is defined on a strictly top-down fashion: a module wraps other modules and knows who they are, but it doesn’t know &mdash; and doesn’t care &mdash; which modules are wrapping him.</p><p>For instance, in the JSON code above, module <code>module-level1</code> knows it wraps modules <code>module-level11</code> and <code>module-level12</code>, and, transitively, it also knows it wraps <code>module-level121</code>; but module <code>module-level11</code> doesn’t care who is wrapping it, consequently is unaware of <code>module-level1</code>.</p><p>Having the component-based structure, we can now add the actual information required by each module, which is categorized into either settings (such as configuration values and other properties) and data (such as the IDs of the queried database objects and other properties), and placed accordingly under entries <code>modulesettings</code> and <code>moduledata</code>:</p><pre><code class=language-javascript>{
  modulesettings: {
    "top-module": {
      configuration: {...},
      ...,
      modules: {
        "module-level1": {
          configuration: {...},
          ...,
          modules: {
            "module-level11": {
              repeat...
            },
            "module-level12": {
              configuration: {...},
              ...,
              modules: {
                "module-level121": {
                  repeat...
                }
              }
            }
          }
        },
        "module-level2": {
          configuration: {...},
          ...,
          modules: {
            "module-level21": {
              repeat...
            }
          }
        }
      }
    }
  },
  moduledata: {
    "top-module": {
      dbobjectids: [...],
      ...,
      modules: {
        "module-level1": {
          dbobjectids: [...],
          ...,
          modules: {
            "module-level11": {
              repeat...
            },
            "module-level12": {
              dbobjectids: [...],
              ...,
              modules: {
                "module-level121": {
                  repeat...
                }
              }
            }
          }
        },
        "module-level2": {
          dbobjectids: [...],
          ...,
          modules: {
            "module-level21": {
              repeat...
            }
          }
        }
      }
    }
  }
}
</code></pre><p>Following, the API will add the database object data. This information is not placed under each module, but under a shared section called <code>databases</code>, to avoid duplicating information when two or more different modules fetch the same objects from the database.</p><p>In addition, the API represents the database object data in a relational manner, to avoid duplicating information when two or more different database objects are related to a common object (such as two posts having the same author). In other words, database object data is normalized.</p><p><strong>Recommended reading</strong>: <em><a href=https://www.smashingmagazine.com/2018/05/building-serverless-contact-form-static-website/>Building A Serverless Contact Form For Your Static Site</a></em></p><div class=sponsors__lead-place></div><p>The structure is a dictionary, organized under each object type first and object ID second, from which we can obtain the object properties:</p><pre><code class=language-javascript>{
  databases: {
    primary: {
      dbobject_type: {
        dbobject_id: {
          property: ...,
          ...
        },
        ...
      },
      ...
    }
  }
}
</code></pre><p>This JSON object is already the response from the component-based API. Its format is a specification all by itself: As long as the server returns the JSON response in its required format, the client can consume the API independently of how it is implemented. Hence, the API can be implemented on any language (which is one of the beauties of GraphQL: being a specification and not an actual implementation has enabled it to become available in a myriad of languages.)</p><p><strong>Note</strong>: <em>In an upcoming article, I will describe my implementation of the component-based API in PHP (which is the one available <a href=https://github.com/leoloso/PoP>in the repo</a>).</em></p><h4 id=api-response-example>API response example</h4><p>For instance, the API response below contains a component hierarchy with two modules, <code>page</code> => <code>post-feed</code>, where module <code>post-feed</code> fetches blog posts. Please notice the following:</p><ul><li>Each module knows which are its queried objects from property <code>dbobjectids</code> (IDs <code>4</code> and <code>9</code> for the blog posts)</li><li>Each module knows the object type for its queried objects from property <code>dbkeys</code> (each post’s data is found under <code>posts</code>, and the post’s author data, corresponding to the author with the ID given under the post’s property <code>author</code>, is found under <code>users</code>)</li><li>Because the database object data is relational, property <code>author</code> contains the ID to the author object instead of printing the author data directly.</li></ul><pre><code class=language-javascript>{
  moduledata: {
    "page": {
      modules: {
        "post-feed": {
          dbobjectids: [4, 9]
        }
      }
    }
  },
  modulesettings: {
    "page": {
      modules: {
        "post-feed": {
          dbkeys: {
            id: "posts",
            author: "users"
          }
        }
      }
    }
  },
  databases: {
    primary: {
      posts: {
        4: {
          title: "Hello World!",
          author: 7
        },
        9: {
          title: "Everything fine?",
          author: 7
        }
      },
      users: {
        7: {
          name: "Leo"
        }
      }
    }
  }
}
</code></pre><h2 id=differences-fetching-data-from-resource-based-schema-based-and-component-based-apis>Differences Fetching Data From Resource-Based, Schema-Based And Component-Based APIs</h2><p>Let’s see how a component-based API such as PoP compares, when fetching data, to a resource-based API such as REST, and to a schema-based API such as GraphQL.</p><p>Let’s say IMDB has a page with two components which need to fetch data: “Featured director” (showing a description of George Lucas and a list of his films) and “Films recommended for you” (showing films such as <em>Star Wars: Episode I &mdash; The Phantom Menace</em> and <em>The Terminator</em>). It could look like this:</p><figure><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg sizes=100vw alt="Next-generation IMDB"></a><figcaption class=op-vertical-bottom>Components 'Featured director' and 'Films recommended for you' for the next-generation IMDB site. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ac5878a8-f09d-445d-9df0-da399906a16c/imdb-example.jpg>Large preview</a>)</figcaption></figure><p>Let’s see how many requests are needed to fetch the data through each API method. For this example, the “Featured director” component brings one result (“George Lucas”), from which it retrieves two films (<em>Star Wars: Episode I &mdash; The Phantom Menace</em> and <em>Star Wars: Episode II &mdash; Attack of the Clones</em>), and for each film two actors (“Ewan McGregor” and “Natalie Portman” for the first film, and “Natalie Portman” and “Hayden Christensen” for the second film). The component “Films recommended for you” brings two results (<em>Star Wars: Episode I &mdash; The Phantom Menace</em> and <em>The Terminator</em>), and then fetches their directors (“George Lucas” and “James Cameron” respectively).</p><p>Using REST to render component <code>featured-director</code>, we may need the following 7 requests (this number can vary depending on how much data is provided by each endpoint, i.e. how much over-fetching has been implemented):</p><pre><code class=language-javascript>GET - /featured-director
GET - /directors/george-lucas
GET - /films/the-phantom-menace
GET - /films/attack-of-the-clones
GET - /actors/ewan-mcgregor
GET - /actors/natalie-portman
GET - /actors/hayden-christensen
</code></pre><p><a href=https://graphql.org/>GraphQL</a> allows, through strongly typed schemas, to fetch all the required data in one single request per component. The query to fetch data through GraphQL for the component <code>featuredDirector</code> looks like this (after we have <a href=https://www.smashingmagazine.com/2018/01/graphql-primer-new-api-part-2/>implemented the corresponding schema</a>):</p><pre><code class=language-javascript>query {
  featuredDirector {
    name
    country
    avatar
    films {
      title
      thumbnail
      actors {
        name
        avatar
      }
    }
  }
}
</code></pre><p>And it produces the following response:</p><div class=break-out><pre><code class=language-javascript>{
  data: {
    featuredDirector: {
      name: "George Lucas",
      country: "USA",
      avatar: "...",
      films: [
        { 
          title: "Star Wars: Episode I - The Phantom Menace",
          thumbnail: "...",
          actors: [
            {
              name: "Ewan McGregor",
              avatar: "...",
            },
            {
              name: "Natalie Portman",
              avatar: "...",
            }
          ]
        },
        { 
          title: "Star Wars: Episode II - Attack of the Clones",
          thumbnail: "...",
          actors: [
            {
              name: "Natalie Portman",
              avatar: "...",
            },
            {
              name: "Hayden Christensen",
              avatar: "...",
            }
          ]
        }
      ]
    }
  }
}
</code></pre></div><p>And querying for component “Films recommended for you” produces the following response:</p><div class=break-out><pre><code class=language-javascript>{
  data: {
    films: [
      { 
        title: "Star Wars: Episode I - The Phantom Menace",
        thumbnail: "...",
        director: {
          name: "George Lucas",
          avatar: "...",
        }
      },
      { 
        title: "The Terminator",
        thumbnail: "...",
        director: {
          name: "James Cameron",
          avatar: "...",
        }
      }
    ]
  }
}
</code></pre></div><p>PoP will issue only one request to fetch all the data for all components in the page, and normalize the results. The endpoint to be called is simply the same as the URL for which we need to get the data, just adding an additional parameter <code>output=json</code> to indicate to bring the data in JSON format instead of printing it as HTML:</p><pre><code class=language-javascript>GET - /url-of-the-page/?output=json
</code></pre><p>Assuming that the module structure has a top module named <code>page</code> containing modules <code>featured-director</code> and <code>films-recommended-for-you</code>, and these also have submodules, like this:</p><pre><code class=language-javascript>"page"
  modules
    "featured-director"
      modules
        "director-films"
          modules
            "film-actors"
  "films-recommended-for-you"
    modules
      "film-director"
</code></pre><p>The single returned JSON response will look like this:</p><div class=break-out><pre><code class=language-javascript>{
  modulesettings: {
    "page": {
      modules: {
        "featured-director": {
          dbkeys: {
            id: "people",
          },
          modules: {
            "director-films": {
              dbkeys: {
                films: "films"
              },
              modules: {
                "film-actors": {
                  dbkeys: {
                    actors: "people"
                  },
                }
              }
            }
          }
        },
        "films-recommended-for-you": {
          dbkeys: {
            id: "films",
          },
          modules: {
            "film-director": {
              dbkeys: {
                director: "people"
              },
            }
          }
        }
      }
    }
  },
  moduledata: {
    "page": {
      modules: {
        "featured-director": {
          dbobjectids: [1]
        },
        "films-recommended-for-you": {
          dbobjectids: [1, 3]
        }
      }
    }
  },
  databases: {
    primary: {
      people {
        1: {
          name: "George Lucas",
          country: "USA",
          avatar: "..."
          films: [1, 2]
        },
        2: {
          name: "Ewan McGregor",
          avatar: "..."
        },
        3: {
          name: "Natalie Portman",
          avatar: "..."
        },
        4: {
          name: "Hayden Christensen",
          avatar: "..."
        },
        5: {
          name: "James Cameron",
          avatar: "..."
        },
      },
      films: {
        1: { 
          title: "Star Wars: Episode I - The Phantom Menace",
          actors: [2, 3],
          director: 1,
          thumbnail: "..."
        },
        2: { 
          title: "Star Wars: Episode II - Attack of the Clones",
          actors: [3, 4],
          thumbnail: "..."
        },
        3: { 
          title: "The Terminator",
          director: 5,
          thumbnail: "..."
        },
      }
    }
  }
}
</code></pre></div><p>Let’s analyze how these three methods compare to each other, in terms of speed and the amount of data retrieved.</p><h4 id=speed>Speed</h4><p>Through REST, having to fetch 7 requests just to render one component can be very slow, mostly on mobile and shaky data connections. Hence, the jump from REST to GraphQL represents a great deal for speed, because we are able to render a component with only one request.</p><p>PoP, because it can fetch all data for many components in one request, will be faster for rendering many components at once; however, most likely there is no need for this. Having components be rendered in order (as they appear in the page), is already a good practice, and for those components which appear under the fold there is certainly no rush to render them. Hence, both the schema-based and component-based APIs are already pretty good and clearly superior to a resource-based API.</p><h4 id=amount-of-data>Amount of Data</h4><p>On each request, data in the GraphQL response may be duplicated: actress “Natalie Portman” is fetched twice in the response from the first component, and when considering the joint output for the two components, we can also find shared data, such as film <em>Star Wars: Episode I &mdash; The Phantom Menace</em>.</p><p>PoP, on the other hand, normalizes the database data and prints it only once, however, it carries the overhead of printing the module structure. Hence, depending on the particular request having duplicated data or not, either the schema-based API or the component-based API will have a smaller size.</p><p>In conclusion, a schema-based API such as GraphQL and a component-based API such as PoP are similarly good concerning performance, and superior to a resource-based API such as REST.</p><p><strong>Recommended reading</strong>: <em><a href=https://www.smashingmagazine.com/2018/01/understanding-using-rest-api/>Understanding And Using REST APIs</a></em></p><div class=sponsors__lead-place></div><h2 id=particular-properties-of-a-component-based-api>Particular Properties Of A Component-Based API</h2><p>If a component-based API is not necessarily better in terms of performance than a schema-based API, you may be wondering, then what am I trying to achieve with this article?</p><p>In this section, I will attempt to convince you that such an API has incredible potential, providing several features which are very desirable, making it a serious contender in the world of APIs. I describe and demonstrate each of its unique great features below.</p><h3 id=the-data-to-be-retrieved-from-the-database-can-be-inferred-from-the-component-hierarchy>The Data To Be Retrieved From The Database Can Be Inferred From The Component Hierarchy</h3><p>When a module displays a property from a DB object, the module may not know, or care, what object it is; all it cares about is defining what properties from the loaded object are required.</p><p>For instance, consider the image below. A module loads an object from the database (in this case, a single post), and then its descendant modules will show certain properties from the object, such as <code>title</code> and <code>content</code>:</p><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg sizes=100vw alt="Shown data is defined at different intervals"></a><figcaption class=op-vertical-bottom>While some modules load the database object, others load properties. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/63dae148-15e7-4ed3-8815-d95cca2755d3/loading-data-at-intervals.jpg>Large preview</a>)</figcaption></figure><p>Hence, along the component hierarchy, the &ldquo;dataloading&rdquo; modules will be in charge of loading the queried objects (the module loading the single post, in this case), and its descendant modules will define what properties from the DB object are required (<code>title</code> and <code>content</code>, in this case).</p><p>Fetching all the required properties for the DB object can be done automatically by traversing the component hierarchy: starting from the dataloading module, we iterate all its descendant modules all the way down until reaching a new dataloading module, or until the end of the tree; at each level we obtain all required properties, and then merge all properties together and query them from the database, all of them only once.</p><p>In the structure below, module <code>single-post</code> fetches the results from the DB (the post with ID 37), and submodules <code>post-title</code> and <code>post-content</code> define properties to be loaded for the queried DB object (<code>title</code> and <code>content</code> respectively); submodules <code>post-layout</code> and <code>fetch-next-post-button</code> do not require any data fields.</p><pre><code class=language-javascript>"single-post"
  &#61;&#62; Load objects with object type "post" and ID 37
  modules
    "post-layout"
      modules
        "post-title"
          &#61;&#62; Load property "title"
        "post-content"
          &#61;&#62; Load property "content"
    "fetch-next-post-button"
</code></pre><p>The query to be executed is calculated automatically from the component hierarchy and their required data fields, containing all the properties needed by all the modules and their submodules:</p><pre><code class=language-javascript>SELECT 
  title, content 
FROM 
  posts 
WHERE
  id = 37
</code></pre><p>By fetching the properties to retrieve directly from the modules, the query will be automatically updated whenever the component hierarchy changes. If, for instance, we then add submodule <code>post-thumbnail</code>, which requires data field <code>thumbnail</code>:</p><pre><code class=language-javascript>"single-post"
  &#61;&#62; Load objects with object type "post" and ID 37
  modules
    "post-layout"
      modules
        "post-title"
          &#61;&#62; Load property "title"
        "post-content"
          &#61;&#62; Load property "content"
        "post-thumbnail"
          &#61;&#62; Load property "thumbnail"
    "fetch-next-post-button"
</code></pre><p>Then the query is automatically updated to fetch the additional property:</p><pre><code class=language-javascript>SELECT 
  title, content, thumbnail 
FROM 
  posts 
WHERE
  id = 37
</code></pre><p>Because we have established the database object data to be retrieved in a relational manner, we can also apply this strategy among the relationships between database objects themselves.</p><p>Consider the image below: Starting from the object type <code>post</code> and moving down the component hierarchy, we will need to shift the DB object type to <code>user</code> and <code>comment</code>, corresponding to the post’s author and each of the post’s comments respectively, and then, for each comment, it must change the object type once again to <code>user</code> corresponding to the comment’s author.</p><p>Moving from a database object to a relational object (possibly changing the object type, as in <code>post</code> => <code>author</code> going from <code>post</code> to <code>user</code>, or not, as in <code>author</code> => followers going from <code>user</code> to <code>user</code>) is what I call “switching domains”.</p><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg sizes=100vw alt="Showing data for relational objects"></a><figcaption class=op-vertical-bottom>Changing the DB object from one domain to another. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb2e79d3-49dc-4144-9fd6-87d1f7382dc4/loading-data-at-intervals-relational.jpg>Large preview</a>)</figcaption></figure><p>After switching to a new domain, from that level at the component hierarchy downwards, all required properties will be subjected to the new domain:</p><ul><li><code>name</code> is fetched from the <code>user</code> object (representing the post’s author),</li><li><code>content</code> is fetched from the <code>comment</code> object (representing each of the post’s comments),</li><li><code>name</code> is fetched from the <code>user</code> object (representing the author of each comment).</li></ul><p>Traversing the component hierarchy, the API knows when it is switching to a new domain and, appropriately, update the query to fetch the relational object.</p><p>For example, if we need to show data from the post’s author, stacking submodule <code>post-author</code> will change the domain at that level from <code>post</code> to the corresponding <code>user</code>, and from this level downwards the DB object loaded into the context passed to the module is the user. Then, submodules <code>user-name</code> and <code>user-avatar</code> under <code>post-author</code> will load properties <code>name</code> and <code>avatar</code> under the <code>user</code> object:</p><div class=break-out><pre><code class=language-javascript>"single-post"
  &#61;&#62; Load objects with object type "post" and ID 37
  modules
    "post-layout"
      modules
        "post-title"
          &#61;&#62; Load property "title"
        "post-content"
          &#61;&#62; Load property "content"
        "post-author"
          &#61;&#62; Switch domain from "post" to "user", based on property "author"
          modules
            "user-layout"
              modules
                "user-name"
                  &#61;&#62; Load property "name"
                "user-avatar"
                  &#61;&#62; Load property "avatar"
    "fetch-next-post-button"

</code></pre></div><p>Resulting in the following query:</p><pre><code class=language-sql>SELECT 
  p.title, p.content, p.author, u.name, u.avatar 
FROM 
  posts p 
INNER JOIN 
  users u 
WHERE 
  p.id = 37 AND p.author = u.id
</code></pre><p>In summary, by configuring each module appropriately, there is no need to write the query to fetch data for a component-based API. The query is automatically produced from the structure of the component hierarchy itself, obtaining what objects must be loaded by the dataloading modules, the fields to retrieve for each loaded object defined at each descendant module, and the domain switching defined at each descendant module.</p><p>Adding, removing, replacing or altering any module will automatically update the query. After executing the query, the retrieved data will be exactly what is required &mdash; nothing more or less.</p><h3 id=observing-data-and-calculating-additional-properties>Observing Data And Calculating Additional Properties</h3><p>Starting from the dataloading module down the component hierarchy, any module can observe the returned results and calculate extra data items based on them, or <code>feedback</code> values, which are placed under entry <code>moduledata</code>.</p><p>For instance, module <code>fetch-next-post-button</code> can add a property indicating if there are more results to fetch or not (based on this feedback value, if there aren’t more results, the button will be disabled or hidden):</p><pre><code class=language-javascript>{
  moduledata: {
    "page": {
      modules: {
        "single-post": {
          modules: {
            "fetch-next-post-button": {
              feedback: {
                hasMoreResults: true
              }
            }
          }
        }
      }
    }
  }
}
</code></pre><h3 id=implicit-knowledge-of-required-data-decreases-complexity-and-makes-the-concept-of-an-endpoint-become-obsolete>Implicit Knowledge Of Required Data Decreases Complexity And Makes The Concept Of An “Endpoint” Become Obsolete</h3><p>As shown above, the component-based API can fetch exactly the required data, because it has the model of all components on the server and what data fields are required by each component. Then, it can make the knowledge of the required data fields implicit.</p><p>The advantage is that defining what data is required by the component can be updated just on the server-side, without having to redeploy JavaScript files, and the client can be made dumb, just asking the server to provide whatever data it is that it needs, thus decreasing the complexity of the client-side application.</p><p>In addition, calling the API to retrieve the data for all components for a specific URL can be carried out simply by querying that URL plus adding the extra parameter <code>output=json</code> to indicate returning API data instead of printing the page. Hence, the URL becomes its own endpoint or, considered in a different way, the concept of an &ldquo;endpoint&rdquo; becomes obsolete.</p><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png sizes=100vw alt="Requests to fetch resources with different APIs"></a><figcaption class=op-vertical-bottom>Requests to fetch resources with different APIs. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dbb65398-60f0-4d19-b6f9-3bf6033aedc0/comparison-data-fetching-apis.png>Large preview</a>)</figcaption></figure><h3 id=retrieving-subsets-of-data-data-can-be-fetched-for-specific-modules-found-at-any-level-of-the-component-hierarchy>Retrieving Subsets Of Data: Data Can Be Fetched For Specific Modules, Found At Any Level Of The Component Hierarchy</h3><p>What happens if we don’t need to fetch the data for all modules in a page, but simply the data for a specific module starting at any level of the component hierarchy? For instance, if a module implements an infinite-scroll, when scrolling down we must fetch only new data for this module, and not for the other modules on the page.</p><p>This can be accomplished by filtering the branches of the component hierarchy that will be included in the response, to include properties only starting from the specified module and ignore everything above this level. In my implementation (which I will describe in an upcoming article), the filtering is enabled by adding parameter <code>modulefilter=modulepaths</code> to the URL, and the selected module (or modules) is indicated through a <code>modulepaths[]</code> parameter, where a “module path” is the list of modules starting from the top-most module to the specific module (e.g. <code>module1</code> => <code>module2</code> => <code>module3</code> has module path [<code>module1</code>, <code>module2</code>, <code>module3</code>] and is passed as a URL parameter as <code>module1.module2.module3</code>).</p><p>For instance, in the component hierarchy below every module has an entry <code>dbobjectids</code>:</p><pre><code class=language-javascript>"module1"
  dbobjectids: [...]
  modules
    "module2"
      dbobjectids: [...]
      modules
        "module3"
          dbobjectids: [...]
        "module4"
          dbobjectids: [...]
        "module5"
          dbobjectids: [...]
          modules
            "module6"
              dbobjectids: [...]
</code></pre><p>Then requesting the webpage URL adding parameters <code>modulefilter=modulepaths</code> and <code>modulepaths[]=module1.module2.module5</code> will produce the following response:</p><pre><code class=language-javascript>"module1"
  modules
    "module2"
      modules
        "module5"
          dbobjectids: [...]
          modules
            "module6"
              dbobjectids: [...]
</code></pre><p>In essence, the API starts loading data starting from <code>module1</code> => <code>module2</code> => <code>module5</code>. That’s why <code>module6</code>, which comes under <code>module5</code>, also brings its data while <code>module3</code> and <code>module4</code> do not.</p><p>In addition, we can create custom module filters to include a pre-arranged set of modules. For instance, calling a page with <code>modulefilter=userstate</code> can print only those modules which require user state for rendering them in the client, such as modules <code>module3</code> and <code>module6</code>:</p><pre><code class=language-javascript>"module1"
  modules
    "module2"
      modules
        "module3"
          dbobjectids: [...]
        "module5"
          modules
            "module6"
              dbobjectids: [...]
</code></pre><p>The information of which are the starting modules comes under section <code>requestmeta</code>, under entry <code>filteredmodules</code>, as an array of module paths:</p><pre><code class=language-javascript>requestmeta: {
  filteredmodules: [
    ["module1", "module2", "module3"],
    ["module1", "module2", "module5", "module6"]
  ]
}
</code></pre><p>This feature allows to implement an uncomplicated Single-Page Application, in which the frame of the site is loaded on the initial request:</p><pre><code class=language-javascript>"page"
  modules
    "navigation-top"
      dbobjectids: [...]
    "navigation-side"
      dbobjectids: [...]
    "page-content"
      dbobjectids: [...]
</code></pre><p>But, from them on, we can append parameter <code>modulefilter=page</code> to all requested URLs, filtering out the frame and bringing only the page content:</p><pre><code class=language-javascript>"page"
  modules
    "navigation-top"
    "navigation-side"
    "page-content"
      dbobjectids: [...]
</code></pre><p>Similar to module filters <code>userstate</code> and <code>page</code> described above, we can implement any custom module filter and create rich user experiences.</p><h3 id=the-module-is-its-own-api>The Module Is Its Own API</h3><p>As shown above, we can filter the API response to retrieve data starting from any module. As a consequence, every module can interact with itself from client to server just by adding its module path to the webpage URL in which it has been included.</p><p>I hope you will excuse my over-excitement, but I truly can’t emphasize enough how wonderful this feature is. When creating a component, we don’t need to create an API to go alongside with it to retrieve data (REST, GraphQL, or anything at all), because the component is already able to talk to itself in the server and load its own data &mdash; <strong>it is completely autonomous and self-serving</strong>.</p><p>Each dataloading module exports the URL to interact with it under entry <code>dataloadsource</code> from under section <code>datasetmodulemeta</code>:</p><div class=break-out><pre><code class=language-javascript>{
  datasetmodulemeta: {
    "module1": {
      modules: {
        "module2": {
          modules: {
            "module5":  {
              meta: {
                dataloadsource: "https://page-url/?modulefilter=modulepaths&modulepaths[]=module1.module2.module5"
              },
              modules: {
                "module6": {
                  meta: {
                    dataloadsource: "https://page-url/?modulefilter=modulepaths&modulepaths[]=module1.module2.module5.module6"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
</code></pre></div><h3 id=fetching-data-is-decoupled-across-modules-and-dry>Fetching Data Is Decoupled Across Modules And DRY</h3><p>To make my point that fetching data in a component-based API is highly decoupled and DRY (<strong>D</strong>on’t <strong>R</strong>epeat <strong>Y</strong>ourself), I will first need to show how in a schema-based API such as GraphQL it is less decoupled and not DRY.</p><p>In GraphQL, the query to fetch data must indicate the data fields for the component, which may include subcomponents, and these may also include subcomponents, and so on. Then, the topmost component needs to know what data is required by every one of its subcomponents too, as to fetch that data.</p><p>For instance, rendering the <code>&lt;FeaturedDirector></code> component might require the following subcomponents:</p><pre><code class=language-javascript>Render &lt;FeaturedDirector>:
  &lt;div>
    Country: {country}
    {foreach films as film}
      &lt;Film film={film} />
    {/foreach}
  &lt;/div>

Render &lt;Film>:
  &lt;div>
    Title: {title}
    Pic: {thumbnail}
    {foreach actors as actor}
      &lt;Actor actor={actor} />
    {/foreach}
  &lt;/div>

Render &lt;Actor>:
  &lt;div>
    Name: {name}
    Photo: {avatar}
  &lt;/div>

</code></pre><p>In this scenario, the GraphQL query is implemented at the <code>&lt;FeaturedDirector></code> level. Then, if subcomponent <code>&lt;Film></code> is updated, requesting the title through property <code>filmTitle</code> instead of <code>title</code>, the query from the <code>&lt;FeaturedDirector></code> component will need to be updated, too, to mirror this new information (GraphQL <a href=https://medium.com/@weblab_tech/graphql-everything-you-need-to-know-58756ff253d8#bbe1>has a versioning mechanism</a> which can deal with this problem, but sooner or later we should still update the information). This produces maintenance complexity, which could be difficult to handle when the inner components often change or are produced by third-party developers. Hence, components are not thoroughly decoupled from each other.</p><p>Similarly, we may want to render directly the <code>&lt;Film></code> component for some specific film, for which then we must also implement a GraphQL query at this level, to fetch the data for the film and its actors, which adds redundant code: portions of the same query will live at different levels of the component structure. So <strong>GraphQL is not DRY</strong>.</p><p>Because a component-based API already knows how its components wrap each other in its own structure, then these problems are completely avoided. For one, the client is able to simply request the required data it needs, whichever this data is; if a subcomponent data field changes, the overall model already knows and adapts immediately, without having to modify the query for the parent component in the client. Therefore, the modules are highly decoupled from each other.</p><p>For another, we can fetch data starting from any module path, and it will always return the exact required data starting from that level; there are no duplicated queries whatsoever, or even queries to start with. Hence, <strong>a component-based API is fully DRY</strong>. (This is another feature that really excites me and makes me get wet.)</p><p>(Yes, pun fully intended. Sorry about that.)</p><h3 id=retrieving-configuration-values-in-addition-to-database-data>Retrieving Configuration Values In Addition To Database Data</h3><p>Let’s revisit the example of the <code>featured-director</code> component for the IMDB site described above, which was created &mdash; <em>you guessed it!</em> &mdash; with Bootstrap. Instead of hardcoding the Bootstrap classnames or other properties such as the title’s HTML tag or the avatar max width inside of JavaScript files (whether they are fixed inside the component, or set through props by parent components), each module can set these as configuration values through the API, so that then these can be directly updated on the server and without the need to redeploy JavaScript files. Similarly, we can pass strings (such as the title <code>Featured director</code>) which can be already translated/internationalized on the server-side, avoiding the need to deploy locale configuration files to the front-end.</p><p>Similar to fetching data, by traversing the component hierarchy, the API is able to deliver the required configuration values for each module and nothing more or less.</p><p>The configuration values for the <code>featured-director</code> component might look like this:</p><div class=break-out><pre><code class=language-javascript>{
  modulesettings: {
    "page": {
      modules: {
        "featured-director": {
          configuration: {
            class: "alert alert-info",
            title: "Featured director",
            titletag: "h3"
          },
          modules: {
            "director-films": {
              configuration: {
                classes: {
                  wrapper: "media",
                  avatar: "mr-3",
                  body: "media-body",
                  films: "row",
                  film: "col-sm-6"
                },
                avatarmaxsize: "100px"
              },
              modules: {
                "film-actors": {
                  configuration: {
                    classes: {
                      wrapper: "card",
                      image: "card-img-top",
                      body: "card-body",
                      title: "card-title",
                      avatar: "img-thumbnail"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
</code></pre></div><p>Please notice how &mdash; because the configuration properties for different modules are nested under each module’s level &mdash; these will never collide with each other if having the same name (e.g. property <code>classes</code> from one module will not override property <code>classes</code> from another module), avoiding having to add namespaces for modules.</p><h3 id=higher-degree-of-modularity-achieved-in-the-application>Higher Degree Of Modularity Achieved In The Application</h3><p><a href=https://en.wikipedia.org/wiki/Modularity>According to Wikipedia</a>, modularity means:</p><blockquote>The degree to which a system’s components may be separated and recombined, often with the benefit of flexibility and variety in use. The concept of modularity is used primarily to reduce complexity by breaking a system into varying degrees of interdependence and independence across and ‘hide the complexity of each part behind an abstraction and interface’.</blockquote><p>Being able to update a component just from the server-side, without the need to redeploy JavaScript files, has the consequence of better reusability and maintenance of components. I will demonstrate this by re-imagining how <a href=https://reactjsexample.com/social-media-share-buttons-and-share-counts-for-react/>this example coded for React</a> would fare in a component-based API.</p><p>Let’s say that we have a <code>&lt;ShareOnSocialMedia></code> component, currently with two items: <code>&lt;FacebookShare></code> and <code>&lt;TwitterShare></code>, like this:</p><div class=break-out><pre><code class=language-html>Render &lt;ShareOnSocialMedia>:
  &lt;ul>
    &lt;li>Share on Facebook: &lt;FacebookShare url={window.location.href} />&lt;/li>
    &lt;li>Share on Twitter: &lt;TwitterShare url={window.location.href} />&lt;/li>
  &lt;/ul>
</code></pre></div><p>But then Instagram got kind of cool, so we need to add an item <code>&lt;InstagramShare></code> to our <code>&lt;ShareOnSocialMedia></code> component, too:</p><div class=break-out><pre><code class=language-html>Render &lt;ShareOnSocialMedia>:
  &lt;ul>
    &lt;li>Share on Facebook: &lt;FacebookShare url={window.location.href} />&lt;/li>
    &lt;li>Share on Twitter: &lt;TwitterShare url={window.location.href} />&lt;/li>
    &lt;li>Share on Instagram: &lt;InstagramShare url={window.location.href} />&lt;/li>
  &lt;/ul>
</code></pre></div><p>In the React implementation, as it can be seen in the linked code, adding a new component <code>&lt;InstagramShare></code> under component <code>&lt;ShareOnSocialMedia></code> forces to redeploy the JavaScript file for the latter one, so then these two modules are not as decoupled as they could be.</p><p>In the component-based API, though, we can readily use the relationships among modules already described in the API to couple the modules together. While originally we will have this response:</p><pre><code class=language-javascript>{
  modulesettings: {
    "share-on-social-media": {
      modules: {
        "facebook-share": {
          configuration: {...}
        },
        "twitter-share": {
          configuration: {...}
        }
      }
    }
  }
}
</code></pre><p>After adding Instagram we will have the upgraded response:</p><pre><code class=language-javascript>{
  modulesettings: {
    "share-on-social-media": {
      modules: {
        "facebook-share": {
          configuration: {...}
        },
        "twitter-share": {
          configuration: {...}
        },
        "instagram-share": {
          configuration: {...}
        }
      }
    }
  }
}
</code></pre><p>And just by iterating all the values under <code>modulesettings["share-on-social-media"].modules</code>, component <code>&lt;ShareOnSocialMedia></code> can be upgraded to show the <code>&lt;InstagramShare></code> component without the need to redeploy any JavaScript file. Hence, the API supports the addition and removal of modules without compromising code from other modules, attaining a higher degree of modularity.</p><h3 id=native-client-side-cache-data-store>Native Client-Side Cache/Data Store</h3><p>The retrieved database data is normalized in a dictionary structure, and standardized so that, starting from the value on <code>dbobjectids</code>, any piece of data under <code>databases</code> can be reached just by following the path to it as indicated through entries <code>dbkeys</code>, whichever way it was structured. Hence, the logic for organizing data is already native to the API itself.</p><p>We can benefit from this situation in several ways. For instance, the returned data for each request can be added into a client-side cache containing all data requested by the user throughout the session. Hence, it is possible to avoid adding an external data store such as Redux to the application (I mean concerning the handling of data, not concerning <a href=https://www.smashingmagazine.com/2018/07/redux-designers-guide/>other features</a> such as the Undo/Redo, the collaborative environment or the time-travel debugging).</p><p>Also, the component-based structure promotes caching: the component hierarchy depends not on the URL, but on what components are needed in that URL. This way, two events under <code>/events/1/</code> and <code>/events/2/</code> will share the same component hierarchy, and the information of what modules are required can be reutilized across them. As a consequence, all properties (other than database data) can be cached on the client after fetching the first event and reutilized from then on, so that only database data for each subsequent event must be fetched and nothing else.</p><h3 id=extensibility-and-re-purposing>Extensibility And Re-purposing</h3><p>The <code>databases</code> section of the API can be extended, enabling to categorize its information into customized subsections. By default, all database object data is placed under entry <code>primary</code>, however, we can also create custom entries where to place specific DB object properties.</p><p>For instance, if the component &ldquo;Films recommended for you&rdquo; described earlier on shows a list of the logged-in user’s friends who have watched this film under property <code>friendsWhoWatchedFilm</code> on the <code>film</code> DB object, because this value will change depending on the logged-in user then we save this property under a <code>userstate</code> entry instead, so when the user logs out, we only delete this branch from the cached database on the client, but all the <code>primary</code> data still remains:</p><pre><code class=language-javascript>{
  databases: {
    userstate: {
      films: {
        5: { 
          friendsWhoWatchedFilm: [22, 45]
        },
      }
    },
    primary: {
      films: {
        5: { 
          title: "The Terminator"
        },
      }
      "people": {
        22: {
          name: "Peter",
        },
        45: {
          name: "John",
        },
      },
    }
  }
}
</code></pre><p>In addition, up to a certain point, the structure of the API response can be re-purposed. In particular, the database results can be printed in a different data structure, such as an array instead of the default dictionary.</p><p>For instance, if the object type is only one (e.g. <code>films</code>), it can be formatted as an array to be fed directly into a typeahead component:</p><pre><code class=language-javascript>[
  { 
    title: "Star Wars: Episode I - The Phantom Menace",
    thumbnail: "..."
  },
  { 
    title: "Star Wars: Episode II - Attack of the Clones",
    thumbnail: "..."
  },
  { 
    title: "The Terminator",
    thumbnail: "..."
  },
]
</code></pre><h3 id=support-for-aspect-oriented-programming>Support For Aspect-Oriented Programming</h3><p>In addition to fetching data, the component-based API can also post data, such as for creating a post or adding a comment, and execute any kind of operation, such as logging the user in or out, sending emails, logging, analytics, and so on. There are no restrictions: any functionality provided by the underlying CMS can be invoked through a module &mdash; at any level.</p><p>Along the component hierarchy, we can add any number of modules, and each module can execute its own operation. Hence, not all operations must necessarily be related to the expected action of the request, as when doing a POST, PUT or DELETE operation in REST or <a href=https://blog.apollographql.com/designing-graphql-mutations-e09de826ed97>sending a mutation in GraphQL</a>, but can be added to provide extra functionalities, such as sending an email to the admin when a user creates a new post.</p><p>So, by defining the component hierarchy through dependency-injection or configuration files, the API can be said to support <a href=https://en.wikipedia.org/wiki/Aspect-oriented_programming>Aspect-oriented programming</a>, “a programming paradigm that aims to increase modularity by allowing the separation of cross-cutting concerns.”</p><p><strong>Recommended reading</strong>: <em><a href=https://www.smashingmagazine.com/2018/12/feature-policy/>Protecting Your Site With Feature Policy</a></em></p><h3 id=enhanced-security>Enhanced Security</h3><p>The names of the modules are not necessarily fixed when printed in the output, but can be shortened, mangled, changed randomly or (in short) made variable any way intended. While originally thought for shortening the API output (so that module names <code>carousel-featured-posts</code> or <code>drag-and-drop-user-images</code> could be shortened to a base 64 notation, such as <code>a1</code>, <code>a2</code> and so on, for the production environment), this feature allows to frequently change the module names in the response from the API for security reasons.</p><p>For instance, input names are by default named as their corresponding module; then, modules called <code>username</code> and <code>password</code>, which are to be rendered in the client as <code>&lt;input type="text" name="{input_name}"></code> and <code>&lt;input type="password" name="{input_name}"></code> respectively, can be set varying random values for their input names (such as <code>zwH8DSeG</code> and <code>QBG7m6EF</code> today, and <code>c3oMLBjo</code> and <code>c46oVgN6</code> tomorrow) making it more difficult for spammers and bots to target the site.</p><h3 id=versatility-through-alternative-models>Versatility Through Alternative Models</h3><p>The nesting of modules allows to branch out to another module to add compatibility for a specific medium or technology, or change some styling or functionality, and then return to the original branch.</p><p>For instance, let’s say the webpage has the following structure:</p><pre><code class=language-javascript>"module1"
  modules
    "module2"
      modules
        "module3"
        "module4"
          modules
            "module5"
              modules
                "module6"
</code></pre><p>In this case, we’d like to make the website also work for AMP, however, modules <code>module2</code>, <code>module4</code> and <code>module5</code> are not AMP compatible. We can branch these modules out into similar, AMP-compatible modules <code>module2AMP</code>, <code>module4AMP</code> and <code>module5AMP</code>, after which we keep loading the original component hierarchy, so then only these three modules are substituted (and nothing else):</p><pre><code class=language-javascript>"module1"
  modules
    "module2AMP"
      modules
        "module3"
        "module4AMP"
          modules
            "module5AMP"
              modules
                "module6"
</code></pre><p>This makes it fairly easy to generate different outputs from a single codebase, adding forks only here and there as needed, and always scoped and restrained to individual modules.</p><h2 id=demonstration-time>Demonstration Time</h2><p>The code implementing the API as explained in this article is available in this <a href=https://github.com/leoloso/PoP>open-source repository</a>.</p><p>I have deployed the PoP API under <a href=https://nextapi.getpop.org><code>https://nextapi.getpop.org</code></a> for demonstration purposes. The website runs on WordPress, so the URL permalinks are those typical to WordPress. As noted earlier, through adding parameter <code>output=json</code> to them, these URLs become their own API endpoints.</p><p>The site is backed by the same database from the <a href=https://demo.getpop.org>PoP Demo</a> website, so a visualization of the component hierarchy and retrieved data can be done querying the same URL in this other website (e.g. visiting the <a href=https://demo.getpop.org/u/leo/><code>https://demo.getpop.org/u/leo/</code></a> explains the data from <a href="https://nextapi.getpop.org/u/leo/?output=json"><code>https://nextapi.getpop.org/u/leo/?output=json</code></a>).</p><p>The links below demonstrate the API for cases described earlier on:</p><ul><li><a href="https://nextapi.getpop.org/?output=json&mangled=none&dataoutputmode=combined">The homepage</a>, <a href="https://nextapi.getpop.org/posts/a-lovely-tango/?output=json&mangled=none&dataoutputmode=combined">a single post</a>, <a href="https://nextapi.getpop.org/u/leo/?output=json&mangled=none&dataoutputmode=combined">an author</a>, <a href="https://nextapi.getpop.org/posts/?output=json&mangled=none&dataoutputmode=combined">a list of posts</a> and <a href="https://nextapi.getpop.org/users/?output=json&mangled=none&dataoutputmode=combined">a list of users</a>.</li><li><a href="https://nextapi.getpop.org/events/coldplay-in-london/?output=json&mangled=none&modulefilter=modulepaths&modulepaths[]=pagesectiongroup.pagesection-body.block-singlepost.block-single-content&dataoutputmode=combined">An event, filtering from a specific module</a>.</li><li>A tag, <a href="https://nextapi.getpop.org/tags/internet/?output=json&mangled=none&modulefilter=userstate&dataoutputmode=combined">filtering modules which require user state</a> and <a href="https://nextapi.getpop.org/tags/internet/?output=json&mangled=none&modulefilter=page&dataoutputmode=combined">filtering to bring only a page from a Single-Page Application</a>.</li><li><a href="https://nextapi.getpop.org/locations/?output=json&mangled=none&modulefilter=maincontentmodule&dataoutputmode=combined&datastructure=results">An array of locations, to feed into a typeahead</a>.</li><li>Alternative models for the &ldquo;Who we are&rdquo; page: <a href="https://nextapi.getpop.org/who-we-are/?output=json&mangled=none&dataoutputmode=combined">Normal</a>, <a href="https://nextapi.getpop.org/who-we-are/?output=json&mangled=none&thememode=print&dataoutputmode=combined">Printable</a>, <a href="https://nextapi.getpop.org/who-we-are/?output=json&mangled=none&thememode=embed&dataoutputmode=combined">Embeddable</a>.</li><li>Changing the module names: <a href="https://nextapi.getpop.org/?output=json&mangled=none&dataoutputmode=combined">original</a> vs <a href="https://nextapi.getpop.org/?output=json&dataoutputmode=combined">mangled</a>.</li><li>Filtering information: <a href="https://nextapi.getpop.org/?output=json&dataoutputitems[]=modulesettings&dataoutputmode=combined&mangled=none">only module settings</a>, <a href="https://nextapi.getpop.org/?output=json&dataoutputitems[]=databases&dataoutputitems[]=moduledata&dataoutputmode=combined&mangled=none">module data plus database data</a>.</li></ul><figure class="break-out article__image"><a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png><img loading=lazy decoding=async fetchpriority=low srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png 400w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png 800w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png 1200w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png 1600w,
https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png 2000w" src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png sizes=100vw alt="Example of JSON code returned by the API"></a><figcaption class=op-vertical-bottom>Example of JSON code returned by the API. (<a href=https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/59d0d1d7-bd39-4ac1-859e-bf1ecc739286/api-json-response.png>Large preview</a>)</figcaption></figure><h2 id=conclusion>Conclusion</h2><p>A good API is a stepping stone for creating reliable, easily maintainable and powerful applications. In this article, I have described the concepts powering a component-based API which, I believe, is a pretty good API, and I hope I have convinced you too.</p><p>So far, the design and implementation of the API have involved several iterations and taken more than five years &mdash; and it’s not completely ready yet. However, it is in a pretty decent state, not ready for production but as a stable alpha. These days, I am still working on it; working on defining the open specification, implementing the additional layers (such as rendering) and writing documentation.</p><p>In an upcoming article, I will describe how my implementation of the API works. Until then, if you have any thoughts about it &mdash; regardless whether positive or negative &mdash; I would love to read your comments below.</p><h2 id=update-31st-jan-custom-querying-capabilities>Update (31st Jan): Custom-Querying Capabilities</h2><p>Alain Schlesser commented that an API which can&rsquo;t be custom-queried from the client is worthless, taking us back to SOAP, as such it can&rsquo;t compete with either REST or GraphQL. After giving his comment a few days of thought I had to admit that he is right. However, instead of dismissing the Component-based API as a well-intentioned-but-not-quite-there-yet endeavour, I did something much better: I got to implement the custom-querying capability for it. And it works like a charm!</p><p>In the following links, data for a resource or collection of resources is fetched as typically done through REST. However, through parameter <code>fields</code> we can also specify what specific data to retrieve for each resource, avoiding over or underfetching data:</p><ul><li>A <a href="https://nextapi.getpop.org/posts/a-lovely-tango/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=title,content,datetime">single post</a> and a <a href="https://nextapi.getpop.org/posts/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=title,content,datetime">collection of posts</a> adding parameter <code>fields=title,content,datetime</code></li><li>A <a href="https://nextapi.getpop.org/u/leo/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=name,username,description">user</a> and a <a href="https://nextapi.getpop.org/users/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=name,username,description">collection of users</a> adding parameter <code>fields=name,username,description</code></li></ul><p>The links above demonstrate fetching data only for the queried resources. What about their relationships? For instance, let&rsquo;s say that we want to retrieve a list of posts with fields <code>"title"</code> and <code>"content"</code>, each post&rsquo;s comments with fields <code>"content"</code> and <code>"date"</code>, and the author of each comment with fields <code>"name"</code> and <code>"url"</code>. To achieve this in GraphQL we would implement the following query:</p><pre><code class=language-javascript>query {
  post {
    title
    content
    comments {
      content
      date
      author {
        name
        url
      }
    }
  }
}
</code></pre><p>For the implementation of the component-based API, I have translated the query into its corresponding &ldquo;dot syntax&rdquo; expression, which can then be supplied through parameter <code>fields</code>. Querying on a &ldquo;post&rdquo; resource, this value is:</p><pre><code class=language-javascript>fields=title,content,comments.content,comments.date,comments.author.name,comments.author.url
</code></pre><p>Or it can be simplified, using <code>|</code> to group all fields applied to the same resource:</p><pre><code class=language-javascript>fields=title|content,comments.content|date,comments.author.name|url
</code></pre><p>When executing this query <a href="https://nextapi.getpop.org/posts/a-lovely-tango/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=title|content,comments.content|date,comments.author.name|url">on a single post</a> we obtain exactly the required data for all involved resources:</p><pre><code class=language-javascript>{
  &quot;datasetmodulesettings&quot;: {
    &quot;dataload-dataquery-singlepost-fields&quot;: {
      &quot;dbkeys&quot;: {
        &quot;id&quot;: &quot;posts&quot;,
        &quot;comments&quot;: &quot;comments&quot;,
        &quot;comments.author&quot;: &quot;users&quot;
      }
    }
  },
  &quot;datasetmoduledata&quot;: {
    &quot;dataload-dataquery-singlepost-fields&quot;: {
      &quot;dbobjectids&quot;: [
        23691
      ]
    }
  },
  &quot;databases&quot;: {
    &quot;posts&quot;: {
      &quot;23691&quot;: {
        &quot;id&quot;: 23691,
        &quot;title&quot;: &quot;A lovely tango&quot;,
        &quot;content&quot;: &quot;&lt;div class=\&quot;responsiveembed-container\&quot;&gt;&lt;iframe loading=&quot;lazy&quot; width=\&quot;480\&quot; height=\&quot;270\&quot; src=\&quot;https:\\/\\/www.youtube.com\\/embed\\/sxm3Xyutc1s?feature=oembed\&quot; frameborder=\&quot;0\&quot; allowfullscreen&gt;&lt;\\/iframe&gt;&lt;\\/div&gt;\n&quot;,
        &quot;comments&quot;: [
          &quot;25094&quot;,
          &quot;25164&quot;
        ]
      }
    },
    &quot;comments&quot;: {
      &quot;25094&quot;: {
        &quot;id&quot;: &quot;25094&quot;,
        &quot;content&quot;: &quot;&lt;p&gt;&lt;a class=\&quot;hashtagger-tag\&quot; href=\&quot;https:\\/\\/newapi.getpop.org\\/tags\\/videos\\/\&quot;&gt;#videos&lt;\\/a&gt;\\u00a0&lt;a class=\&quot;hashtagger-tag\&quot; href=\&quot;https:\\/\\/newapi.getpop.org\\/tags\\/tango\\/\&quot;&gt;#tango&lt;\\/a&gt;&lt;\\/p&gt;\n&quot;,
        &quot;date&quot;: &quot;4 Aug 2016&quot;,
        &quot;author&quot;: &quot;851&quot;
      },
      &quot;25164&quot;: {
        &quot;id&quot;: &quot;25164&quot;,
        &quot;content&quot;: &quot;&lt;p&gt;fjlasdjf;dlsfjdfsj&lt;\\/p&gt;\n&quot;,
        &quot;date&quot;: &quot;19 Jun 2017&quot;,
        &quot;author&quot;: &quot;1924&quot;
      }
    },
    &quot;users&quot;: {
      &quot;851&quot;: {
        &quot;id&quot;: 851,
        &quot;name&quot;: &quot;Leonardo Losoviz&quot;,
        &quot;url&quot;: &quot;https:\\/\\/newapi.getpop.org\\/u\\/leo\\/&quot;
      },
      &quot;1924&quot;: {
        &quot;id&quot;: 1924,
        &quot;name&quot;: &quot;leo2&quot;,
        &quot;url&quot;: &quot;https:\\/\\/newapi.getpop.org\\/u\\/leo2\\/&quot;
      }
    }
  }
}
</code></pre><p>Hence we can query resources in a REST fashion, and specify schema-based queries in a GraphQL fashion, and we will obtain exactly what is required, without over or underfetching data, and normalizing data in the database so that no data is duplicated. Favourably, the query can include any number of relationships, nested deep down, and these are resolved with linear complexity time: worst case of O(n+m), where n is the number of nodes that switch domain (in this case 2: <code>comments</code> and <code>comments.author</code>) and m is the number of retrieved results (in this case 5: 1 post + 2 comments + 2 users), and average case of O(n). (This is more efficient than GraphQL, which has <a href=https://blog.acolyer.org/2018/05/21/semantics-and-complexity-of-graphql/>polynomial complexity time O(n^c)</a> and suffers from increasing execution time as the level depth increases).</p><p>Finally, this API can also apply modifiers when querying data, for instance for filtering what resources are retrieved, such as can be done through GraphQL. To achieve this, the API simply sits on top of the application and can conveniently use its functionality, so there is no need to reinvent the wheel. For instance, adding parameters <code>filter=posts&searchfor=internet</code> will filter all posts containing <code>"internet"</code> <a href="https://nextapi.getpop.org/posts/?output=json&mangled=none&dataoutputitems=moduledata,databases,datasetmodulesettings&dataoutputmode=combined&dboutputmode=combined&action=api&fields=title|content,comments.content|date,comments.author.name|url&filter=posts&searchfor=internet">from a collection of posts</a>.</p><p>The implementation of this new feature will be described on an upcoming article.</p><div class=signature><img src=https://www.smashingmagazine.com/images/logo/logo--red.png alt="Smashing Editorial" width=35 height=46 loading=lazy decoding=async>
<span>(rb, ra, yk, il)</span></div><div class=category__related--alt><span class="italic grey mrs mbm block">Explore more on</span><nav class="subnav ib" role=navigation><ul class="subnav__primary subnav__subtags flex flex-wrap"><li class="subnav-item subnav-item--green"><a class=nav-item-link href=/category/api>API</a></li><li class="subnav-item subnav-item--green"><a class=nav-item-link href=/category/graphql>GraphQL</a></li><li class="subnav-item subnav-item--green"><a class=nav-item-link href=/category/javascript>JavaScript</a></li><li class="subnav-item subnav-item--green"><a class=nav-item-link href=/category/performance>Performance</a></li></ul></nav></div></div></div></div><link href=/css/non-critical-article-manual-felix.css media=print onload="this.media='all'" rel=stylesheet><link href=/css/article-dark-mode-v3.css media="(prefers-color-scheme: dark)" rel=stylesheet><div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience=non-subscriber data-remove=true data-amount=1></div><div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience=non-subscriber data-remove=true data-amount=1></div><div id=sponsors-article-end data-impression=true class="c-promo-box c-promo-box--ad c-promo-box--wide sponsors sponsors__row hidden sponsors__external" data-audience=non-subscriber data-remove=true></div><div id="promo-article-end hidden"><div class=book-grid><figure class=book--featured><div class=book--featured__image><a data-instant href=/the-smashing-newsletter/><img loading=lazy width=202 height=266 src=/images/smashing-cat/cat-in-a-chair--tall.svg alt="Smashing Newsletter"></a></div><figcaption><h4 class=book--featured__title><a href=/the-smashing-newsletter/>Smashing Newsletter</a></h4><p class=book--featured__desc>Tips on front-end & UX, delivered weekly in your inbox. Just the things you can actually use.</p></figcaption></figure><figure class=book--featured><div class=book--featured__image><a data-instant href=https://www.smashingconf.com/online-workshops/><img loading=lazy width=202 height=266 src=https://www.smashingmagazine.com/images/smashing-cat/cat-explorer.svg alt="Front-End & UX Workshops, Online"></a></div><figcaption><h4 class=book--featured__title><a href=https://www.smashingconf.com/online-workshops/>Front-End & UX Workshops, Online</a></h4><p class=book--featured__desc>With practical takeaways, live sessions, video recordings and a friendly Q&A.</p></figcaption></figure><figure class=book--featured><div class=book--featured__image><a data-instant href=/printed-books/><img loading=lazy width=202 height=266 src=https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2f2c6d6-4e85-449a-99f5-58bd053bc846/typescript-shop-cover-opt.png alt="TypeScript in 50 Lessons"></a></div><figcaption><h4 class=book--featured__title><a href=/printed-books/>TypeScript in 50 Lessons</a></h4><p class=book--featured__desc>Everything TypeScript, with code walkthroughs and examples. And other printed books.</p></figcaption></figure></div></div><div data-component=CommentsArea id=comments-introducing-component-based-api data-thread=/2019/01/introducing-component-based-api/ data-date="2019-01-21 13:00:21 +0100 +0100"></div></div></article></main><div data-component=CookieBanner></div><div id=cart class=cart-wrapper data-component=MiniCart></div><footer class=main-footer><div class=container><div class=col-12><div class="footer__topics open"><h4 class=footer__topics__title id=topics>Browse All Smashing Magazine Topics</h4><ul class=footer__topics__list><li class=footer__topics__item><a href=/category/accessibility>Accessibility</a></li><li class=footer__topics__item><a href=/category/android>Android</a></li><li class=footer__topics__item><a href=/category/animation>Animation</a></li><li class=footer__topics__item><a href=/category/apps>Apps</a></li><li class=footer__topics__item><a href=/category/css>CSS</a></li><li class=footer__topics__item><a href=/category/design>Design</a></li><li class=footer__topics__item><a href=/category/design-patterns>Design Patterns</a></li><li class=footer__topics__item><a href=/category/design-systems>Design Systems</a></li><li class=footer__topics__item><a href=/category/e-commerce>E-Commerce</a></li><li class=footer__topics__item><a href=/category/freebies>Freebies</a></li><li class=footer__topics__item><a href=/category/graphics>Graphics</a></li><li class=footer__topics__item><a href=/category/html>HTML</a></li><li class=footer__topics__item><a href=/category/illustrator>Illustrator</a></li><li class=footer__topics__item><a href=/category/inspiration>Inspiration</a></li><li class=footer__topics__item><a href=/category/ios>iOS</a></li><li class=footer__topics__item><a href=/category/javascript>JavaScript</a></li><li class=footer__topics__item><a href=/category/mobile>Mobile</a></li><li class=footer__topics__item><a href=/category/pattern-libraries>Pattern Libraries</a></li><li class=footer__topics__item><a href=/category/performance>Performance</a></li><li class=footer__topics__item><a href=/category/photoshop>Photoshop</a></li><li class=footer__topics__item><a href=/category/plugins>Plugins</a></li><li class=footer__topics__item><a href=/category/react>React</a></li><li class=footer__topics__item><a href=/category/responsive-design>Responsive Design</a></li><li class=footer__topics__item><a href=/category/service-workers>Service Workers</a></li><li class=footer__topics__item><a href=/category/sketch>Sketch</a></li><li class=footer__topics__item><a href=/category/typography>Typography</a></li><li class=footer__topics__item><a href=/category/ui>UI</a></li><li class=footer__topics__item><a href=/category/usability>Usability</a></li><li class=footer__topics__item><a href=/category/user-experience>User Experience</a></li><li class=footer__topics__item><a href=/category/wallpapers>Wallpapers</a></li><li class=footer__topics__item><a href=/category/web-design>Web Design</a></li><li class=footer__topics__item><a href=/category/wordpress>WordPress</a></li><li class=footer__topics__item><a href=/category/workflow>Workflow</a></li></ul></div></div><div class=col-12><div class=footer__notes><p>With a commitment to quality content for the design community.</p><p>Founded by Vitaly Friedman and Sven Lennartz. <span class=lining-figures>2006–2022</span>.</p><p>Smashing is proudly running on <a href="https://www.netlify.com/?utm_source=link&utm_medium=parter&utm_campaign=sm-footer">Netlify</a>.</p><p>Fonts by <a href=http://latinotype.com/>Latinotype</a>.</p></div><ul class=footer__links><li>&#9998; <a href=/write-for-us/>Write for us</a></li><li><a href=/contact/>Contact us</a></li><li><a href=/about/>About us (Impressum)</a></li><li><a href=/privacy-policy/>Privacy policy</a></li><li><a href=/auth/>Membership login</a></li><li><a href=/delivery-times/>Delivery times</a></li><li><a href="mailto:advertising@smashingmagazine.com?subject=Let’s talk about advertising">Advertise</a></li></ul></div></div><div class=back-to-top-wrapper id=back_top><a href=#top data-scroll=#top class=back-to-top title="Back to top"><svg viewBox="0 0 100 100" width="25" height="25" tabindex="-1" role="img" aria-labelledby="title"><title id="title">Back to top</title><path d="M10 50l50 50L70 90 30 50 70 10 60 0z" transform="translate(0 0) rotate(90 50 50)" fill="#fff" stroke="#fff"/><image src="/images/back-to-top-arrow.png" alt="Back to top arrow" width="100%" height="100%"/></svg></a></div></footer><div data-handler=PostLoad></div><script delay=/js/app.js defer fetchpriority=low></script><script>window.PRERELEASES={},window.PAGE_TYPE="articles",'serviceWorker'in navigator&&!localStorage.getItem('no_sw')&&window.addEventListener('load',function(){navigator.serviceWorker.register('/sw.js').then(()=>{window.caches.open('smashing-mag-offline-articles').then(a=>a.keys()).then(a=>{var d=document.querySelector('.meta-box--article'),f,b,c,e;d&&a&&a.length&&(f=a.find(a=>a.url===window.location.href)),b=document.querySelector('.offline-articles-list'),b&&a&&a.length&&(c=document.createElement('li'),e=a.map(function(a){return'<li><a href="'+a.url+'">'+a.url+'</a></li>'}).join(''),c.innerHTML='Recently viewed aritcles: <ul>'+e+'</ul>',b.appendChild(c))})}).catch(function(a){console.error('Failed to load service worker')})})</script><div hidden></div><link rel=stylesheet href=/css/print.css type=text/css media=print><script class=js-additional fetchpriority=low delay=/js/instantpage.js type=module defer></script><script class=js-additional fetchpriority=low delay=/js/ga.js defer></script><script class=js-additional fetchpriority=low delay=https://www.google-analytics.com/analytics.js defer></script><script class=js-additional fetchpriority=low type=module delay=/js/web-vitals-tracking.js></script><script>const autoLoadDuration=5,eventList=["keydown","mousemove","wheel","touchmove","touchstart","touchend"],autoLoadTimeout=setTimeout(runScripts,5e3);function triggerScripts(){runScripts(),clearTimeout(autoLoadTimeout),eventList.forEach(function(a){window.removeEventListener(a,triggerScripts,{passive:!0})})}function runScripts(){document.querySelectorAll("script[delay]").forEach(function(a){a.setAttribute("src",a.getAttribute("delay"))})}eventList.forEach(function(a){window.addEventListener(a,triggerScripts,{passive:!0})})</script></body></html>