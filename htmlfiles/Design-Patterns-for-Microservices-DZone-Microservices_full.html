
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="An in-depth discussion of many design patterns for microservices, including decomposition patters and the strangler pattern.">
  <meta name="keywords" content="microservice, web service, Database, mobile app, Design, Relational database, requests, Circuit Breaker Pattern, data, API">

  <meta property="og:description" content="An in-depth discussion of many design patterns for microservices, including decomposition patters and the strangler pattern.">
  <meta property="og:site_name" content="dzone.com">
  <meta property="og:title" content="Design Patterns for Microservices - DZone Microservices">
  <meta property="og:url" content="https://dzone.com/articles/design-patterns-for-microservices-1">
  <meta property="og:image" content="https://dz2cdn1.dzone.com/storage/article-thumb/12258748-thumb.jpg">
  <meta property="og:type" content="article">

  <meta name="twitter:site" content="@DZoneInc">
  <meta name="twitter:image" content="https://dz2cdn1.dzone.com/storage/article-thumb/12258748-thumb.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:description" content="An in-depth discussion of many design patterns for microservices, including decomposition patters and the strangler pattern.">
  <meta name="twitter:title" content="Design Patterns for Microservices - DZone Microservices">

  <meta name="referrer" content="origin-when-cross-origin">
  <meta name="google-site-verification" content="kndbhxcupfEqWmZclhCpB6vlgOs7QSmx2UHAGGnP2mA">
  <meta name="df-verify" content="df0d76632b4543">

  <link rel="icon" type="image/x-icon" href="https://dz2cdn4.dzone.com/themes/dz20/images/favicon.png">
  <link rel="image_src" href="https://dz2cdn1.dzone.com/storage/article-thumb/12258748-thumb.jpg">
  <link rel="canonical" href="https://dzone.com/articles/design-patterns-for-microservices-1">

  <title>Design Patterns for Microservices - DZone Microservices</title>

  <link rel="preload" href="https://fonts.dzone.com/themes/dz20/font/fontello.woff?11773374" as="font" type="font/woff" crossorigin="anonymous">

  <link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/ftl/icons.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/lib/static/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/ftl/article/global.css">
  <link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/ftl/header/styles.css">
</head>
<body>
<div id="ftl-header">
  <div class="container-fluid header">
    <div class="row">
      <div class="col-md-12" style="padding: 0;">
        <div class="header-top">
          <div class="header-container">
            <div class="pull-left logo-container">
              <div class="logo">
                <a class="inner" href="/">
                  <picture>
                    <source srcset="https://dz2cdn4.dzone.com/themes/dz20/images/dz_logo_2021_cropped.webp" type="image/webp">
                    <source srcset="https://dz2cdn4.dzone.com/themes/dz20/images/dz_logo_2021_cropped.png" type="image/png">
                    <img src="https://dz2cdn4.dzone.com/themes/dz20/images/dz_logo_2021_cropped.png" width="160" height="52" alt="DZone">
                  </picture>
                </a>
              </div>

                <div class="active-portal"><a href="/microservices-news-tutorials-tools">Microservices Zone</a></div>
            </div>

            <div class="pull-right login-and-search">
              <div id="authenticated-block" class="logged-in">
                <div class="welcome-back">Thanks for visiting DZone today,</div>
                <div id="user-header" class="user-info">
                  <button class="user-avatar">
                    <span id="header-username" class="username"></span>
                    <img id="header-avatar" src="" alt="user avatar">
                  </button>
                  <div id="user-dropdown" class="browse-user-menu">
                    <div class="user-content">
                      <a id="header-user-plug" href="#" class="user-description"></a>
                      <a id="header-user-edit" href="#" class="edit-profile">Edit Profile</a>
                    </div>
                    <ul class="user-actions">
                      <li id="first-user-action"><a id="header-dropdown-manage-email" href="#">Manage Email Subscriptions</a></li>
                      <li>
                        <a href="/articles/how-to-submit-a-post-to-dzone?utm_source=DZone&utm_medium=user_dropdown&utm_campaign=how_to_post">
                          How to Post to DZone
                        </a>
                      </li>
                      <li>
                        <a href="/articles/dzones-article-submission-guidelines">
                          Article Submission Guidelines
                        </a>
                      </li>
                    </ul>
                    <div class="bottom">
                      <a href="/users/logout.html" class="sign-out">Sign Out</a>
                      <a id="dropdown-view-profile" href="#" class="view-profile">View Profile</a>
                    </div>
                  </div>
                </div>

                <div class="post-content">
                  <button id="post-button" class="post-content--button">
                    <span class="post-class">Post</span>
                    <i class="icon-plus"></i>
                  </button>

                  <div id="post-menu" class="posting-links">
                    <div class="posting-links-menu">
                      <ul>
                        <li>
                          <img src="/themes/dz20/images/dz-postarticle.svg">
                          <a href="/content/article/post.html">Post an Article</a>
                        </li>
                        <li>
                          <a id="drafts-link" href="#">Manage My Drafts</a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div id="unauthenticated-block">
                <div class="dz-intro">Over 2 million developers have joined DZone.</div>
                <div class="mobile-invisible sign-in-join">
                  <a href="/users/login.html">Log In</a>
                  <span class="dz-intro-span">/</span>
                  <a href="/static/registration.html">Join</a>
                </div>
                <a class="join-icon" href="/users/login.html"><i class="icon-user"></i></a>
              </div>
              <div class="headerSearch">
                <a class="icon-search dropdown-toggle" href="/search"></a>
              </div>
            </div>
          </div>
        </div>

        <div class="header-bottom">


          <ul class="portals header-container scrollable-ul">
            <li>
              <a href="/refcardz" id="header-refcardz">
                <em>Refcardz</em>
              </a>
            </li>
            <li>
              <a href="/trendreports" id="header-research">
                <em>Trend Reports</em>
              </a>
            </li>
            <li>
              <a href="/webinars" id="header-webinars">
                <em>Webinars</em>
              </a>
            </li>
            <li class="last-portal-link">
              <a href="#" id="header-portals">
                <em>
                  Zones
                  <span id="zone-arrow" class="collapsible-toggle">
                    <i class="icon-angle-down"></i>
                    <i class="icon-angle-up"></i>
                  </span>
                </em>
              </a>
            </li>

            <li class="separator" aria-hidden="true" style="color: #d9dcdd;">|</li>
            <li id="portal-list" class="portal-topics">
              <ul>
                  <li>
                    <a href="/agile-methodology-training-tools-news" id="header-2">Agile</a>
                  </li>
                  <li>
                    <a href="/artificial-intelligence-tutorials-tools-news" id="header-4001">AI</a>
                  </li>
                  <li>
                    <a href="/big-data-analytics-tutorials-tools-news" id="header-3">Big Data</a>
                  </li>
                  <li>
                    <a href="/cloud-computing-tutorials-tools-news" id="header-4">Cloud</a>
                  </li>
                  <li>
                    <a href="/database-sql-nosql-tutorials-tools-news" id="header-5">Database</a>
                  </li>
                  <li>
                    <a href="/devops-tutorials-tools-news" id="header-6">DevOps</a>
                  </li>
                  <li>
                    <a href="/enterprise-integration-training-tools-news" id="header-7">Integration</a>
                  </li>
                  <li>
                    <a href="/iot-developer-tutorials-tools-news-reviews" id="header-8">IoT</a>
                  </li>
                  <li>
                    <a href="/java-jdk-development-tutorials-tools-news" id="header-1">Java</a>
                  </li>
                  <li>
                    <a href="/microservices-news-tutorials-tools" id="header-6001">Microservices</a>
                  </li>
                  <li>
                    <a href="/open-source-news-tutorials-tools" id="header-7001">Open Source</a>
                  </li>
                  <li>
                    <a href="/apm-tools-performance-monitoring-optimization" id="header-10">Performance</a>
                  </li>
                  <li>
                    <a href="/application-web-network-security" id="header-2001">Security</a>
                  </li>
                  <li>
                    <a href="/web-development-programming-tutorials-tools-news" id="header-11">Web Dev</a>
                  </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script async src="https://dz2cdn4.dzone.com/themes/dz20/ftl/header/bundle.js"></script><link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/ftl/article/styles.css">




<div id="ftl-article" >
  <div class="container-fluid body">
    <div class="row">
      <div class="col-md-12">
        <div class="articles-wrap">
              <div class="ad-container">
                <div id="div-gpt-ad-1435246566686-0" class="ads-billboard-article" data-gpt-slot="top"></div>
              </div>


          <div class="article-stream widget-top-border">
                <div class="content-right-images">
                  <div id="div-gpt-ad-1435246566686-2" class="sidebar-ad" data-gpt-desktop="true" data-gpt-slot="sidebar1"></div>
                </div>

                <script type="application/ld+json">
                  {
                    "@context": "http://schema.org",
                    "@type": "Article",
                    "headline": "Design Patterns for Microservices",
                    "author": {
                      "@type": "Person",
                      "name": "Madhuka  Udantha"
                    },
                    "audience": "software developers",
                    "keywords": "design patterns,microservices",
                    "timeRequired": "PT13M",
                    "commentCount": 5,
                    "wordCount": "3169",
                    "accessMode": "textual, visual",
                    "dateCreated": "2019-07-30T13:18:03Z",
                    "datePublished": "2019-07-30T00:00:00Z",
                    "dateModified": "2019-08-29T08:45:43Z",
                    "articleSection": "microservices-news-tutorials-tools",
                    "publisher": {
                      "@type": "Organization",
                      "name": "DZone",
                      "url": "https://dzone.com",
                      "logo": {
                        "@type": "ImageObject",
                        "url": "https://dzone.com/themes/dz20/images/dz_logo_2021_cropped.png"
                      }
                    },
                    "articleBody": "Microservices can have a positive impact on your enterprise. Therefore it is worth knowing how to handle Microservice Architecture (MSA) and some Design Patterns for Microservices, as well as, general goals or principles for a microservice architecture. Here are the four goals to consider in the Microservice Architecture approach [1]. Reduce Cost: MSA will reduce the overall cost of designing, implementing, and maintaining IT services. Increase Release Speed: MSA will increase the speed from idea to deployment of services. Improve Resilience: MSA will improve the resilience of our service network. Enable Visibility: MSA support for better visibility on your service and network. You need to understand what principles microservice architecture has been built Scalability Availability Resiliency Flexibility Independent, autonomous Decentralized governance Failure isolation Auto-Provisioning Continuous delivery through DevOps Adhering to the above principles brings several challenges and issues while bring your solution or system to live. Those problems are common for many solutions. Those can overcome with using correct and matching design patterns. There are design patterns for microservices and those can be divided into five Patterns. Each contains many patterns. Decomposition Patterns Decompose by Business Capability Microservices is all about making services loosely coupled and applying the single responsibility principle. It decomposes by business capability. Define services corresponding to business capabilities. A business capability is a concept from business architecture modeling [2]. It is something that a business does in order to generate value. A business capability often corresponds to a business object, e.g. Order Management is responsible for orders Customer Management is responsible for customers Decompose by Subdomain Decomposing an application using business capabilities might be a good start, but you will come across so-called “God Classes” which will not be easy to decompose. These classes will be common among multiple services. Define services corresponding to Domain-Driven Design (DDD) subdomains. DDD refers to the application’s problem space — the business — as the domain. A domain is consists of multiple subdomains. Each subdomain corresponds to a different part of the business. Subdomains can be classified as follows: Core — key differentiator for the business and the most valuable part of the application Supporting — related to what the business does but not a differentiator; can be implemented in-house or outsourced Generic — not specific to the business and are ideally implemented using off the shelf software The subdomains of an Order management include: Product catalog service Inventory management services Order management services Delivery management services Decompose by Transactions/Two-Phase Commit (2pc) Pattern This pattern can decompose services over the transactions. Then there will be multiple transactions in the system. One of the important participants in a distributed transaction is the transaction coordinator [3]. The distributed transaction consists of two steps: Prepare phase — during this phase, all participants of the transaction prepare for commit and notify the coordinator that they are ready to complete the transaction Commit or Rollback phase — during this phase, either a commit or a rollback command is issued by the transaction coordinator to all participants The problem with 2PC is that it is quite slow compared to the time for operation of a single microservice. Coordinating the transaction between microservices, even if they are on the same network, can really slow the system down; so this approach isn’t usually used in a high load scenario. Strangler Pattern The first three design patterns that you went through were decomposing applications for Greenfield, but 80% of the work you do is with brownfield applications, which are big, monolithic applications (legacy codebase). The Strangler pattern comes to the rescue or solution. This creates two separate applications that live side by side in the same URI space. Over time, the newly refactored application “strangles” or replaces the original application until finally, you can shut off the monolithic application. The Strangler Application steps are transformed, coexist, and eliminate [4]: Transform — Create a parallel new site with modern approaches. Coexist — Leave the existing site where it is for a time. Redirect from the existing site to the new one so the functionality is implemented incrementally. Eliminate — Remove the old functionality from the existing site. Bulkhead Pattern This pattern isolates elements of an application into pools so that if one fails, the others will continue to function. This pattern is named Bulkhead because it resembles the sectioned partitions of a ship’s hull. Partition service instances into different groups, based on consumer load and availability requirements. This design helps to isolate failures, and allows you to sustain service functionality for some consumers, even during a failure. Sidecar Pattern This deploys components of an application into a separate processor container to provide isolation and encapsulation. This pattern can also enable applications to be composed of heterogeneous components and technologies. This pattern is named Sidecar because it resembles a sidecar attached to a motorcycle. In the pattern, the sidecar is attached to a parent application and provides supporting features for the application. The sidecar also shares the same lifecycle as the parent application, is created and retired alongside the parent. The sidecar pattern is sometimes referred to as the sidekick pattern and is the last decomposition pattern that we show in the post. Integration Patterns API Gateway Pattern When an application is broken down to smaller microservices, there are a few concerns that need to be addressed There are multiple calls for multiple microservices by different channels. There is a need for handling different type of Protocols. Different consumers might need a different format of the responses. An API Gateway helps to address many of the concerns raised by the microservice implementation, not limited to the ones above. An API Gateway is the single point of entry for any microservice calls. It can work as a proxy service to route a request to the concerned microservice. It can aggregate the results to send back to the consumer. This solution can create a fine-grained API for each specific type of client. It can also convert the protocol request and respond. It can also offload the authentication/authorization responsibility of the microservice. Aggregator Pattern When breaking the business functionality into several smaller logical pieces of code, it becomes necessary to think about how to collaborate the data returned by each service. This responsibility cannot be left with the consumer. The Aggregator pattern helps to address this. It talks about how we can aggregate the data from different services and then send the final response to the consumer. This can be done in two ways [6]: A composite microservice will make calls to all the required microservices, consolidate the data, and transform the data before sending back. An API Gateway can also partition the request to multiple microservices and aggregate the data before sending it to the consumer. It is recommended if any business logic is to be applied, then choose a composite microservice. Otherwise, the API Gateway is the established solution. Proxy Pattern API gateway just exposes Microservices over API gateway. In this example, the API gateway has three API modules: Mobile API, which implements the API for the FTGO mobile client. Browser API, which implements the API to the JavaScript application running in the browser. Public API, which implements the API for third-party developers. Gateway Routing Pattern The API gateway is responsible for request routing. An API gateway implements some API operations by routing requests to the corresponding service. When it receives a request, the API gateway consults a routing map that specifies which service to route the request to. A routing map might, for example, map an HTTP method and path to the HTTP URL of service. This function is identical to the reverse proxying features provided by web servers such as NGINX. Chained Microservice Pattern There will be multiple dependencies of for single services or microservice eg: Sale microservice has dependency products microservice and order microservice. Chained microservice design pattern will help you to provide the consolidated outcome to your request. The request received by a microservice: 1, which is then communicating with microservice-2 and it may be communicating with microservice-3. All these services are synchronous calls. Branch Pattern A microservice may need to get the data from multiple sources including other microservices. Branch microservice pattern is a mix of Aggregator and Chain design patterns and allows simultaneous request/response processing from two or more microservices. The invoked microservice can be chains of microservices. Branch pattern can also be used to invoke different chains of microservices, or a single chain, based on your business needs. Client-Side UI Composition Pattern When services are developed by decomposing business capabilities/subdomains, the services responsible for user experience have to pull data from several microservices. In the monolithic world, there used to be only one call from the UI to a backend service to retrieve all data and refresh/submit the UI page. However, now it won’t be the same. With microservices, the UI has to be designed as a skeleton with multiple sections/regions of the screen/page. Each section will make a call to an individual backend microservice to pull the data. Frameworks like AngularJS and ReactJS help to do that easily. These screens are known as Single Page Applications (SPA). Each team develops a client-side UI component, such an AngularJS directive, that implements the region of the page/screen for their service. A UI team is responsible for implementing the page skeletons that build pages/screens by composing multiple, service-specific UI components. Database Patterns Defining the database architecture for microservices we need to consider the below points. Services must be loosely coupled. They can be developed, deployed, and scaled independently. Business transactions may enforce invariants that span multiple services. Some business transactions need to query data that is owned by multiple services. Databases must sometimes be replicated and shared in order to scale. Different services have different data storage requirements. Database per Service To solve the above concerns, one database per microservice must be designed; it must be private to that service only. It should be accessed by the microservice API only. It cannot be accessed by other services directly. For example, for relational databases, we can use private-tables-per-service, schema-per-service, or database-server-per-service. Shared Database per Service We have talked about one database per service being ideal for microservices. It is an anti-pattern for microservices. But if the application is a monolith and trying to break into microservices, denormalization is not that easy. In the later phase, we can move to DB per service pattern. A shared database per service is not ideal, but that is the working solution for the above scenario. Most people consider this an anti-pattern for microservices, but for brownfield applications, this is a good start to break the application into smaller logical pieces. This should not be applied for greenfield applications. Command Query Responsibility Segregation (CQRS) Once we implement database-per-service, there is a requirement to query, which requires joint data from multiple services. it’s not possible. CQRS suggests splitting the application into two parts — the command side and the query side. The command side handles the Create, Update, and Delete requests. The query side handles the query part by using the materialized views. The event sourcing pattern is generally used along with it to create events for any data change. Materialized views are kept updated by subscribing to the stream of events. Event Sourcing Most applications work with data, and the typical approach is for the application to maintain the current state. For example, in the traditional create, read, update, and delete (CRUD) model a typical data process is to read data from the store. It contains limitations of locking the data, often using transactions. Event Sourcing Pattern The Event Sourcing pattern [8] defines an approach to handling operations on data that’s driven by a sequence of events, each of which is recorded in an append-only store. Application code sends a series of events that imperatively describe each action that has occurred on the data to the event store, where they’re persisted. Each event represents a set of changes to the data (such as AddedItemToOrder). The events are persisted in an event store that acts as the system of record. Typical uses of the events published by the event store are to maintain materialized views of entities as actions in the application change them, and for integration with external systems. For example, a system can maintain a materialized view of all customer orders that are used to populate parts of the UI. As the application adds new orders, adds or removes items on the order, and adds shipping information, the events that describe these changes can be handled and used to update the materialized view. The figure shows an overview of the pattern. Event Sourcing pattern[8] Saga Pattern When each service has its own database and a business transaction spans multiple services, how do we ensure data consistency across services? Each request has a compensating request that is executed when the request fails. It can be implemented in two ways: Choreography — When there is no central coordination, each service produces and listens to another service’s events and decides if an action should be taken or not. Choreography is a way of specifying how two or more parties; none of which have any control over the other parties’ processes, or perhaps any visibility of those processes — can coordinate their activities and processes to share information and value. Use choreography when coordination across domains of control/visibility is required. You can think of choreography, in a simple scenario, as like a network protocol. It dictates acceptable patterns of requests and responses between parties. Saga pattern — Choreography Orchestration — An orchestrator (object) takes responsibility for a saga’s decision making and sequencing business logic. when you have control over all the actors in a process. when they’re all in one domain of control and you can control the flow of activities. This is, of course, most often when you’re specifying a business process that will be enacted inside one organization that you have control over. Sage pattern — Orchestration Observability Patterns Log Aggregation Consider a use case where an application consists of multiple services. Requests often span multiple service instances. Each service instance generates a log file in a standardized format. We need a centralized logging service that aggregates logs from each service instance. Users can search and analyze the logs. They can configure alerts that are triggered when certain messages appear in the logs. For example, PCF does have Log aggregator, which collects logs from each component (router, controller, diego, etc…) of the PCF platform along with applications. AWS Cloud Watch also does the same. Performance Metrics When the service portfolio increases due to a microservice architecture, it becomes critical to keep a watch on the transactions so that patterns can be monitored and alerts sent when an issue happens. A metrics service is required to gather statistics about individual operations. It should aggregate the metrics of an application service, which provides reporting and alerting. There are two models for aggregating metrics: Push — the service pushes metrics to the metrics service e.g. NewRelic, AppDynamics. Pull — the metrics services pulls metrics from the service e.g. Prometheus. Distributed Tracing In a microservice architecture, requests often span multiple services. Each service handles a request by performing one or more operations across multiple services. While in troubleshoot it is worth to have trace ID, we trace a request end-to-end. The solution is to introduce a transaction ID. Follow approach can be used; Assigns each external request a unique external request-id. Passes the external request id to all services. Includes the external request-id in all log messages. Health Check When microservice architecture has been implemented, there is a chance that a service might be up but not able to handle transactions. Each service needs to have an endpoint that can be used to check the health of the application, such as health. This API should o check the status of the host, the connection to other services/infrastructure, and any specific logic. Cross-Cutting Concern Patterns External Configuration A service typically calls other services and databases as well. For each environment like dev, QA, UAT, prod, the endpoint URL or some configuration properties might be different. A change in any of those properties might require a re-build and re-deploy of the service. To avoid code modification configuration can be used. Externalize all the configuration, including endpoint URLs and credentials. The application should load them either at startup or on the fly. These can be accessed by the application on startup or can be refreshed without a server restart. Service Discovery Pattern When microservices come into the picture, we need to address a few issues in terms of calling services. With container technology, IP addresses are dynamically allocated to the service instances. Every time the address changes, a consumer service can break and need manual changes. Each service URL has to be remembered by the consumer and become tightly coupled. A service registry needs to be created which will keep the metadata of each producer service and specification for each. A service instance should register to the registry when starting and should de-register when shutting down. There are two types of service discovery: client-side : eg: Netflix Eureka. Server-side : eg: AWS ALB. service discovery [9] Circuit Breaker Pattern A service generally calls other services to retrieve data, and there is the chance that the downstream service may be down. There are two problems with this: first, the request will keep going to the down service, exhausting network resources, and slowing performance. Second, the user experience will be bad and unpredictable. The consumer should invoke a remote service via a proxy that behaves in a similar fashion to an electrical circuit breaker. When the number of consecutive failures crosses a threshold, the circuit breaker trips, and for the duration of a timeout period, all attempts to invoke the remote service will fail immediately. After the timeout expires the circuit breaker allows a limited number of test requests to pass through. If those requests succeed, the circuit breaker resumes normal operation. Otherwise, if there is a failure, the timeout period begins again. This pattern is suited to, prevent an application from trying to invoke a remote service or access a shared resource if this operation is highly likely to fail. Circuit Breaker Pattern [10] Blue-Green Deployment Pattern With microservice architecture, one application can have many microservices. If we stop all the services then deploy an enhanced version, the downtime will be huge and can impact the business. Also, the rollback will be a nightmare. Blue-Green Deployment Pattern avoids this. The blue-green deployment strategy can be implemented to reduce or remove downtime. It achieves this by running two identical production environments, Blue and Green. Let’s assume Green is the existing live instance and Blue is the new version of the application. At any time, only one of the environments is live, with the live environment serving all production traffic. All cloud platforms provide options for implementing a blue-green deployment. Blue-Green Deployment Pattern References [1] “Microservice Architecture: Aligning Principles, Practices, and Culture” Book by Irakli Nadareishvili, Matt McLarty, and Michael Amundsen [2] https://microservices.io/patterns/decomposition/decompose-by-business-capability.html [3] https://www.baeldung.com/transactions-across-microservices [4] https://developer.ibm.com/articles/cl-strangler-application-pattern-microservices-apps-trs/ [5] https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead [6] https://dzone.com/articles/design-patterns-for-microservices [7] https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs#event-sourcing-and-cqrs [8] https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing [9] https://www.dineshonjava.com/microservices-with-spring-boot/ [10] https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker",
                    "mainEntityOfPage": {
                      "@type": "WebPage",
                      "@id": "https://dzone.com/articles/design-patterns-for-microservices-1"
                    },
                    "image": {
                      "@type": "ImageObject",
                      "url": "https://dzone.com//dz2cdn1.dzone.com/storage/article-thumb/12258748-thumb.jpg"
                    }
                  }
                </script>

                  <script type="application/ld+json">
                    {
                      "@context": "https://schema.org",
                      "@type": "BreadcrumbList",
                      "itemListElement": [{
                        "@type": "ListItem",
                        "position": 1,
                        "name": "DZone",
                        "item": "https://dzone.com"
                      }, {
                        "@type": "ListItem",
                        "position": 2,
                        "name": "Microservices Zone",
                        "item": "https://dzone.com/microservices-news-tutorials-tools"
                      }, {
                        "@type": "ListItem",
                        "position": 3,
                        "name": "Design Patterns for Microservices",
                        "item": "https://dzone.com/articles/design-patterns-for-microservices-1"
                      }]
                    }
                  </script>

            <article>
              <div class="content">
                <div class="header">
                  <div class="col-xs-12 breadcrumb-padding">
                    <a href="/">DZone</a>
                    >
                      <a href="/microservices-news-tutorials-tools">Microservices Zone</a>
                      >
                      <a href="#">Design Patterns for Microservices</a>
                  </div>


                  <div class="header-title">
                    <div class="title">
                      <h1 class="article-title">Design Patterns for Microservices</h1>
                    </div>

                    <div class="subhead">
                      <h3>A detailed description of many design patterns for Microservices.</h3>
                    </div>

                    <div class="publish-meta">
                        <div class="article-author-meta">
                          <img src="https://secure.gravatar.com/avatar/42992ed9d6f8400ca1678e16b858b7ea?d=identicon&r=PG" class="avatar" alt="Madhuka  Udantha user avatar" width="40">
                          by

                          <div class="author-info">
                            <span class="author-name">
                              <a href="/users/973571/madhuka.html" rel="nofollow">Madhuka  Udantha</a>
                            </span>
                          </div>


                            <div class="mvb-award">
                              <i title="Most Valuable Blogger" class="icon-mvb-1"></i>
                            </div>


                            <span class="badge-container">
                              <i title="DZone Core" class="icon-core-1"></i>CORE
                            </span>
                          &middot;
                        </div>
                      <span class="author-date">
                        Jul. 30, 19
                      </span>
                      &middot;
                        <a href="/microservices-news-tutorials-tools" id="portal-name">
                          <span class="portal-name">Microservices Zone</span>
                        </a>
                      &middot;
                      <span>Analysis</span>
                    </div>
                  </div>
                </div>

                <div class="author-n-useraction">
                  <div class="like action">
                    <div id="activity-like-icon" class="dz-like icon-thumbs-up">
                      <span class="action-label">
                        <span id="activity-like-text">Like</span>
                      </span>
                      <a href="#">
                        <span id="activity-like-counter">(76)</span>
                      </a>
                    </div>
                  </div>

                  <div class="action">

                    <button class="comment">
                      <i class="icon-comment"></i>
                      Comment
                      <span id="activity-comment-counter" class="comment-count"></span>
                    </button>
                  </div>

                  <div class="save action">
                    <div id="activity-save-icon" class="save icon-star-empty">
                      <span id="activity-save-text" class="action-label">Save</span>
                    </div>
                  </div>

                  <div class="tweet action">
                    <a id="tweet-link" href="" class="title" target="_blank">
                      <span><i class="icon-twitter"></i></span>
                      <span class="action-label">Tweet</span>
                    </a>
                  </div>

                  <div class="pull-right">
                    <div id="activity-view-container" class="article-views action">
                      <i class="icon-eye"></i> 134.32K
                      <span class="action-label">Views</span>
                    </div>
                  </div>
                </div>

                    <div class="signin-prompt">
                      <p>Join the DZone community and get the full member experience.</p>
                      <a id="article-signin-prompt" href="/static/registration.html">Join For Free</a>
                    </div>
                    <div class="arrow-down"></div>

                  <div id="top-bumper-container"></div>

                <div>
                  <div class="content-html"><p pid="34" style="text-align: left;">Microservices can have a positive impact on your enterprise. Therefore it is worth knowing how to handle Microservice Architecture (MSA) and some Design Patterns for Microservices, as well as, general goals or principles for a microservice architecture. Here are the four goals to consider in the Microservice Architecture approach [1].</p> 
<ul> 
 <li id="9f27" name="9f27" style="text-align: left;"><strong>Reduce Cost: </strong>MSA will reduce the overall cost of designing, implementing, and maintaining IT services.</li> 
 <li id="5ebd" name="5ebd" style="text-align: left;"><strong>Increase Release Speed:</strong> MSA will increase the speed from idea to deployment of services.</li> 
 <li id="f23f" name="f23f" style="text-align: left;"><strong>Improve Resilience: </strong>MSA will improve the resilience of our service network.</li> 
 <li id="4c1a" name="4c1a" style="text-align: left;"><strong>Enable Visibility:</strong> MSA support for better visibility on your service and network.</li> 
</ul> 
<p pid="37" style="text-align: left;"> You need to understand what principles microservice architecture has been built </p> 
<ul> 
 <li style="text-align: left;">Scalability</li> 
 <li style="text-align: left;">Availability</li> 
 <li style="text-align: left;">Resiliency</li> 
 <li style="text-align: left;">Flexibility</li> 
 <li style="text-align: left;">Independent, autonomous</li> 
 <li style="text-align: left;">Decentralized governance</li> 
 <li style="text-align: left;">Failure isolation</li> 
 <li style="text-align: left;">Auto-Provisioning</li> 
 <li style="text-align: left;">Continuous delivery through DevOps</li> 
</ul> 
<p pid="38" style="text-align: left;"> Adhering to the above principles brings several challenges and issues while bring your solution or system to live. Those problems are common for many solutions. Those can overcome with using correct and matching design patterns. There are design patterns for microservices and those can be divided into five Patterns. Each contains many patterns.</p> 
<figure id="63c2" name="63c2"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/1*CKSVv4WkS8Okx572rX45HA.png" src="https://cdn-images-1.medium.com/max/800/1*CKSVv4WkS8Okx572rX45HA.png" class="fr-fin fr-dib" /> 
</figure> 
<h2 id="d80a" name="d80a" style="text-align: left;">Decomposition Patterns</h2> 
<p pid="40" style="text-align: left;"> Decompose by Business Capability Microservices is all about making services loosely coupled and applying the single responsibility principle. It decomposes by business capability. Define services corresponding to business capabilities. A business capability is a concept from business architecture modeling [2]. It is something that a business does in order to generate value. A business capability often corresponds to a business object, e.g. </p> 
<ul> 
 <li style="text-align: left;">Order Management is responsible for orders</li> 
 <li style="text-align: left;">Customer Management is responsible for customers</li> 
</ul> 
<h2 pid="41" style="text-align: left;"> Decompose by Subdomain </h2> 
<p pid="41" style="text-align: left;"> Decomposing an application using business capabilities might be a good start, but you will come across so-called “God Classes” which will not be easy to decompose. These classes will be common among multiple services. Define services corresponding to Domain-Driven Design (DDD) subdomains. DDD refers to the application’s problem space — the business — as the domain. A domain is consists of multiple subdomains. Each subdomain corresponds to a different part of the business. Subdomains can be classified as follows: </p> 
<ul> 
 <li style="text-align: left;"><strong>Core</strong> — key differentiator for the business and the most valuable part of the application</li> 
 <li style="text-align: left;"><strong>Supporting </strong>— related to what the business does but not a differentiator;&nbsp;can be implemented in-house or outsourced</li> 
 <li style="text-align: left;"><strong>Generic</strong> — not specific to the business and are ideally implemented using off the shelf software</li> 
</ul> 
<p pid="42" style="text-align: left;"> The subdomains of an Order management include: </p> 
<ul> 
 <li style="text-align: left;">Product catalog service</li> 
 <li style="text-align: left;">Inventory management services</li> 
 <li style="text-align: left;">Order management services</li> 
 <li style="text-align: left;">Delivery management services</li> 
</ul> 
<h2 pid="43" style="text-align: left;">Decompose by Transactions/Two-Phase Commit (2pc) Pattern</h2> 
<p pid="43" style="text-align: left;">This pattern can decompose services over the transactions. Then there will be multiple transactions in the system. One of the important participants in a distributed transaction is the transaction coordinator [3]. The distributed transaction consists of two steps: </p> 
<ul> 
 <li style="text-align: left;"><strong>Prepare phase</strong> — during this phase, all participants of the transaction prepare for commit and notify the coordinator that they are ready to complete the transaction</li> 
 <li style="text-align: left;"><strong>Commit or Rollback phase </strong>— during this phase, either a commit or a rollback command is issued by the transaction coordinator to all participants</li> 
</ul> 
<p pid="44" style="text-align: left;"> The problem with 2PC is that it is quite slow compared to the time for operation of a single microservice. Coordinating the transaction between microservices, even if they are on the same network, can really slow the system down; so this approach isn’t usually used in a high load scenario. </p> 
<h2 pid="44" style="text-align: left;"> Strangler Pattern </h2> 
<p pid="44" style="text-align: left;">The first three design patterns that you went through were decomposing applications for Greenfield, but 80% of the work you do is with brownfield applications, which are big, monolithic applications (legacy codebase). The Strangler pattern comes to the rescue or solution. This creates two separate applications that live side by side in the same URI space. Over time, the newly refactored application “strangles” or replaces the original application until finally, you can shut off the monolithic application. The Strangler Application steps are transformed, coexist, and eliminate [4]: </p> 
<ul> 
 <li style="text-align: left;"><strong>Transform</strong> — Create a parallel new site with modern approaches.</li> 
 <li style="text-align: left;"><strong>Coexist</strong> — Leave the existing site where it is for a time. Redirect from the existing site to the new one so the functionality is implemented incrementally.</li> 
 <li style="text-align: left;"><strong>Eliminate</strong> — Remove the old functionality from the existing site.</li> 
</ul> 
<h2 pid="45" style="text-align: left;"> Bulkhead Pattern </h2> 
<p pid="45" style="text-align: left;">This pattern isolates elements of an application into pools so that if one fails, the others will continue to function. This pattern is named Bulkhead because it resembles the sectioned partitions of a ship’s hull. Partition service instances into different groups, based on consumer load and availability requirements. This design helps to isolate failures, and allows you to sustain service functionality for some consumers, even during a failure. </p> 
<h2 pid="45" style="text-align: left;"> Sidecar Pattern</h2> 
<p pid="45" style="text-align: left;">This deploys components of an application into a separate processor container to provide isolation and encapsulation. This pattern can also enable applications to be composed of heterogeneous components and technologies. This pattern is named Sidecar because it resembles a sidecar attached to a motorcycle. In the pattern, the sidecar is attached to a parent application and provides supporting features for the application. The sidecar also shares the same lifecycle as the parent application, is created and retired alongside the parent. The sidecar pattern is sometimes referred to as the sidekick pattern and is the last decomposition pattern that we show in the post. </p> 
<h3 id="8df1" name="8df1" style="text-align: left;">Integration Patterns</h3> 
<p pid="46" style="text-align: left;"> API Gateway Pattern When an application is broken down to smaller microservices, there are a few concerns that need to be addressed </p> 
<ul> 
 <li style="text-align: left;">There are multiple calls for multiple microservices by different channels.</li> 
 <li style="text-align: left;">There is a need for handling different type of Protocols.</li> 
 <li style="text-align: left;">Different consumers might need a different format of the responses.</li> 
</ul> 
<p pid="47" style="text-align: left;"> An API Gateway helps to address many of the concerns raised by the microservice implementation, not limited to the ones above. </p> 
<ul> 
 <li style="text-align: left;">An API Gateway is the single point of entry for any microservice calls.</li> 
 <li style="text-align: left;">It can work as a proxy service to route a request to the concerned microservice.</li> 
 <li style="text-align: left;">It can aggregate the results to send back to the consumer.</li> 
 <li style="text-align: left;">This solution can create a fine-grained API for each specific type of client.</li> 
 <li style="text-align: left;">It can also convert the protocol request and respond.</li> 
 <li style="text-align: left;">It can also offload the authentication/authorization responsibility of the microservice.</li> 
</ul> 
<h2 pid="68" style="text-align: left;">Aggregator Pattern</h2> 
<p pid="48" style="text-align: left;">When breaking the business functionality into several smaller logical pieces of code, it becomes necessary to think about how to collaborate the data returned by each service. This responsibility cannot be left with the consumer.</p> 
<p pid="49" style="text-align: left;">The Aggregator pattern helps to address this. It talks about how we can aggregate the data from different services and then send the final response to the consumer. This can be done in two ways [6]: </p> 
<ul> 
 <li style="text-align: left;">A composite microservice will make calls to all the required microservices, consolidate the data, and transform the data before sending back.</li> 
 <li style="text-align: left;">An API Gateway can also partition the request to multiple microservices and aggregate the data before sending it to the consumer.</li> 
</ul> 
<p pid="50" style="text-align: left;"> It is recommended if any business logic is to be applied, then choose a composite microservice. Otherwise, the API Gateway is the established solution. Proxy Pattern API gateway just exposes Microservices over API gateway. In this example, the API gateway has three API modules: </p> 
<ul> 
 <li style="text-align: left;">Mobile API, which implements the API for the FTGO mobile client.</li> 
 <li style="text-align: left;">Browser API, which implements the API to the JavaScript application running in the browser.</li> 
 <li style="text-align: left;">Public API, which implements the API for third-party developers.</li> 
</ul> 
<h2 pid="51" style="text-align: left;"> Gateway Routing Pattern</h2> 
<p pid="51" style="text-align: left;"> The API gateway is responsible for request routing. An API gateway implements some API operations by routing requests to the corresponding service. When it receives a request, the API gateway consults a routing map that specifies which service to route the request to. A routing map might, for example, map an HTTP method and path to the HTTP URL of service. This function is identical to the reverse proxying features provided by web servers such as NGINX. </p> 
<h2 pid="51" style="text-align: left;"> Chained Microservice Pattern </h2> 
<p pid="51" style="text-align: left;"> There will be multiple dependencies of for single services or microservice eg: Sale microservice has dependency products microservice and order microservice. Chained microservice design pattern will help you to provide the consolidated outcome to your request. </p> 
<p pid="51" style="text-align: left;">The request received by a microservice: 1, which is then communicating with microservice-2 and it may be communicating with microservice-3. All these services are synchronous calls. </p> 
<h2 pid="51" style="text-align: left;"> Branch Pattern </h2> 
<p pid="51" style="text-align: left;"> A microservice may need to get the data from multiple sources including other microservices. Branch microservice pattern is a mix of Aggregator and Chain design patterns and allows simultaneous request/response processing from two or more microservices. The invoked microservice can be chains of microservices. Branch pattern can also be used to invoke different chains of microservices, or a single chain, based on your business needs. </p> 
<h2 pid="51" style="text-align: left;"> Client-Side UI Composition Pattern </h2> 
<p pid="51" style="text-align: left;"> When services are developed by decomposing business capabilities/subdomains, the services responsible for user experience have to pull data from several microservices. In the monolithic world, there used to be only one call from the UI to a backend service to retrieve all data and refresh/submit the UI page. However, now it won’t be the same. With microservices, the UI has to be designed as a skeleton with multiple sections/regions of the screen/page. Each section will make a call to an individual backend microservice to pull the data. Frameworks like AngularJS and ReactJS help to do that easily. These screens are known as Single Page Applications (SPA). Each team develops a client-side UI component, such an AngularJS directive, that implements the region of the page/screen for their service. A UI team is responsible for implementing the page skeletons that build pages/screens by composing multiple, service-specific UI components.</p> 
<h2 style="text-align: left;">Database Patterns</h2> 
<p pid="52" style="text-align: left;"> Defining the database architecture for microservices we need to consider the below points. </p> 
<ul> 
 <li id="c634" name="c634" style="text-align: left;">Services must be loosely coupled. They can be developed, deployed, and scaled independently.</li> 
 <li id="7bd7" name="7bd7" style="text-align: left;">Business transactions may enforce invariants that span multiple services.</li> 
 <li id="0964" name="0964" style="text-align: left;">Some business transactions need to query data that is owned by multiple services.</li> 
 <li id="3af3" name="3af3" style="text-align: left;">Databases must sometimes be replicated and shared in order to scale.</li> 
 <li id="e8d1" name="e8d1" style="text-align: left;">Different services have different data storage requirements.</li> 
</ul> 
<h2 pid="53" style="text-align: left;"> Database per Service </h2> 
<p pid="53" style="text-align: left;"> To solve the above concerns, one database per microservice must be designed; it must be private to that service only. It should be accessed by the microservice API only. It cannot be accessed by other services directly. For example, for relational databases, we can use private-tables-per-service, schema-per-service, or database-server-per-service. </p> 
<h2 pid="53" style="text-align: left;"> Shared Database per Service </h2> 
<p pid="53" style="text-align: left;"> We have talked about one database per service being ideal for microservices. It is an anti-pattern for microservices. But if the application is a monolith and trying to break into microservices, denormalization is not that easy. In the later phase, we can move to DB per service pattern. A shared database per service is not ideal, but that is the working solution for the above scenario. Most people consider this an anti-pattern for microservices, but for brownfield applications, this is a good start to break the application into smaller logical pieces. This should not be applied for greenfield applications. </p> 
<h2 pid="53" style="text-align: left;"> Command Query Responsibility Segregation (CQRS) </h2> 
<p pid="53" style="text-align: left;"> Once we implement database-per-service, there is a requirement to query, which requires joint data from multiple services. it’s not possible. CQRS suggests splitting the application into two parts — the command side and the query side. </p> 
<ul> 
 <li style="text-align: left;">The command side handles the Create, Update, and Delete requests.</li> 
 <li style="text-align: left;">The query side handles the query part by using the materialized views.</li> 
</ul> 
<p pid="54" style="text-align: left;"> The event sourcing pattern is generally used along with it to create events for any data change. Materialized views are kept updated by subscribing to the stream of events. Event Sourcing Most applications work with data, and the typical approach is for the application to maintain the current state. For example, in the traditional create, read, update, and delete (CRUD) model a typical data process is to read data from the store. It contains limitations of locking the data, often using transactions.</p> 
<h2 pid="67" style="text-align: left;">Event Sourcing Pattern</h2> 
<p pid="54" style="text-align: left;"> </p> 
<p pid="54" style="text-align: left;">The Event Sourcing pattern [8] defines an approach to handling operations on data that’s driven by a sequence of events, each of which is recorded in an append-only store. Application code sends a series of events that imperatively describe each action that has occurred on the data to the event store, where they’re persisted. Each event represents a set of changes to the data (such as AddedItemToOrder). The events are persisted in an event store that acts as the system of record. Typical uses of the events published by the event store are to maintain materialized views of entities as actions in the application change them, and for integration with external systems. For example, a system can maintain a materialized view of all customer orders that are used to populate parts of the UI. As the application adds new orders, adds or removes items on the order, and adds shipping information, the events that describe these changes can be handled and used to update the materialized view. The figure shows an overview of the pattern.</p> 
<figure id="b0cc" name="b0cc"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/0*iZ03fLMycI4iuQmv.png" src="https://cdn-images-1.medium.com/max/800/0*iZ03fLMycI4iuQmv.png" class="fr-fin fr-dib" /> 
 <figcaption> 
  <i>Event Sourcing pattern[8</i>] 
 </figcaption> 
</figure> 
<h2 pid="55" style="text-align: left;"> Saga Pattern </h2> 
<p pid="55" style="text-align: left;"> When each service has its own database and a business transaction spans multiple services, how do we ensure data consistency across services? Each request has a compensating request that is executed when the request fails. It can be implemented in two ways: </p> 
<ul> 
 <li id="6707" name="6707" style="text-align: left;">Choreography — When there is no central coordination, each service produces and listens to another service’s events and decides if an action should be taken or not. Choreography is a way of specifying how two or more parties; none of which have any control over the other parties’ processes, or perhaps any visibility of those processes — can coordinate their activities and processes to share information and value. Use choreography when coordination across domains of control/visibility is required. You can think of choreography, in a simple scenario, as like a network protocol. It dictates acceptable patterns of requests and responses between parties.</li> 
</ul> 
<figure id="d1de" name="d1de"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/1*xZ6eC77SLLdFSRBMsRWj5Q.png" src="https://cdn-images-1.medium.com/max/800/1*xZ6eC77SLLdFSRBMsRWj5Q.png" class="fr-fin fr-dib" /> 
 <figcaption> 
  <i>Saga pattern — Choreography</i> 
 </figcaption> 
</figure> 
<p pid="56" style="text-align: left;"><br /></p> 
<ul> 
 <li id="fc1f" name="fc1f" style="text-align: left;">Orchestration — An orchestrator (object) takes responsibility for a saga’s decision making and sequencing business logic. when you have control over all the actors in a process. when they’re all in one domain of control and you can control the flow of activities. This is, of course, most often when you’re specifying a business process that will be enacted inside one organization that you have control over.</li> 
</ul> 
<figure id="c99a" name="c99a"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/1*4jFx2NZZKHs5UHpLOwdPbA.png" src="https://cdn-images-1.medium.com/max/800/1*4jFx2NZZKHs5UHpLOwdPbA.png" class="fr-dib fr-fin" /> 
 <figcaption> 
  <i>Sage pattern — Orchestration</i> 
 </figcaption> 
</figure> 
<p pid="57" style="text-align: left;"><br /></p> 
<h3 id="6c46" name="6c46" style="text-align: left;">Observability Patterns</h3> 
<p pid="58" style="text-align: left;"> Log Aggregation Consider a use case where an application consists of multiple services. Requests often span multiple service instances. Each service instance generates a log file in a standardized format. We need a centralized logging service that aggregates logs from each service instance. Users can search and analyze the logs. They can configure alerts that are triggered when certain messages appear in the logs. For example, PCF does have Log aggregator, which collects logs from each component (router, controller, diego, etc…) of the PCF platform along with applications. AWS Cloud Watch also does the same. Performance Metrics When the service portfolio increases due to a microservice architecture, it becomes critical to keep a watch on the transactions so that patterns can be monitored and alerts sent when an issue happens. A metrics service is required to gather statistics about individual operations. It should aggregate the metrics of an application service, which provides reporting and alerting. There are two models for aggregating metrics: </p> 
<ul> 
 <li style="text-align: left;">Push — the service pushes metrics to the metrics service e.g. NewRelic, AppDynamics.</li> 
 <li style="text-align: left;">Pull — the metrics services pulls metrics from the service e.g. Prometheus.</li> 
</ul> 
<h2 pid="59" style="text-align: left;"> Distributed Tracing</h2> 
<p pid="59" style="text-align: left;">In a microservice architecture, requests often span multiple services. Each service handles a request by performing one or more operations across multiple services. While in troubleshoot it is worth to have trace ID, we trace a request end-to-end. The solution is to introduce a transaction ID. Follow approach can be used; </p> 
<ul> 
 <li style="text-align: left;">Assigns each external request a unique external request-id.</li> 
 <li style="text-align: left;">Passes the external request id to all services.</li> 
 <li style="text-align: left;">Includes the external request-id in all log messages.</li> 
</ul> 
<h2 pid="60" style="text-align: left;"> Health Check</h2> 
<p pid="60" style="text-align: left;"> When microservice architecture has been implemented, there is a chance that a service might be up but not able to handle transactions. Each service needs to have an endpoint that can be used to check the health of the application, such as health. This API should o check the status of the host, the connection to other services/infrastructure, and any specific logic. </p> 
<h2 id="5bc6" name="5bc6" style="text-align: left;">Cross-Cutting Concern Patterns</h2> 
<h3 pid="61" style="text-align: left;"> External Configuration </h3> 
<p pid="61" style="text-align: left;"> A service typically calls other services and databases as well. For each environment like dev, QA, UAT, prod, the endpoint URL or some configuration properties might be different. A change in any of those properties might require a re-build and re-deploy of the service. To avoid code modification configuration can be used. Externalize all the configuration, including endpoint URLs and credentials. The application should load them either at startup or on the fly. These can be accessed by the application on startup or can be refreshed without a server restart. </p> 
<h2 pid="61" style="text-align: left;"> Service Discovery Pattern</h2> 
<p pid="61" style="text-align: left;">When microservices come into the picture, we need to address a few issues in terms of calling services. With container technology, IP addresses are dynamically allocated to the service instances. Every time the address changes, a consumer service can break and need manual changes. Each service URL has to be remembered by the consumer and become tightly coupled. A service registry needs to be created which will keep the metadata of each producer service and specification for each. A service instance should register to the registry when starting and should de-register when shutting down. There are two types of service discovery: </p> 
<ul> 
 <li id="a01a" name="a01a" style="text-align: left;">client-side : eg: Netflix Eureka.</li> 
 <li id="ef13" name="ef13" style="text-align: left;">Server-side : eg: AWS ALB.</li> 
</ul> 
<figure id="8e3c" name="8e3c"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/0*-4rIpSgcZM0cKXzq" src="https://cdn-images-1.medium.com/max/800/0*-4rIpSgcZM0cKXzq" class="fr-fin fr-dib" /> 
 <figcaption>
   service discovery [9] 
 </figcaption> 
</figure> 
<h2 pid="62" style="text-align: left;"> Circuit Breaker Pattern </h2> 
<p pid="62" style="text-align: left;"> A service generally calls other services to retrieve data, and there is the chance that the downstream service may be down. There are two problems with this: first, the request will keep going to the down service, exhausting network resources, and slowing performance. Second, the user experience will be bad and unpredictable. The consumer should invoke a remote service via a proxy that behaves in a similar fashion to an electrical circuit breaker. When the number of consecutive failures crosses a threshold, the circuit breaker trips, and for the duration of a timeout period, all attempts to invoke the remote service will fail immediately. After the timeout expires the circuit breaker allows a limited number of test requests to pass through. If those requests succeed, the circuit breaker resumes normal operation. Otherwise, if there is a failure, the timeout period begins again. This pattern is suited to, prevent an application from trying to invoke a remote service or access a shared resource if this operation is highly likely to fail.</p> 
<figure id="f8f2" name="f8f2"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/0*Zx8wWPh_QHqqoV5u.png" src="https://cdn-images-1.medium.com/max/800/0*Zx8wWPh_QHqqoV5u.png" class="fr-fin fr-dib" /> 
 <figcaption> 
  <i style="">Circuit Breaker Pattern [10]</i> 
 </figcaption> 
</figure> 
<h2 pid="63" style="text-align: left;"> Blue-Green Deployment Pattern </h2> 
<p pid="63" style="text-align: left;"> With microservice architecture, one application can have many microservices. If we stop all the services then deploy an enhanced version, the downtime will be huge and can impact the business. Also, the rollback will be a nightmare. Blue-Green Deployment Pattern avoids this. The blue-green deployment strategy can be implemented to reduce or remove downtime. It achieves this by running two identical production environments, Blue and Green. Let’s assume Green is the existing live instance and Blue is the new version of the application. At any time, only one of the environments is live, with the live environment serving all production traffic. All cloud platforms provide options for implementing a blue-green deployment.</p> 
<figure id="2756" name="2756"> 
 <img data-src="https://cdn-images-1.medium.com/max/800/0*_WHTafxMA_0-C0V4.png" src="https://cdn-images-1.medium.com/max/800/0*_WHTafxMA_0-C0V4.png" class="fr-fin fr-dib" /> 
 <figcaption> 
  <i>Blue-Green Deployment Pattern</i> 
 </figcaption> 
</figure> 
<p pid="64" style="text-align: left;"> References</p> 
<p pid="65" style="text-align: left;">[1] “Microservice Architecture: Aligning Principles, Practices, and Culture” Book by Irakli Nadareishvili, Matt McLarty, and Michael Amundsen </p> 
<p pid="65" style="text-align: left;"> [2] <a data-href="https://microservices.io/patterns/decomposition/decompose-by-business-capability.html" href="https://microservices.io/patterns/decomposition/decompose-by-business-capability.html" rel="nofollow noopener" target="_blank">https://microservices.io/patterns/decomposition/decompose-by-business-capability.html</a> </p> 
<p pid="65" style="text-align: left;"> [3] <a data-href="https://www.baeldung.com/transactions-across-microservices" href="https://www.baeldung.com/transactions-across-microservices" rel="nofollow noopener" target="_blank">https://www.baeldung.com/transactions-across-microservices</a> </p> 
<p pid="65" style="text-align: left;"> [4] <a data-href="https://developer.ibm.com/articles/cl-strangler-application-pattern-microservices-apps-trs/" href="https://developer.ibm.com/articles/cl-strangler-application-pattern-microservices-apps-trs/" rel="nofollow noopener" target="_blank">https://developer.ibm.com/articles/cl-strangler-application-pattern-microservices-apps-trs/</a> </p> 
<p pid="65" style="text-align: left;"> [5] <a data-href="https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead" rel="nofollow noopener" target="_blank">https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead</a> </p> 
<p pid="65" style="text-align: left;"> [6] <a data-href="https://dzone.com/articles/design-patterns-for-microservices" href="https://dzone.com/articles/design-patterns-for-microservices" rel="nofollow noopener" target="_blank">https://dzone.com/articles/design-patterns-for-microservices</a> </p> 
<p pid="65" style="text-align: left;"> [7] <a data-href="https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs#event-sourcing-and-cqrs" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs#event-sourcing-and-cqrs" rel="nofollow noopener" target="_blank">https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs#event-sourcing-and-cqrs</a> </p> 
<p pid="65" style="text-align: left;"> [8] <a data-href="https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing" rel="nofollow noopener" target="_blank">https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing</a> </p> 
<p pid="65" style="text-align: left;"> [9] <a data-href="https://www.dineshonjava.com/microservices-with-spring-boot/" href="https://www.dineshonjava.com/microservices-with-spring-boot/" rel="nofollow noopener" target="_blank" style="background-color: rgb(255, 255, 255);">https://www.dineshonjava.com/microservices-with-spring-boot/</a> </p> 
<p pid="65" style="text-align: left;"> [10] <a data-href="https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker" rel="nofollow noopener" target="_blank" style="background-color: rgb(255, 255, 255);">https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker</a></p></div>
                </div>

                  <div id="bottom-bumper-container"></div>
                  <div class="article-tag-pill-container">
                      <span class="article-tag-pill">microservice</span>
                      <span class="article-tag-pill">Web Service</span>
                      <span class="article-tag-pill">Database</span>
                      <span class="article-tag-pill">mobile app</span>
                      <span class="article-tag-pill">Design</span>
                      <span class="article-tag-pill">Relational database</span>
                      <span class="article-tag-pill">Requests</span>
                      <span class="article-tag-pill">Circuit Breaker Pattern</span>
                      <span class="article-tag-pill">Data (computing)</span>
                      <span class="article-tag-pill">API</span>
                  </div>

                  <div class="attribution">
                      <p>Published at DZone with permission of <span>Madhuka Udantha<span>, DZone MVB</span></span>.
                        <span>
                          <a href="http://madhukaudantha.blogspot.com/2019/06/design-patterns-for-microservices.html" target="_blank">See the original article here.
                            <i class="icon-link-ext-alt"></i>
                          </a>
                        </span>
                      </p>
                    <p>Opinions expressed by DZone contributors are their own.</p>
                  </div>

                    <div class="related">
                      <h3>Popular on DZone</h3>
                        <ul>
                            <li class="relateddiv">
                              <a href="/articles/11-best-practices-to-do-functional-testing-on-the?fromrel=true">11 Best Practices to Do Functional Testing on the Cloud</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/refactoring-java-application-object-oriented-and-f?fromrel=true">Refactoring Java Application: Object-Oriented And Functional Approaches</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/the-engineers-guide-to-creating-a-technical-debt-p?fromrel=true">The Engineer’s Guide to Creating a Technical Debt Proposal</a>
                            </li>
                            <li class="relateddiv">
                              <a href="/articles/why-performance-projects-fail?fromrel=true">Why Performance Projects Fail</a>
                            </li>
                        </ul>
                      </div>
<div class="comments-overlay"></div>
<div id="comment-box">
  <div class="comment-box-wrapper">
    <div id="comment-input-editor"></div>
  </div>
  <div class="info hidden"></div>
  <div class="comments-content">
    <div class="comment-header">
      <hr />
      <span class="icon-comment">
        <span class="numOfComments"></span> Comments
      </span>
    </div>
    <div class="comments"></div>
  </div>
</div>
            </article>
          </div>

            <div id="above-pr-ad" class="bottom-ad-container">
              <div id="div-gpt-ad-1435246566686-11" data-gpt-slot="bottom"></div>
            </div>
            <div class="layout-card widget-top-border partner-resources-block" style="width:100%; margin-bottom: 1em;">
              <div class="main-container">
                <div class="featured-header">
                  <h2>
                      Microservices<span> Partner Resources</span>
                  </h2>
                </div>
                <div class="partner-resources-container">
                  <div id="div-gpt-ad-1435246566686-5" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr1"></div>
                  <div id="div-gpt-ad-1435246566686-6" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr2"></div>
                  <div id="div-gpt-ad-1435246566686-7" class="resource-block" data-gpt-slot="partner" data-gpt-position="pr3"></div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>

    <div id="bsa-parent" class="bottom-sticky-ad-container hide">
      <div class="container">
        <div class="col-md-9">
          <div class="fixed-bottom-div">
            <div class="inline-block">
              <div id="div-gpt-ad-1635294790718-12" data-gpt-desktop="true" class="bottom-sticky-ad"></div>
            </div>
            <div class="inline-block">
              <span id="close" class="bottom-sticky-ad-close-button" onclick="removeBottomStickyAd()">
                X
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

  <div class="modal fade bd-example-modal-lg" id="modal-message" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"></div>
        <div class="modal-body"></div>
      </div>
    </div>
  </div>
</div>

<script async>const articleTitle = 'Design Patterns for Microservices'
const articleUrl = 'https://dzone.com/articles/design-patterns-for-microservices-1'

const retweetLink = document.querySelector('#tweet-link')

function retweet(event) {
    event.preventDefault()
    event.stopPropagation()

    const twitter = 'https://twitter.com/intent/tweet'
    const params = '?text=' + encodeURIComponent(articleTitle) + '&url=' + articleUrl + '&ref=dzone.com&via=DZoneInc'
    const win = window.open(twitter + params, '_blank')
    win.focus()
}

retweetLink.addEventListener('click', retweet);

function showStatusMessage(options) {
  var modal = document.getElementById("modal-message");

  if(modal) {
    modal.classList.add(options.type);
    var modalBody = modal.querySelector(".modal-content .modal-body");
    var modalHeader = modal.querySelector(".modal-content .modal-header");

    modalHeader.innerText = options.header ? options.header : "";
    modalBody.innerText = options.body ? options.body : "" ;

    $(modal).modal("show");

    $(modal).on('hidden.bs.modal', function () {
      modal.classList.remove(options.type);
    });
  }
}

function showConfirmMessage(options) {
  var modal = document.getElementById("modal-message");

  if(modal) {
    modal.classList.add(options.type);
    var modalBody = modal.querySelector(".modal-content .modal-body");
    var modalHeader = modal.querySelector(".modal-content .modal-header");

    modalHeader.innerText = options.header ? options.header : "";
    modalBody.innerText = options.body ? options.body : "" ;

    if (options.textarea) {
      const textareaDiv = document.createElement('div')
      const textareaLabel = document.createElement('label')
      textareaLabel.setAttribute('for', 'modal-textarea')
      textareaLabel.innerText = options.textarea.label

      const textarea = document.createElement('textarea')
      textarea.id = 'modal-textarea'
      textarea.placeholder = (options.textarea.placeholder || '')
      textarea.setAttribute('rows', (options.textarea.rows || 3))
      textarea.classList.add('form-control', 'not-resizable')

      if (options.textarea.maxlength) {
        textarea.maxLength = options.textarea.maxlength
      }

      textareaDiv.appendChild(textareaLabel)
      textareaDiv.appendChild(textarea)
      modalBody.appendChild(textareaDiv)
    }

    var btnContainer = document.createElement("div");
    btnContainer.classList.add("btn-container");

    var noBtn = document.createElement("button");
    noBtn.innerText = options.noBtnText ? options.noBtnText : "No";
    noBtn.classList.add("no-btn");

    var yesBtn = document.createElement("button");
    yesBtn.innerText = options.yesBtnText ? options.yesBtnText : "Yes";
    yesBtn.classList.add("yes-btn");

    btnContainer.appendChild(noBtn);
    btnContainer.appendChild(yesBtn);

    modalBody.appendChild(btnContainer);

    $(modal).modal("show");

    $(noBtn).one("click", function() {
      $(modal).modal("hide");

      if(options.noCallback) {
        $(modal).one('hidden.bs.modal', function () {
          options.noCallback();
        });
      }
    });

    $(yesBtn).one("click", function() {
      $(modal).modal("hide");

      if(options.yesCallback) {
        $(modal).one('hidden.bs.modal', function () {
          options.yesCallback();
        });
      }
    });

    $(modal).on('hidden.bs.modal', function () {
      modal.classList.remove(options.type);
    });
  }
}
</script><link rel="stylesheet" media="all" href="https://dz2cdn4.dzone.com/themes/dz20/ftl/footer/styles.css">

<div id="ftl-footer">
  <div class="container-fluid footerOuter">
    <div class="row">
      <div class="col-md-12">
        <div class="container">
          <div class="row footer">
            <div class="col-md-12 footerWidget">
              <div class="row footerContainer footer">
                <div class="left col-xs-12 col-sm-7">
                  <div class="col-xs-12 social-media-icons footer-mobile">
                    <ul class="icons-only">
                      <li class="rss-icon" id="rss-footer-1">
                        <a href="/pages/feeds" target="_blank" rel="noreferrer noopener">
                          <i class="icon-rss-1"></i>
                        </a>
                      </li>
                      <li class="twitter-icon">
                        <a href="https://twitter.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-twitter"></i>
                        </a>
                      </li>
                      <li class="facebook-icon">
                        <a href="https://www.facebook.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-facebook-1"></i>
                        </a>
                      </li>
                      <li class="linkedin-icon">
                        <a href="https://www.linkedin.com/company/dzone/" target="_blank"
                           rel="noreferrer noopener">
                          <i class="icon-linkedin-1"></i>
                        </a>
                      </li>
                    </ul>
                  </div>

                  <div class="top-section col-xs-12">
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">ABOUT US</p>
                      <ul class="link-group">
                        <li><a href="/pages/about" rel="noreferrer noopener">About DZone</a></li>
                        <li><a href="mailto:support@dzone.com" rel="noreferrer noopener">Send feedback</a></li>
                        <li><a href="https://careers.dzone.com/" target="_blank" rel="noreferrer noopener">Careers</a></li>
                          <li><a href="/sitemap" rel="noreferrer noopener">Sitemap</a></li>
                      </ul>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">ADVERTISE</p>
                      <ul class="link-group">
                        <li><a href="https://advertise.dzone.com" target="_blank" rel="noreferrer noopener">Advertise with DZone</a></li>
                      </ul>
                    </div>
                  </div>

                  <div class="bottom-section col-xs-12">
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">CONTRIBUTE ON DZONE</p>
                      <ul class="bottom-top-list link-group">
                        <li><a href="/articles/dzones-article-submission-guidelines">Article Submission Guidelines</a></li>
                        <li><a href="/pages/mvb" rel="noreferrer noopener">MVB Program</a></li>
                        <li><a href="/pages/contribute" rel="noreferrer noopener">Become a Contributor</a></li>
                        <li><a href="/writers-zone" rel="noreferrer noopener">Visit the Writers' Zone</a></li>
                      </ul>

                      <p class="section-header">LEGAL</p>
                      <ul class="link-group">
                        <li><a href="/pages/tos" rel="noreferrer noopener">Terms of Service</a></li>
                        <li><a href="/pages/privacy" rel="noreferrer noopener">Privacy Policy</a></li>
                      </ul>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                      <p class="section-header">CONTACT US</p>
                      <ul class="link-group">
                        <li>600 Park Offices Drive</li>
                        <li>Suite 300</li>
                        <li>Durham, NC 27709</li>
                        <li><a href="mailto:support@dzone.com" rel="noreferrer noopener">support@dzone.com</a></li>
                        <li><a href="tel:+19196780300" rel="noreferrer noopener">+1 (919) 678-0300</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="right col-xs-12 col-sm-5">

                  <p class="connect-text">Let's be friends:</p>
                  <div class="col-xs-12 social-media-icons footer-wide">
                    <ul class="icons-only">
                      <li class="rss-icon" id="rss-footer-1">
                        <a href="/pages/feeds" target="_blank" rel="noreferrer noopener">
                          <i class="icon-rss-1"></i>
                        </a>
                      </li>
                      <li class="twitter-icon">
                        <a href="https://twitter.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-twitter"></i>
                        </a>
                      </li>
                      <li class="facebook-icon">
                        <a href="https://www.facebook.com/DZoneInc" target="_blank" rel="noreferrer noopener">
                          <i class="icon-facebook-1"></i>
                        </a>
                      </li>
                      <li class="linkedin-icon">
                        <a href="https://www.linkedin.com/company/dzone/" target="_blank"
                           rel="noreferrer noopener">
                          <i class="icon-linkedin-1"></i>
                        </a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-xs-12 powered-by">
                    <p>DZone.com is powered by&nbsp;</p>
                    <a href="https://devada.com/answerhub/" rel="noreferrer noopener">
                      <img src=""
                           data-src="https://dz2cdn4.dzone.com/themes/dz20/images/answerhub_logo_white_footer.png"
                           width="150"
                           height="56"
                           class="lazyload"
                           alt="AnswerHub logo">
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

  <script async>
      (function(w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
          var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j,f);
      })(window, document, 'script', 'dataLayer', 'GTM-K25QL22');
  </script>

  <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-410289-1', 'auto');
      ga('require', 'linkid', 'linkid.js');
      ga('require', 'GTM-TSD9TZP');
      ga('set', 'siteSpeedSampleRate', 25);
  </script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>
  <script async>const analytics = {
    'dimension1': 'microservices',
    'dimension2': 'article/analysis',
    'dimension3': '2019-07-30',
    'dimension4': '0',
    'dimension5': 'charleighs',
    'dimension7': 'microservice, web service, Database, mobile app, Design, Relational database, requests, Circuit Breaker Pattern, data, API',
    'dimension8': 'madhuka',
    'dimension9': 'undefined',
    'dimension10': 'wso2'
}

if (window.ga) {
    Object.keys(analytics).forEach(function(key) {
        window.ga('set', key, analytics[key])
    })

    window.ga('send', 'pageview')
}</script>

  <script>
      !function (e, o, n, i) {
          if (!e) {
              e = e || {}, window.permutive = e, e.q = [];
              var t = function () {
                  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (e) {
                      return (e ^ (window.crypto || window.msCrypto).getRandomValues(new Uint8Array(1))[0] & 15 >> e / 4).toString(16)
                  })
              };
              e.config = i || {}, e.config.apiKey = o, e.config.workspaceId = n, e.config.environment = e.config.environment || "production", (window.crypto || window.msCrypto) && (e.config.viewId = t());
              for (var g = ["addon", "identify", "track", "trigger", "query", "segment", "segments", "ready", "on", "once", "user", "consent"], r = 0; r < g.length; r++) {
                  var w = g[r];
                  e[w] = function (o) {
                      return function () {
                          var n = Array.prototype.slice.call(arguments, 0);
                          e.q.push({
                              functionName: o,
                              arguments: n
                          })
                      }
                  }(w)
              }
          }
      }(window.permutive, "bca90777-e088-4f2a-96c2-13ad18deeccc", "18ad0c5b-460c-4d19-a729-dc537805538f", {});
      window.googletag = window.googletag || {}, window.googletag.cmd = window.googletag.cmd || [], window.googletag.cmd.push(function () {
          if (0 === window.googletag.pubads().getTargeting("permutive").length) {
              var e = window.localStorage.getItem("_pdfps");
              window.googletag.pubads().setTargeting("permutive", e ? JSON.parse(e) : []);
              var o = window.localStorage.getItem("permutive-id");
              o && (window.googletag.pubads().setTargeting("puid", o), window.googletag.pubads().setTargeting("ptime", Date.now().toString())), window.permutive.config.viewId && window.googletag.pubads().setTargeting("prmtvvid", window.permutive.config.viewId), window.permutive.config.workspaceId && window.googletag.pubads().setTargeting("prmtvwid", window.permutive.config.workspaceId)
          }
      });


      permutive.addon('web', {
          'page': {
              'category': 'Microservices',
              'node': {
                  'authorCompany': 'wso2',
                  'authors': [973571, ],
                  'publishDate': new Date(1564444800000),
                  'sponsorAuthor': false,
                  'tags': ['microservice', 'web service', 'Database', 'mobile app', 'Design', 'Relational database', 'requests', 'Circuit Breaker Pattern', 'data', 'API', ],
                  'title': 'Design Patterns for Microservices',
                  'type': 'article',
              },
              'section': 'article',
          }
      });
  </script>
  <script async src="https://18ad0c5b-460c-4d19-a729-dc537805538f.edge.permutive.app/18ad0c5b-460c-4d19-a729-dc537805538f-web.js"></script>

  <script>
      const csrf = '-7038937818258235629'
      const articleId = 2841867
      const likes = 76
      const assetDomain = 'https://dz2cdn4.dzone.com'
      const codemirrorVars = {
          modeURI: 'https://dz2cdn4.dzone.com/themes/dz20/lib/codemirror/mode/',
          requiredScripts: [
              'https://dz2cdn4.dzone.com/themes/dz20/lib/codemirror/lib/codemirror.js',
              'https://dz2cdn4.dzone.com/themes/dz20/lib/codemirror/mode/meta.js'
          ]
      }

      const gptTags = {
          'zone': 'microservices',
          'topicTag': 'microservice,web service,Database,mobile app,Design,Relational database,requests,Circuit Breaker Pattern,data,API',
          'company': '',
          'siteSection': 'Zones',
          'articleCategory': 'analysis',
          'nodeID': '2841867',
          'authorID': '973571',
          'publishYear': '2019',
          'publishMonth': '07',
          'jobRole': '',
          'companySize': ''
      }

      const minCommentChar = 10;
      const peer39Enabled = true;
  </script>

  <script src="https://dz2cdn4.dzone.com/themes/dz20/lib/static/jquery/jquery.min.js"></script>
  <script async src="https://dz2cdn4.dzone.com/themes/dz20/lib/static/bootstrap/bootstrap.min.js"></script>
  <script async src="https://dz2cdn4.dzone.com/themes/dz20/ftl/article/ads.js"></script>



  <script>
      function loadScript(src) {
          return new Promise(function (resolve, reject) {
              const s = document.createElement('script')
              s.src = src
              s.onload = resolve
              s.onerror = reject
              document.head.appendChild(s)
          })
      }

      function loadStyle(href) {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = href
          document.head.appendChild(link)
      }

      function loadScriptsSync(deferred) {
          var p = Promise.resolve()
          for (var i = 0; i < deferred.length; i++) {
              let script = deferred[i]
              p = p.then(function() {
                  return loadScript(script)
              })
          }
          return p
      }

      function loadStyles() {
          const deferred = [
              'https://dz2cdn4.dzone.com/themes/dz20/lib/codemirror/lib/codemirror.css',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/comments/styles.css',
              'https://dz2cdn4.dzone.com/themes/dz20/lib/froala3/css/froala_editor.pkgd.min.css',
              'https://dz2cdn4.dzone.com/themes/dz20/lib/froala3/css/themes/gray.min.css',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/article/mini-profile.css'
          ]

          for (var i = 0; i < deferred.length; i++) {
              loadStyle(deferred[i])
          }
      }

      window.addEventListener('load', function(event) {
          loadStyles()
          loadScriptsSync([
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/header/auth-status.js',
              'https://dz2cdn4.dzone.com/themes/dz20/lib/lazysizes.min.js',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/article/codeblocks.js',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/article/activity-bar.js',
              'https://dz2cdn4.dzone.com/themes/dz20/lib/froala3/js/froala_editor.pkgd.min.js',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/froala/content.js',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/comments/content.js',
              'https://dz2cdn4.dzone.com/themes/dz20/ftl/article/content.js'
          ])
      })
  </script>
</body>
</html>