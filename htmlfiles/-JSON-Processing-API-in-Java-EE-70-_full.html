

<!DOCTYPE html>



<html lang="en">
<head><title>
	JSON Processing API in Java EE 7.0
</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    

    <script src='/jquery/jquery.js'></script>
    <script src='/bootstrap/bootstrap.min.js'></script>
    <link rel="icon" type="image/x-icon" href="../../logo.ico" /><link href="/bootstrap/bootstrap.min.css" rel="stylesheet" /><link href="/App_Themes/all/style.css" rel="stylesheet" type="text/css" />

    <style type='text/css'>
        ul.nav li.dropdown:hover ul.dropdown-menu {
            display: block;
            background-color: black;
        }

        ul.nav li.dropdown ul.dropdown-menu li a {
            color: white;
            background-color: black;
            font-size: 10pt;
        }
    </style>
</head>
<body>

    <div class="container-fluid">
        <a href="../../default.aspx"><img alt="Srikanth Technologies" class="img-responsive img-rounded" src="../../banner.jpg" style="border-width:0px;width: 100%" /></a>
        <nav class="navbar navbar-inverse" style="margin-bottom: 1px">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" 
                        data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="../../default.aspx">Home</a></li>
                    <li>
                        <a href="../blog.aspx">Blog</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Training<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../../schedule.aspx">Course Schedule</a></li>
                            <li>
                                <a href="../../coursesoffered.aspx">Courses Offered</a></li>
                            <li>
                                <a href="../../corporate_training.aspx">Corporate Training</a>
                            </li>
                            <li>
                                <a href="../../udemy/courses.aspx">Video Courses</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Resources<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../../projects.aspx">Projects</a></li>
                            <li>
                                <a href="../../programs.aspx">Programs</a></li>
                            <li>
                                <a href="../../videos/videos.aspx">Video Tutorials</a></li>
                            <li>
                                <a href="../../favourites.aspx">My Favourites</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="../../exam/takeexam.aspx">Exam</a></li>

                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Books<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../../booksread/books.aspx">Books Read</a></li>
                            <li>
                                <a href="../../books/index.aspx">Books Written</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../../testimonials.aspx">Testimonials</a></li>
                    <li>
                        <a href="../../feedback.aspx">Feedback</a></li>
                    <li>
                        <a href="../../faqs.aspx">FAQs</a>
                    </li>
                    <li>
                        <a href="../../aboutus.aspx">About</a>
                    </li>
                    <li>
                        <form class="navbar-form navbar-right" role="search"
                            action='/searchresult.aspx' id="cse-search-box">
                            <div class="input-group" style="width: 200px">
                                <input type="hidden" name="cx" value="partner-pub-1007005687223154:4e78dw8wbo7" />
                                <input type="hidden" name="cof" value="FORID:10" />
                                <input type="hidden" name="ie" value="ISO-8859-1" />
                                <input type="text" class="form-control" name="q" placeholder="Search" />
                                <div class="input-group-btn">
                                    <button type="submit" class="btn btn-default">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </li>
                 </ul>
            </div>
        </nav>
        <form name="aspnetForm" method="post" action="./javaee7_jsonapi.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm" class="form-horizontal" autocomplete="off">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMjA1Mjg0Njk5NQ9kFgJmD2QWAmYPZBYCAhMPZBYCAgEPZBYEAhsPPCsACQEADxYEHghEYXRhS2V5cxYAHgtfIUl0ZW1Db3VudAL/////D2RkAh0PD2QPEBYBZhYBFgIeDlBhcmFtZXRlclZhbHVlBQlqc29uX2plZTcWAQIFZGRk2PLE5t138WcUHb4UZrXfiWUPIGMEc2Fds67Mo9NGCQw=" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/WebResource.axd?d=IW7VY4y8pOc0drBmu283BqZInvSGeMYcuR1hh5LzMUXYuoGH3KXZykAan44zfczI1alXtuLJh4pVupOGRVajQ15QfHSUN54gePKRw8lye5E1&amp;t=637814408020000000" type="text/javascript"></script>


<script src="/WebResource.axd?d=h5XEo9wEWiRLPwSdAYTy6Evt6QtdQf6NQ54fPSNIj4RiaCRe1QS5CPIru4T26Ljf3OkxPz_lSwDvM-aKkP_UUS9SA57F0AJUoFBaieNFbgc1&amp;t=637814408020000000" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
//]]>
</script>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="E20DEB2B" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAAdic7j83BgINTPG1+Kkup8bVhfnT4jeRoPhVvo9sHYKmKC47QM6I0Y03sxflAwxKnlUndWZqUSaIU3lOIAWA7H2fW80i8hyI4rmsdIE7DupYpbe9nkyfrnQEd+HOC5epApLTt8WPd71BK37k0ubeELQtIRbZcnjjHryah95Kb8qVRUYcgN4dialiQ5sRwqVqlA=" />
</div>
            
    <style>
        table.photos {
            width: 100%;
        }

        p {
            padding-top: 5px;
        }

        h4 {
            color: maroon;
            font-weight: 800;
        }

        table.photos tr td img {
            border-color: black;
            border-width: 2px;
            width: 90%;
            height: 90%;
        }

        table.photos tr td {
            text-align: center;
        }
    </style>



    
<h1>JSON Processing API in Java EE 7.0</h1>
In this blog, we will understand how to use JSON Processing API introduced in Java EE 7.0. 

<h2>What is JSON?</h2>
JSON stands for <strong>JavaScript Object Notation</strong>.  It is a format where we have objects with a set of name-value pairs. The following is an example for JSON object.

<pre class="code">

{"name" : "Mr. Srikanth",  "occupation" : "Director", "company" : "Srikanth Technologies"}

</pre>

It is possible to have an object or an array within another object. The following example shows how to have an array of objects inside an object.

<pre class="code">

{ 
   "name" : "Mr. Srikanth",  "occupation" : "Director", "company" : "Srikanth Technologies",
   "contacts" : [  {"mobile" : "9059057000"}, { "email" : "srikanthpragada@yahoo.com"}]
}

</pre>

JSON is preferred to XML when it comes to sending data as JSON is compact compared with XML.&nbsp; 
    JSON is widely used in&nbsp; RESTful web services and AJAX. 
<p />
It is also easy to process JSON object in JavaScript as JSON object can be converted to JavaScript object using  <b>eval()</b> function in JavaScript. 

<h2>JSON API </h2>
Though Java didnâ€™t provide any API for JSON processing in the past, there were APIs provided by Google etc. I personally liked Google GSON library.  
The best part of it is; it can create JSON object from Java object or a Java collection (like ArrayList).

<p />
You can download GSON from <a  target="_blank" href="https://code.google.com/p/google-gson">here</a>.

<h2>Java EE and JSON</h2>
Starting from Java EE 7.0, support for JSON Processing is provided by Java.  It is called as JSON Processing in Java EE (JSR-353).  This API allows Java programmer to do the following:

<ul>
<li>Create JSON Object using Object Model </li>
<li>Generate JSON object using Streaming API</li>
<li>Navigate JSON data using Object Model</li>
<li>Parse JSON data using Streaming API</li>
</ul>


<h2>JSON API</h2>
The following are the classes and interfaces related to JSON API in Java EE.

<p />

<table border="1" cellpadding="3pt">
<tr><th>Class or Interface </th><th>Description </th> </tr>
<tr><td>Json</td><td>Contains static methods to create instances of JSON parsers, builders,generators. This class also contains methods to create parser, builder,and generator factory objects.</td></tr>
<tr><td>JsonReader</td> <td>Reads JSON data from a stream and creates an object model in memory.</td></tr>
<tr><td>JsonObjectBuilder,JsonArrayBuilder</td> <td>Creates an object model or an array model in memory by adding elements from application code.</td></tr>
<tr><td>JsonWriter</td><td>Writes an object model from memory to a stream.</td></tr>
<tr><td>JsonValue,JsonStructure,JsonObject,JsonArray,JsonString,JsonNumber</td><td>Represents data types for elements in JSON data.</td> </tr>
<tr><td>JsonParser</td><td>Represents an event-based parser that can read JSON data from a stream or from an object model.</td> </tr>
<tr><td>JsonGenerator </td><td>Writes JSON data to a stream one element at a time.</td> </tr>
</table>

<h2>Using JSON Processing API</h2>
The following programs demonstrate how to create JSON API provided by Java EE 7.0. 

<h3>Create JSON object using Object Model</h3>

<pre class="code">

import java.io.FileWriter;
import java.io.StringWriter;
import javax.json.Json;
import javax.json.JsonObject;
import javax.json.JsonObjectBuilder;
import javax.json.JsonWriter;

public class CreatJsonObject {

    public static void main(String[] args) throws Exception {

        JsonObjectBuilder builder = Json.createObjectBuilder();
        builder.add("name", "Srikanth");
        builder.add("occupation", "Director");
        builder.add("company", "Srikanth Technologies");

        JsonObject person = builder.build();

        StringWriter sw = new StringWriter();
        JsonWriter jw = Json.createWriter(sw);
        jw.writeObject(person);
        jw.close();
        System.out.println(sw.toString());
    }
}

</pre>

When you run the above program, the following output is generated:

<pre class="code">

{"name":"Srikanth","occupation":"Director","company":"Srikanth Technologies"}

</pre>

In case you want to write JSON object to a file, use the following code after you construct JsonObject:

<pre class="code">

   // write JSON object to a file -> c:\java\person.txt
        
   FileWriter fw = new FileWriter("c:\\java\\person.txt");
   JsonWriter fjw = Json.createWriter(fw);
   fjw.writeObject(person);
   fjw.close();
   fw.close();
        
   System.out.println("Wrote Object To File");

</pre>


<h3>Creating JSON Array with Object Model</h3>
You can write an object that contains an array as shown in the following example.  It creates an array with the name contacts and adds two objects to it. 

<pre class="code">

import java.io.StringWriter;
import javax.json.Json;
import javax.json.JsonArray;
import javax.json.JsonObject;
import javax.json.JsonObjectBuilder;
import javax.json.JsonWriter;

public class CreatJsonArray {

    public static void main(String[] args) {

        JsonObjectBuilder builder = Json.createObjectBuilder();
        builder.add("name", "Srikanth");
        builder.add("occupation", "Director");
        builder.add("company", "Srikanth Technologies");

       
        JsonArray contacts = Json.createArrayBuilder().add(
                Json.createObjectBuilder().add("email", "srikanthpragada@yahoo.com"))
                .add(Json.createObjectBuilder().add("mobile", "9059057000"))
                .build();

        builder.add("contacts", contacts); // contacts array

        JsonObject person = builder.build();

        StringWriter sw = new StringWriter();
        JsonWriter jw = Json.createWriter(sw);
        jw.writeObject(person);
        jw.close();

        System.out.println(sw.toString());
    } // main
 }
</pre>

The output string is as follows:

<pre class="code">

{"name":"Srikanth","occupation":"Director","company":"Srikanth Technologies","contacts":[{"email":"srikanthpragada@yahoo.com"},{"mobile":"9059057000"}]}

</pre>

<h3>Creating JSON Object using Generator</h3>
The following program creates an object using Generator. 

<pre class="code">

import java.io.StringWriter;
import javax.json.Json;
import javax.json.stream.JsonGenerator;

public class UsingGenerator {
    public static void main(String[] args) {
        StringWriter sw = new StringWriter();
        JsonGenerator gen = Json.createGenerator(sw);

        gen.writeStartObject()
                .write("name", "Srikanth Pragada")
                .write("email", "srikanthpragada@yahoo.com")
                .write("mobile", "34343434343")
                .writeEnd();

        gen.close();
        System.out.println(sw.toString());
    }
}

</pre>


<h3>Creating JSON Array using Generator</h3>
The following program creates a JSON Array using Generator and writes JSON content into a file.

<pre class="code">

import java.io.FileWriter;
import javax.json.Json;
import javax.json.stream.JsonGenerator;

public class WriteArrayWithGenerator {

    public static void main(String[] args) throws Exception {

        FileWriter writer = new FileWriter("c:\\java\\persondetails.txt");
        JsonGenerator gen = Json.createGenerator(writer);
        gen.writeStartObject()
                .write("name", "Srikanth")
                .write("occupation", "Director")
                .write("company", "Srikanth Technologies")
                .writeStartArray("contacts")
                .writeStartObject()
                .write("email", "srikanthpragada@yahoo.com")
                .writeEnd()
                .writeStartObject()
                .write("mobile", "9059057000")
                .writeEnd() // for object
                .writeEnd() // for array
                .writeEnd(); // for root object
        gen.close();
    }
}

</pre>

<h3>Read JSON Object using Object Model</h3>
JSON API allows reading JSON objects either using JsonReader or with JsonParser. This example shows how to use JsonReader.

<pre class="code">

import java.io.FileReader;
import javax.json.Json;
import javax.json.JsonArray;
import javax.json.JsonObject;
import javax.json.JsonReader;

public class DisplayPersonDetailsWithObjectModel {

    public static void main(String[] args) throws Exception {

        JsonReader reader = Json.createReader(new FileReader("c:\\java\\persondetails.txt"));
        JsonObject person = reader.readObject();
        
        System.out.println("Name       : "  +  person.getString("name"));
        System.out.println("Occupation : "  +  person.getString("occupation"));
        System.out.println("Company    : "  +  person.getString("company"));
        
        // display contacts
        JsonArray  contacts = person.getJsonArray("contacts");
        
        JsonObject jobj = contacts.getJsonObject(0);
        System.out.println("Email : " + jobj.getString("email"));
        
        jobj = contacts.getJsonObject(1);
        System.out.println("Mobile  : " + jobj.getString("mobile"));
    }
}

</pre>

The output of the above program is as follows:

<pre class="code">

Name       : Srikanth
Occupation : Director
Company    : Srikanth Technologies
Email : srikanthpragada@yahoo.com
Mobile  : 9059057000

</pre>


<h3>Reading JSON Object using Streaming API</h3>
The following program shows how to use JsonParser to parse JSON data and get one component at a time. It is left to us to determine the type of the event and handle it accordingly. 

<pre class="code">

import java.io.FileReader;
import javax.json.Json;
import javax.json.stream.JsonParser;
public class DisplayPersonWithStreamAPI {
    public static void main(String[] args) throws Exception {
        JsonParser parser = Json.createParser(new FileReader("c:\\java\\person.txt"));
        while (parser.hasNext()) {
            JsonParser.Event event = parser.next();
            switch (event) {
                case KEY_NAME:
                    System.out.print( parser.getString() + ":"); 
                    break;
                case VALUE_STRING:
                    System.out.println(parser.getString());
                    break;
            }
        }
    }
}

</pre>

<h2>Conclusion</h2>
With the introduction of API as part of Java EE 7.0, now it is possible to use standard API for JSON processing without having to resort to third party API. 
<p />
This is just the beginning of JSON API in Java. There is scope for improvement. There are plans for next version. We need to wait a little longer to get more comprehensive JSON API from Java. 
<p />

<input name="ctl00$ctl00$ContentPlaceHolder1$BlogContent$blogid" type="hidden" id="ctl00_ctl00_ContentPlaceHolder1_BlogContent_blogid" value="json_jee7" /><br />



    <p></p>
    
    
        <!--
        <div class="form-group">
            <h3 style="color: blue">Post Your Comment </h3>
            <span id="ctl00_ctl00_ContentPlaceHolder1_lblMsg" style="font-weight:bold;"></span>
            <p></p>
            <img src="../../drawimage.aspx" alt="Image" style="border-width:0px;" />
            <br />
            <span class="control-label">Enter the code given in the above image : </span>
            <br />
            <input name="ctl00$ctl00$ContentPlaceHolder1$txtCodeNumber" type="text" id="ctl00_ctl00_ContentPlaceHolder1_txtCodeNumber" style="width: 300px" />
            <span id="ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2" style="color:Red;display:none;">Please enter four digits!</span>
            <span id="ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator" style="color:Red;display:none;">Please enter code given in the image!</span>
            <span id="ctl00_ctl00_ContentPlaceHolder1_MessageLabel" class="text-danger"></span>
        </div>
        <div class="form-group">
            <span class="control-label">Enter Your Name : </span>
            <input name="ctl00$ctl00$ContentPlaceHolder1$txtName" type="text" id="ctl00_ctl00_ContentPlaceHolder1_txtName" class="form-control" />
            <span id="ctl00_ctl00_ContentPlaceHolder1_rfvName" style="color:Red;display:none;">Name Is Required!</span></td>
        </div>

        <div class="form-group">
            <span class="control-lable">Enter Your Email Address : </span>
            <input name="ctl00$ctl00$ContentPlaceHolder1$txtEmail" type="text" id="ctl00_ctl00_ContentPlaceHolder1_txtEmail" class="form-control" />
        </div>

        <div class="form-group">
            <span class="control-label">Enter Your Comment : </span>
            <textarea name="ctl00$ctl00$ContentPlaceHolder1$txtComment" rows="5" cols="80" id="ctl00_ctl00_ContentPlaceHolder1_txtComment" class="form-control" Required="requirerd">
</textarea>
            <span id="ctl00_ctl00_ContentPlaceHolder1_rfvComment" style="color:Red;display:none;">Comment Is Required!</span>
            <p></p>
            <input type="submit" name="ctl00$ctl00$ContentPlaceHolder1$btnPost" value="Post Comment" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ctl00$ContentPlaceHolder1$btnPost&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="ctl00_ctl00_ContentPlaceHolder1_btnPost" />
        </div>
   
    <p></p>
    <br />
    

            -->

        
<script type="text/javascript">
//<![CDATA[
var Page_Validators =  new Array(document.getElementById("ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2"), document.getElementById("ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator"), document.getElementById("ctl00_ctl00_ContentPlaceHolder1_rfvName"), document.getElementById("ctl00_ctl00_ContentPlaceHolder1_rfvComment"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
var ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2 = document.all ? document.all["ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2"] : document.getElementById("ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2");
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2.controltovalidate = "ctl00_ctl00_ContentPlaceHolder1_txtCodeNumber";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2.errormessage = "Please enter four digits!";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2.display = "Dynamic";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2.evaluationfunction = "RegularExpressionValidatorEvaluateIsValid";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator2.validationexpression = "^[0-9]{4}$";
var ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator = document.all ? document.all["ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator"] : document.getElementById("ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator");
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator.controltovalidate = "ctl00_ctl00_ContentPlaceHolder1_txtCodeNumber";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator.errormessage = "Please enter code given in the image!";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator.display = "Dynamic";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ctl00_ContentPlaceHolder1_codenumbervalidator.initialvalue = "";
var ctl00_ctl00_ContentPlaceHolder1_rfvName = document.all ? document.all["ctl00_ctl00_ContentPlaceHolder1_rfvName"] : document.getElementById("ctl00_ctl00_ContentPlaceHolder1_rfvName");
ctl00_ctl00_ContentPlaceHolder1_rfvName.controltovalidate = "ctl00_ctl00_ContentPlaceHolder1_txtName";
ctl00_ctl00_ContentPlaceHolder1_rfvName.errormessage = "Name Is Required!";
ctl00_ctl00_ContentPlaceHolder1_rfvName.display = "Dynamic";
ctl00_ctl00_ContentPlaceHolder1_rfvName.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ctl00_ContentPlaceHolder1_rfvName.initialvalue = "";
var ctl00_ctl00_ContentPlaceHolder1_rfvComment = document.all ? document.all["ctl00_ctl00_ContentPlaceHolder1_rfvComment"] : document.getElementById("ctl00_ctl00_ContentPlaceHolder1_rfvComment");
ctl00_ctl00_ContentPlaceHolder1_rfvComment.controltovalidate = "ctl00_ctl00_ContentPlaceHolder1_txtComment";
ctl00_ctl00_ContentPlaceHolder1_rfvComment.errormessage = "Comment Is Required!";
ctl00_ctl00_ContentPlaceHolder1_rfvComment.display = "Dynamic";
ctl00_ctl00_ContentPlaceHolder1_rfvComment.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ctl00_ContentPlaceHolder1_rfvComment.initialvalue = "";
//]]>
</script>


<script type="text/javascript">
//<![CDATA[

var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        //]]>
</script>
</form>
    </div>

</body>
</html>
