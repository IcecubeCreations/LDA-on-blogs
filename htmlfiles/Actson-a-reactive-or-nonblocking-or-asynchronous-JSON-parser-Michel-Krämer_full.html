<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Michel KrÃ¤mer"><meta property=og:title content="Michel KrÃ¤mer&#039;s Portfolio and Blog"><meta property=og:type content=blog><meta property=og:url content=https://michelkraemer.com><meta property=og:image content=https://michelkraemer.com/images/michel-kraemer-2019-09.jpg><meta property=og:site_name content="Michel KrÃ¤mer&#039;s Portfolio and Blog"><meta name=description content="The first version of Actson has just been released."><meta name=robots content=index,follow><title>Actson: a reactive (or non-blocking, or asynchronous) JSON parser &laquo; Michel KrÃ¤mer</title><link rel=canonical href=https://michelkraemer.com><link rel=alternate type=application/rss+xml title="Michel KrÃ¤mer RSS Feed" href=https://michelkraemer.com/feed><link rel=pingback href=https://webmention.io/michelkraemer.com/xmlrpc><link rel=webmention href=https://webmention.io/michelkraemer.com/webmention><link rel=apple-touch-icon sizes=57x57 href=https://michelkraemer.com/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://michelkraemer.com/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://michelkraemer.com/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://michelkraemer.com/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://michelkraemer.com/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://michelkraemer.com/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://michelkraemer.com/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://michelkraemer.com/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://michelkraemer.com/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://michelkraemer.com/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://michelkraemer.com/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://michelkraemer.com/favicon-16x16.png sizes=16x16><link rel=manifest href=https://michelkraemer.com/manifest.json><meta name=msapplication-TileColor content=#da532c><meta name=msapplication-TileImage content=https://michelkraemer.com/mstile-144x144.png><meta name=theme-color content=#ffffff><link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300" rel=stylesheet><link href=https://michelkraemer.com/stylesheets/bootstrap-e6dd00f5e01ee5fcbd7ebafa4b904970.css rel=stylesheet><link href=https://michelkraemer.com/stylesheets/main-549ac73f8cf77eea774f2c58df2a1aef.css rel=stylesheet><link href=https://michelkraemer.com/stylesheets/fa-svg-with-js-da21f886a92b68f31ac976de56ee93cf.css rel=stylesheet></head><body class="layout-post page-actson-reactive-json-parser"><nav class="navbar fixed-top navbar-expand-lg navbar-light" id=main-navbar><div class=container><a class=navbar-brand href=https://michelkraemer.com><img src=https://michelkraemer.com/images/logo_no_text.png width=46 height=45> Michel KrÃ¤mer</a> <button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://michelkraemer.com/#research>Research</a></li><li class=nav-item><a class=nav-link href=https://michelkraemer.com/#projects>Projects</a></li><li class=nav-item><a class=nav-link href=https://michelkraemer.com/#photography>Photography</a></li><li class=nav-item><a class=nav-link href=https://michelkraemer.com/#music>Music</a></li><li class=nav-item><a class=nav-link href=https://michelkraemer.com/#contact>Contact</a></li><li class=nav-item><a class=nav-link href=https://michelkraemer.com/blog/ >Blog</a></li></ul></div></div></nav><section id=post><div class="container container-small"><div class=row><div class="col-12 the-post"><h1>Actson: a reactive (or non-blocking, or asynchronous) JSON parser</h1><p>Today Iâm happy to anÂ­nounce the very first verÂ­sion of ActÂ­son, a reÂ­actÂ­ive JSON parser (someÂ­times reÂ­ferred to as non-blockÂ­ing or asynÂ­chronÂ­ous). ActÂ­son is event-based and can be used toÂ­gether with reÂ­actÂ­ive libÂ­rarÂ­ies/âtool-kits such as <a href=https://github.com/ReactiveX/RxJava>RxÂ­Java</a> or <a href=http://vertx.io/ >Vert.x</a>. The libÂ­rary is very small and has no deÂ­pendÂ­enÂ­cies. It only reÂ­quires Java 7 (or higher).</p><p>DownÂ­load the ActÂ­son binÂ­arÂ­ies from <a href=http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22de.undercouch%22%20AND%20a%3A%22actson%22>http://âsearch.maven.org</a> or the source code from the <a href=https://github.com/michel-kraemer/actson>GitÂ­Hub reÂ­posÂ­itÂ­ory</a>. ActÂ­son is reÂ­leased unÂ­der the <a href=https://opensource.org/licenses/MIT>MIT liÂ­cense</a>.</p><h2 id=why-another-json-parser->Why another JSON parser?</h2><ul><li><strong>Non-blockÂ­ing.</strong> Other JSON parsÂ­ers use blockÂ­ing I/âO (i.e. they read from an <code>InputStream</code>). If you want to deÂ­velop a reÂ­actÂ­ive apÂ­plicÂ­aÂ­tion you should use non-blockÂ­ing I/âO (see the <a href=http://www.reactivemanifesto.org/ >ReÂ­actÂ­ive ManiÂ­festo</a>).</li><li><strong>Big Data.</strong> Most parsÂ­ers read the full JSON text into memory to map it to a POJO, for exÂ­ample. ActÂ­son can handle arÂ­bitÂ­rarÂ­ily large JSON text. It is event-based and can be used for streamÂ­ing.</li><li><strong>GeoRÂ­ocket.</strong> ActÂ­son was primarÂ­ily deÂ­veloped for <a href=http://georocket.io>GeoRÂ­ocket</a>, a high-perÂ­formÂ­ance reÂ­actÂ­ive data store for geoÂ­spaÂ­tial files. We use <a href=https://github.com/FasterXML/aalto-xml>Aalto XML</a> to parse XML in a non-blockÂ­ing way and we needed something simÂ­ilar for GeoRÂ­ockÂ­etâs <a href=http://geojson.org/ >GeoJSON</a> supÂ­port.</li></ul><h2 id=usage>Usage</h2><p>The JSON parser gets its inÂ­put data from a feeder. ActÂ­son uses a push-pull apÂ­proach: push data into the feeder unÂ­til it is full. Then call the parser unÂ­til it wants more data. ReÂ­peat this proÂ­cess unÂ­til the whole JSON text has been parsed.</p><p>The folÂ­lowÂ­ing snipÂ­pet demonÂ­strates how you can use the parser seÂ­quenÂ­tially.</p><pre><code class="hljs java"><span class=hljs-comment>// JSON text to parse</span>
<span class=hljs-keyword>byte</span>[] json = <span class=hljs-string>"{\"name\":\"Elvis\"}"</span>.getBytes(StandardCharsets.UTF_8);

JsonParser parser = <span class=hljs-keyword>new</span> JsonParser(StandardCharsets.UTF_8);

<span class=hljs-keyword>int</span> pos = <span class=hljs-number>0</span>; <span class=hljs-comment>// position in the input JSON text</span>
<span class=hljs-keyword>int</span> event; <span class=hljs-comment>// event returned by the parser</span>
do {
    <span class=hljs-comment>// feed the parser until it returns a new event</span>
    <span class=hljs-keyword>while</span> ((event = parser.nextEvent()) == JsonEvent.NEED_MORE_INPUT) {
        <span class=hljs-comment>// provide the parser with more input</span>
        pos += parser.getFeeder().feed(json, pos, json.length - pos);

        <span class=hljs-comment>// indicate end of input to the parser</span>
        <span class=hljs-keyword>if</span> (pos == json.length) {
            parser.getFeeder().done();
        }
    }

    <span class=hljs-comment>// handle event</span>
    System.out.println(<span class=hljs-string>"JSON event: "</span> + event);
    <span class=hljs-keyword>if</span> (event == JsonEvent.ERROR) {
        <span class=hljs-keyword>throw</span> <span class=hljs-keyword>new</span> IllegalStateException(<span class=hljs-string>"Syntax error in JSON text"</span>);
    }
} <span class=hljs-keyword>while</span> (event != JsonEvent.EOF);</code></pre><h2 id=reactive-non-blocking-examples>Reactive, non-blocking examples</h2><p>Find more comÂ­plex and elabÂ­orÂ­ate usÂ­age exÂ­amples in the <a href=https://github.com/michel-kraemer/actson>GitÂ­Hub reÂ­posÂ­itÂ­ory</a>.</p><h2 id=similar-libraries>Similar libraries</h2><ul><li><a href=https://github.com/FasterXML/jackson>JackÂ­son</a> has a streamÂ­ing API that proÂ­duces JSON tokens/âevents. However, it uses blockÂ­ing I/âO beÂ­cause it reads from an <code>InputStream</code>.</li><li><a href=https://github.com/FasterXML/aalto-xml>Aalto XML</a> is simÂ­ilar to ActÂ­son but parses XML inÂ­stead of JSON.</li></ul><h2 id=acknowledgments>Acknowledgments</h2><p>The event-based parser code and the JSON files used for testÂ­ing are largely based on the file <a href=http://www.json.org/JSON_checker/ >JSON_checker.c</a> and the JSON test suite from <a href=http://www.json.org/ >JSON.org</a> oriÂ­ginÂ­ally reÂ­leased unÂ­der <a href=https://github.com/michel-kraemer/actson/blob/master/LICENSE_JSON_checker>this liÂ­cense</a> (baÂ­sicÂ­ally MIT liÂ­cense).</p></div><div class="col-12 meta"><hr><div class="d-flex flex-row postedby justify-content-center align-items-center flex-wrap"><a href=https://michelkraemer.com><img src=https://michelkraemer.com/images/michel-kraemer-2019-09-256x256.jpg width=128 height=128 class=img-fluid></a><div class=pl-3><p class="text-center text-sm-left pt-3 pb-3">Posted by <a href=https://michelkraemer.com>Michel KrÃ¤mer</a><br>on August, 19th 2016.</p></div></div><hr><div id=comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname="michelkraemer",disqus_identifier="/actson-reactive-json-parser",disqus_url="https://michelkraemer.com/actson-reactive-json-parser";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div><div class=footer-prev-next-posts><div class=container><div class=row><div class="col-md-4 post-preview"><h2><a href=https://michelkraemer.com/actson-1.2.0>Next post</a></h2><h3><a href=https://michelkraemer.com/actson-1.2.0>Actson 1.2.0 with RFC&nbsp;7159 compliance</a></h3><span class=ellipsis><p>The new verÂ­sion of <a href=https://github.com/michel-kraemer/actson>ActÂ­son</a> 1.2.0 has just been reÂ­leased. ActÂ­son is a reÂ­actÂ­ive JSON parser (someÂ­times reÂ­ferred to as non-blockÂ­ing or asynÂ­chronÂ­ous). It is event-based and can be used toÂ­gether with reÂ­actÂ­ive libÂ­rarÂ­ies/âtool-kits such as <a href=https://github.com/ReactiveX/RxJava>RxÂ­Java</a> or <a href=http://vertx.io/ >Vert.x</a>.</p></span></div><div class=col-md-4></div><div class="col-md-4 post-preview"><h2><a href=https://michelkraemer.com/gradle-download-task-3.0.0>Previous post</a></h2><h3><a href=https://michelkraemer.com/gradle-download-task-3.0.0>gradle-download-task 3.0.0</a></h3><span class=ellipsis><p>The new verÂ­sion of the <a href=http://www.gradle.org/ >Gradle</a> plugÂ­in <a href=https://github.com/michel-kraemer/gradle-download-task>gradle-downÂ­load-task</a> 3.0.0 has just been reÂ­leased. The plugÂ­in provides a <code>Download</code> task that disÂ­plays proÂ­gress inÂ­formÂ­aÂ­tion while downÂ­loadÂ­ing files, just like Gradle does when it fetches an arÂ­tiÂ­fact from a reÂ­posÂ­itÂ­ory.</p></span></div></div></div></div><div class=footer-related-posts><div class=container><div class=row><div class=col-12><h2>Related posts</h2></div><div class="col-md-4 post-preview"><h3><a href=https://michelkraemer.com/actson-1.2.0>Actson 1.2.0 with RFC&nbsp;7159 compliance</a></h3><span class=ellipsis><p>The new verÂ­sion of <a href=https://github.com/michel-kraemer/actson>ActÂ­son</a> 1.2.0 has just been reÂ­leased. ActÂ­son is a reÂ­actÂ­ive JSON parser (someÂ­times reÂ­ferred to as non-blockÂ­ing or asynÂ­chronÂ­ous). It is event-based and can be used toÂ­gether with reÂ­actÂ­ive libÂ­rarÂ­ies/âtool-kits such as <a href=https://github.com/ReactiveX/RxJava>RxÂ­Java</a> or <a href=http://vertx.io/ >Vert.x</a>.</p></span></div><div class="col-md-4 post-preview"><h3><a href=https://michelkraemer.com/binary-json-with-bson4jackson>Binary JSON with bson4jackson</a></h3><span class=ellipsis><p>ReÂ­cently, JSON has beÂ­come an exÂ­celÂ­lent alÂ­ternÂ­atÂ­ive to XML. But most JSON parsÂ­ers writÂ­ten in Java are still <a href=https://github.com/eishay/jvm-serializers/wiki>rather slow</a>. On my search for faster libÂ­rarÂ­ies I found two things: <a href=http://bsonspec.org>BSON</a> and <a href=http://wiki.fasterxml.com/JacksonHome>JackÂ­son</a>.<span id=more></span></p></span></div><div class="col-md-4 post-preview"><h3><a href=https://michelkraemer.com/improved-mongodb-compatibility-for-bson4jackson>Improved MongoDB compatibility for bson4jackson</a></h3><span class=ellipsis><p>VerÂ­sion 1.2.0 of <a href=https://github.com/michel-kraemer/bson4jackson>bson4Â­jackÂ­son</a> has just been reÂ­leased. bson4Â­jackÂ­son adds supÂ­port for BSON, a binÂ­ary repÂ­resÂ­entÂ­aÂ­tion of JSON, to the <a href=http://wiki.fasterxml.com/JacksonHome>JackÂ­son</a> JSON proÂ­cessor. Thanks to conÂ­triÂ­buÂ­tions from the comÂ­munity, the latest reÂ­lease of bson4Â­jackÂ­son now inÂ­cludes betÂ­ter supÂ­port for MonÂ­goDB.<span id=more></span></p></span></div></div></div></div></section><footer><div class=container><p>Copyright &copy; 2009-2022 Michel KrÃ¤mer. <span class=text-nowrap>All rights reserved.</span></p></div><p><a href=# data-toggle=modal data-target=#modal-legal-notice>Legal notice/Impressum</a></p><div class="modal fade" id=modal-legal-notice tabindex=-1 role=dialog><div class=modal-dialog role=document><div class=modal-content><div class=modal-body><div class=container><div class="row justify-content-md-center"><div class="col-md-10 col-lg-8"><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h2>Legal notice/Impressum</h2><p>Information in accordance with section 5 TMG</p><p>Michel Kr&auml;mer<br>Buchenweg 14<br>35418 Buseck<br>Germany</p><h3 class=mt-5>Contact</h3><p>E-Mail: <a href=mailto:michel@undercouch.de>michel@undercouch.de</a><br>Website: <a href=https://michelkraemer.com target=_blank>https://michelkraemer.com</a></p><h3 class=mt-5>Person responsible for content</h3><p>in accordance with 55 Abs. 2 RStV</p><p>Michel Kr&auml;mer</p><h3 class=mt-5>Disclaimer</h3><h4>Accountability for content</h4><p>The contents of my pages have been created with the utmost care. However, I cannot guarantee the contentsâ accuracy, completeness or topicality. According to statutory provisions, I am furthermore responsible for my own content on these web pages. In this context, please note that I am accordingly not obliged to monitor merely the transmitted or saved information of third parties, or investigate circumstances pointing to illegal activity. My obligations to remove or block the use of information under generally applicable laws remain unaffected by this as per &sect;&sect; 8 to 10 of the Telemedia Act (TMG).</p><h4>Accountability for links</h4><p>Responsibility for the content of external links (to web pages of third parties) lies solely with the operators of the linked pages. No violations were evident to me at the time of linking. Should any legal infringement become known to me, I will remove the respective link immediately.</p><h4>Copyright</h4><p>My web pages and their contents are subject to German copyright law. Unless expressly permitted by law (&sect; 44a et seq. of the copyright law), every form of utilizing, reproducing or processing works subject to copyright protection on my web pages requires the prior consent of the respective owner of the rights. Individual reproductions of a work are allowed only for private use, so must not serve either directly or indirectly for earnings. Unauthorized utilization of copyrighted works is punishable (&sect; 106 of the copyright law).</p><p>Source: <a href=https://www.twigg.de/haftungsausschlussimpressumenglisch.htm target=_blank rel=noopener>twigg.de</a></p></div></div></div></div></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js integrity=sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T crossorigin=anonymous></script><script src=https://michelkraemer.com/js/headroom.min-1d74fdf8ac034ef66a3048692567b196.js></script><script src=https://michelkraemer.com/js/fa-svg-600de6dcbd22139d1715f528583a9b10.js></script><script src=https://michelkraemer.com/js/common-b1c0071e6470d8ca79ef275995007163.js></script><script type=text/javascript>var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="https://michelkraemer.com/hidden_piwik/";_paq.push(["setTrackerUrl",e+"js/"]),_paq.push(["setSiteId","2"]),_paq.push(["setAPIUrl",e]);var a=document,t=a.createElement("script"),r=a.getElementsByTagName("script")[0];t.type="text/javascript",t.defer=!0,t.async=!0,t.src=e+"js/",r.parentNode.insertBefore(t,r)}()</script><noscript><img src="https://michelkraemer.com/hidden_piwik/js/?idsite=2&amp;rec=1" style=border:0 alt=""></noscript><script src=https://michelkraemer.com/js/jquery.dotdotdot-075556b85cd7051d1cfd0066924dc480.js></script><script src=https://michelkraemer.com/js/applyellipsis-448e81b7dc7a94bd9c31056fbc650104.js></script><script src=https://michelkraemer.com/js/resizepostheadings-2d82b38f02805ec00123885fd2a932a1.js></script></body></html>