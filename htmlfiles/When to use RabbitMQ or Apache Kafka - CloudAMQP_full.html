<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>When to use RabbitMQ or Apache Kafka - CloudAMQP</title>
<meta content='If you’re asking yourself if Apache Kafka is better than RabbitMQ or if RabbitMQ is more reliable than Apache Kafka, I want to stop you right there. This article will discuss both from a broader perspective. It has focus is on the functionality offered by both systems and will guide you to make a good decision regarding which system to use when.' name='description'>
<meta content='RabbitMQ, MQ, CloudAMQP, AMQP, hosted RabbitMQ, RabbitMQ hosting, cloud AMQP, message, queues, hosting, cloud, decouple, distrubute, scale, ' name='keywords'>
<meta content='qP-zj5OL535dQC2SNy0qko_ofW5GWeYpfrE23axJIvE' name='google-site-verification'>
<link href='https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html' rel='canonical'>
<link href='/css/cloudamqp.css' rel='stylesheet' type='text/css'>
<link href='/favicon.ico' rel='icon' type='image/x-icon'>
<link href='/rss' rel='alternate' title='CloudAMQP Blog feed' type='application/rss+xml'>
<link href='/changelog/rss' rel='alternate' title='CloudAMQP Changelog feed' type='application/rss+xml'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<meta content='When to use RabbitMQ or Apache Kafka - CloudAMQP' property='og:title'>
<meta content='https://www.cloudamqp.com/img/blog/rabbitmqapache.jpg' property='og:image'>
<meta content='CloudAMQP' property='og:site_name'>
<meta content='website' property='og:type'>
<meta content='If you’re asking yourself if Apache Kafka is better than RabbitMQ or if RabbitMQ is more reliable than Apache Kafka, I want to stop you right there. This article will discuss both from a broader perspective. It has focus is on the functionality offered by both systems and will guide you to make a good decision regarding which system to use when.' property='og:description'>
<meta content='https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html' property='og:url'>
<meta content='summary_large_image' name='twitter:card'>
<meta content='@cloudamqp' name='twitter:site'>
<meta content='When to use RabbitMQ or Apache Kafka - CloudAMQP' name='twitter:title'>
<meta content='If you’re asking yourself if Apache Kafka is better than RabbitMQ or if RabbitMQ is more reliable than Apache Kafka, I want to stop you right there. This article will discuss both from a broader perspective. It has focus is on the functionality offered by both systems and will guide you to make a good decision regarding which system to use when.' name='twitter:description'>
<meta content='https://www.cloudamqp.com/img/blog/rabbitmqapache.jpg' name='twitter:image'>
<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-29704653-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body>
<script src='/js/jquery-3.6.0.min.js' type='text/javascript'></script>
<script src='/js/popper.min.js' type='text/javascript'></script>
<script src='/js/bootstrap.min.js' type='text/javascript'></script>
<nav class='navbar navbar-expand-md navbar-light'>
<div class='container'>
<a class='navbar-brand' href='/'>
<img class='logo' src='/img/cloudamqp-logo.png'>
CloudAMQP
</a>
<button aria-controls='camqpnavbar' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler navbar-toggler-right' data-target='#camqpnavbar' data-toggle='collapse' type='button'>
<span class='navbar-toggler-icon'></span>
</button>
<div class='collapse navbar-collapse' id='camqpnavbar'>
<ul class='navbar-nav mx-auto'>
<li class='nav-item'>
<a class='nav-link' href='/tour.html'>Tour</a>
</li>
<li class='nav-item'>
<a class='nav-link' href='/plans.html'>Pricing</a>
</li>
<li class='nav-item'>
<a class='nav-link' href='/docs/index.html'>Documentation</a>
</li>
<li class='nav-item'>
<a class='nav-link' href='/support.html'>Support</a>
</li>
<li class='nav-item active'>
<a class='nav-link' href='/blog/index.html'>Blog</a>
</li>
</ul>
<ul class='navbar-nav'>
<li class='nav-item'>
<a class='nav-link' href='https://customer.cloudamqp.com/'>Login</a>
</li>
<li class='nav-item'>
<a class='btn btn-outline-secondary' href='https://customer.cloudamqp.com/signup'>
<span class='d-md-none d-lg-inline'>Get Started</span>
<span class='d-none d-md-inline d-lg-none'>Start</span>
</a>
</li>
</ul>
</div>
</div>
</nav>
<section class='blog'></section>
<div class='blog-header text-center' style='background-image: url(/img/blog/rabbitmqapache.jpg);'>
<div class='blog-title' style='background-color: rgba(170, 83, 33, 0.8);'>
<h1>When to use RabbitMQ or Apache Kafka</h1>
<p class='post-meta'>
<i aria-hidden='true' class='fa fa-clock-o'></i>
<time datetime='2019-12-12'>
2019-12-12
</time>
</p>
</div>
</div>
<section class='blog-post'>
<div class='container'>
<div class='row'>
<div class='col-lg-9 col-md-8 col-sm-12 blog-content'>
<div class='lead'>
If you’re asking yourself if Apache Kafka is better than RabbitMQ or if
RabbitMQ is more reliable than Apache Kafka, I want to stop you right there.
This article will discuss both from a broader perspective. It has focus is on
the functionality offered by both systems and will guide you to make a good
decision regarding which system to use when.
</div>
<p>
Some articles on the web make Apache Kafka shine in front of RabbitMQ, and
others do the opposite. A lot of us could plead guilty to listening to the
hype and running with the crowd. I feel that it's important to know that the
decision of whether to go with RabbitMQ or Kafka is dependent on the
requirements of your project, and a true comparison can only be made if you
have used them both with the correct setup in a fitting scenario.
</p>
<p>
84codes and I have been in the industry for a long time providing hosted
solutions for both RabbitMQ through the service CloudAMQP, and Apache Kafka
through the service CloudKarafka. Since I have seen so many use cases and
different application setups by both CloudAMQP and CloudKarafka users, I feel
like I can authoritatively answer use case questions, based on my experience,
on both RabbitMQ and Apache Kafka.
</p>
<p>
In this article, my mission is to share insights based on the many
developer-to-developer chats I have had over the years and to try to convey
their thoughts about why they were choosing a specific message broker service
over another.
</p>
<div class='codes-info-box mt-5 mb-5'>
<p>
<strong>
The terminology used in this article includes:
</strong>
</p>
<p>
A
<strong>
message queue
</strong>
is a queue in RabbitMQ, and this “queue” in Kafka is referred
to as a log, but to simplify the information in the article, I will refer to
queues instead of switching to ‘log’ all the time.
</p>
<p>
A message in Kafka is often called a
<strong>record,</strong>
but again, I will refer to
messages in order to simplify the information here.
</p>
<p>
When I write about a
<strong>topic</strong>
in Kafka, you can think of it as a categorization
inside a message queue. Kafka topics are divided into partitions which contain
records in an unchangeable sequence.
</p>
</div>
<p>
Both systems pass messages between producers and consumers through queues or
topics. A message can include any kind of information. It could, for example,
have information about an event that has happened on a website or it could be
a simple text message that triggers an event on another application.
</p>
<p>
This kind of system is ideal for connecting different components,
building microservices, real-time streaming of data or when passing work
to remote workers.
</p>
<p>
According to
<a href='https://www.confluent.io/press-release/confluent-strengthens-streaming-platform-take-enterprises-era-real-time/'>
Confluent,
</a>
more than one-third of fortune 500 companies utilize Apache Kafka.
Various big industries also rely on
<a href='https://discovery.hgdata.com/product/pivotal-rabbitmq'>
RabbitMQ,
</a>
like
<a href='https://www.youtube.com/watch?v=jCEwYPedJdw'>
Zalando,
</a>
<a href='https://www.youtube.com/watch?v=PXFpxKsW4SM'>
WeWork,
</a>
<a href='https://www.youtube.com/watch?v=9FtMvYHS8Uk&amp;t=7s'>
Wunderlist
</a>
and
<a href='https://www.youtube.com/watch?v=tTh1nIKEOU4'>
Bloomberg.
</a>
</p>
<div class='row'>
<div class='col-md-5'>
<img class='no-border' src='/img/blog/exchanges-bidings-routing-keys.png'>
</div>
<div class='col-md-7 mt-5'>
<img class='no-border' src='/img/blog/kafka-setup.png'>
</div>
</div>
<h2>
The big question; when to use Kafka, and when to use RabbitMQ?
</h2>
<p>
I wrote an answer on
<a href='https://stackoverflow.com/questions/42151544/is-there-any-reason-to-use-rabbitmq-over-kafka/42154452#42154452'>
Stackoverflow
</a>
a while ago to answer the question, “Is there any reason to use RabbitMQ over
Kafka?”. The answer is just a few lines, but it has proven to be an answer
many people have found helpful.
</p>
<p>
I will try to break down the answer into sub answers and try to explain each
part. First of all, I wrote -
<i>
“RabbitMQ is a solid, mature, general-purpose message broker that supports
several protocols such as AMQP, MQTT, STOMP, and more. RabbitMQ can handle
high throughput. A common use case for it is to handle background jobs or
to act as a message broker between microservices. Kafka is a message bus
optimized for high-ingress data streams and replay. Kafka can be seen as a
durable message broker where applications can process and re-process
streamed data on disk."
</i>
</p>
<p>
Regarding the term “mature”; RabbitMQ has simply been on the market for a
longer time then Kafka (2007 vs 2011, respectively). Both RabbitMQ and Kafka
are “mature”, which means they both are considered to be reliable and
scalable messaging systems.
</p>
<h3>
Message handling (message replay)
</h3>
<p>
Here is the main difference between them; unlike most messaging systems, the
message queue in Kafka is persistent. The data sent is stored until a
specified retention period has passed, either a period of time or a size
limit. The message stays in the queue until the retention period/size limit
is exceeded, meaning the message is not removed once it’s consumed. Instead,
it can be replayed or consumed multiple times, which is a setting that can be
adjusted.
</p>
<p>
In RabbitMQ, messages are stored until a receiving application connects and
receives a message off the queue. The client can either ack (acknowledge)
the message when it receives it or when the client has completely processed
the message. In either situation, once the message is acked, it’s removed
from the queue.
</p>
<p>
If you are using replay in Kafka, ensure that you are using it in the correct
way and for the correct reason. Replaying an event multiple times that should
just happen a single time; e.g. if you happen to save a customer order
multiple times, is not ideal in most usage scenarios. Where a replay does
come in handy is when you have a bug in the consumer that requires deploying
a newer version, and you need to re-processing some or all of the messages.
</p>
<h3>
Protocol
</h3>
<p>
I also mentioned that
<i>
“RabbitMQ supports several standardized protocols such as AMQP, MQTT,
STOMP, etc.”,
</i>
where it natively implements AMQP 0.9.1. The use of a standardized message
protocol allows you to replace your RabbitMQ broker with any AMQP based
broker.
</p>
<p>
Kafka uses a custom protocol, on top of TCP/IP for communication between
applications and the cluster. Kafka can’t simply be removed and replaced,
since its the only software implementing this protocol.
</p>
<p>
The ability of RabbitMQ to support different protocols means that it can be
used in many different scenarios.
</p>
<p>
The newest version of AMQP differs drastically from the officially supported
release, 0.9.1. It is unlikely that RabbitMQ will deviate from AMQP 0.9.1.
Version 1.0 of the protocol released on October 30, 2011 but has not gained
widespread support from developers. AMQP 1.0 is available via plugin.
</p>
<h3>
Routing
</h3>
<p>
The next part of the answer is about routing, I wrote:
<i>
“Kafka has a very simple routing approach. RabbitMQ has better options if
you need to route your messages in complex ways to your consumers.”
</i>
</p>
<p>
Chief among RabbitMQ’s benefits is the ability to flexibly route messages.
Direct or regular expression-based routing allows messages to reach specific
queues without additional code. RabbitMQ has four different routing options:
direct, topic, fanout, and header exchanges. Direct exchanges route messages
to all queues with an exact match for something called a routing key. The
fanout exchange can broadcast a message to every queue that is bound to
the exchange. The topics method is similar to direct as it uses a routing
key but allows for wildcard matching along with exact matching. Check out our
blog post for more information about the
<a href='/blog/part4-rabbitmq-for-beginners-exchanges-routing-keys-bindings.html'>different exchange types</a>.
</p>
<p>
Kafka does not support routing; Kafka topics are divided into partitions
which contain messages in an unchangeable sequence. You can make use of
consumer groups and persistent topics as a substitute for the routing in
RabbitMQ, where you send all messages to one topic, but let your consumer
groups subscribe from different offsets.
</p>
<p>
You can create
<a href='https://www.confluent.io/blog/putting-events-in-their-place-with-dynamic-routing/'>
dynamic routing
</a>
yourself with help of Kafka streams, where
you dynamically route events to topics, but it’s not a default feature.
</p>
<img src='/img/blog/exchanges-topic-fanout-direct.png'>
<h2>
Message Priority
</h2>
<p>
RabbitMQ supports something called priority queues, meaning that a queue
can be set to have a range of priorities. The priority of each message can
be set when it is published. Depending on the priority of the message it is
placed in the appropriate priority queue. So, when could priority queues
be used? Here follow a simple example: We are running database backups
every day, for our hosted database service ElephantSQL. Thousands of backup
events are added to RabbitMQ without order. A customer can also trigger a
backup on demand, and if that happens, a new backup event i added to the
queue, but with a higher priority.
</p>
<p>
A message cannot be sent with a priority level, nor be delivered in priority
order, in Kafka. All messages in Kafka are stored and delivered in the order
in which they are received regardless of how busy the consumer side is.
</p>
<h3>
Acknowledgment (Commit or Confirm)
</h3>
<p>
“Acknowledgment”, is the signal passed between communicating processes to
signify acknowledgment, i.e., receipt of the message sent or handled.
</p>
<p>
Both Kafka and RabbitMQ have support for producer acknowledgments (publisher
confirms in RabbitMQ) to make sure published messages have safely reached
the broker.
</p>
<p>
When a node delivers a message to a consumer, it has to decide whether the
message should be considered handled (or at least received) by the consumer.
The client can either ack the message when it receives it, or when the
client has completely processed the message.
</p>
<p>
RabbitMQ can consider a message delivered once it’s sent out, or wait for
the consumer to manually acknowledgement when it has been received.
</p>
<p>
Kafka maintains an offset for each message in a partition. The committed
position is the last offset that has been saved. Should the process fail and
restart, is this the offset that it will recover to. A consumer in Kafka can
either automatically commit offsets periodically, or it can choose to
control this committed position manually.
</p>
<p>
How Kafka keeps track of what's been consumed and what has not differs in
different versions of Apache Kafka. In earlier versions, the consumer kept
track of the offset.
</p>
<p>
A RabbitMQ client can also nack (negative acknowledgement) a message when
it fails to handle the message. The message will be returned to the queue it
came from as if it were a new message; this is useful in case of a temporary
failure on the consumer side.
</p>
<h3>
How to work with the queues?
</h3>
<p>
RabbitMQ's queues are fastest when they're empty, while Kafka is designed
for holding and distributing large volumes of messages. Kafka retains large
amounts of data with very little overhead.
</p>
<p>
People that are trying out RabbitMQ are probably not aware of the the
feature lazy queues. Lazy queues are queues where the messages are
automatically stored to disk, thereby minimizing the RAM usage, but
extending the throughput time. In our experience, lazy queues create a more
stable cluster with better predictive performance. If you are sending a lot
of messages at once (e.g. processing batch jobs), or if you think that your
consumers will not consistently keep up with the speed of the publishers,
we recommend that you enable lazy queues.
</p>
<h3>
Scaling
</h3>
<p>
Scaling means the process of increasing or decreasing the capacity of the
system. RabbitMQ and Kafka can scale in different ways, you can adjust the
number of consumers, the power of the broker or add more nodes into the
system.
</p>
<h4>
Consumer Scaling
</h4>
<p>
If you publish quicker then you can consume in RabbitMQ, your queue will start
to grow and might end up with millions of messages, finally causing RabbitMQ
to run out of memory. In this case, you can scale the number of consumers
that are handling (consuming) your messages. Each queue in RabbitMQ can have
many consumers, and these consumers can all “compete” to consume messages from
the queue. The message processing is spread across all active consumers, so
scaling up and down in RabbitMQ can be done by simply adding and removing
consumers.
</p>
<p>
In Kafka, the way to distribute consumers is by using topic partitions, where
each consumer in a group is dedicated to one or more partitions. You can use
the partition mechanism to send each partition different set of messages by
business key, for example, by user id, location, etc.
</p>
<h4>
Scaling broker
</h4>
<p>
In the answer at stackoverflow I wrote;
<i>
“Kafka is built from the ground up with horizontal scaling (adding more
machines) in mind, while RabbitMQ is mostly designed for vertical
scaling (adding more power)”.
</i>
This part of the answer is giving information about the machines running
Kafka or RabbitMQ.
</p>
<p>
Horizontal scaling does not always give you a better performance in RabbitMQ.
The best performance levels are achieved with vertical scaling (adding more
power). Horizontal scaling is possible in RabbitMQ, but that means that you
must set up clustering between your nodes, which will probably slow down
your setup.
</p>
<p>
In Kafka, you can scale by adding more nodes to the cluster or by adding
more partitions to topics. This is sometimes easier than to add CPU or memory
into an existing machine like you have to do in RabbitMQ.
</p>
<p>
Many people and blogs, including Confluent, are talking about how great
Kafka is at scaling. And sure, Kafka can scale further than RabbitMQ since
there will always be a limit on how beefy the machines are that you can buy.
However, in this case, we need to remember the reason why we are using a
broker. You probably have a message volume that both Kafka and RabbitMQ can
support without any problems at all, and most of us don't deal with a scale
where RabbitMQ runs out of space.
</p>
<h3>
Log compaction
</h3>
<p>
A feature that is worth mentioning in Apache Kafka, that does not exist in
RabbitMQ is the log compaction strategy. Log compaction ensures that Kafka
always retains the last known value for each message key within the queue for
a single topic partition. Kafka simply keeps the latest version of a message
and delete the older versions with the same key.
</p>
<p>
Log compaction can be seen as a way of using Kafka as a database. You set the
retention period to “forever” or enable log compaction on a topic, and voila,
the data is stored forever.
</p>
<p>
An example of where we use log compaction is when we are showing the latest
status of one cluster among thousands of clusters running. Instead of storing
whether a cluster is responding or not all the time, we store the final
status. The latest information is available immediately, such as how many
messages are currently in the queue.
</p>
<h3>
Monitoring
</h3>
<p>
RabbitMQ has a user-friendly interface that lets you monitor and handle your
RabbitMQ server from a web browser. Among other things, queues, connections,
channels, exchanges, users and user permissions can be handled (created,
deleted, and listed) in the browser, and you can monitor message rates and
send/receive messages manually.
</p>
<p>
For Kafka, we have a number of open-source tools for monitoring, and also
some commercial ones, offering administration and monitoring functionalities.
<a href='https://medium.com/@giorgosmyrianthous/overview-of-ui-monitoring-tools-for-apache-kafka-clusters-9ca516c165bd'>
Information about different monitoring tools for Kafka
</a>
</p>
<h3>
PUSH or PULL
</h3>
<p>
Messages are pushed from RabbitMQ to the consumer. It’s important to configure
a prefetch limit in order to prevent overwhelming the consumer (if messages
arrive at the queue faster than the consumers can process them). Consumers
can also pull messages from RabbitMQ, but it’s not recommended.
Kafka, on the other hand, uses a pull model, as described earlier, where
consumers request batches of messages from a given offset.
</p>
<h3>
License
</h3>
<p>
RabbitMQ was originally created by Rabbit Technologies Ltd. The project became
part of
<a href='https://en.wikipedia.org/wiki/Pivotal_Software'>
Pivotal Software
</a>
in May 2013. The source code for RabbitMQ is released
under the
<a href='https://en.wikipedia.org/wiki/Mozilla_Public_License'>
Mozilla Public License.
</a>
The license has never changed (as of Nov. 2019).
</p>
<p>
Kafka was originally created at LinkedIn. It was given open-source status and
passed to the Apache Foundation in 2011. Apache Kafka is covered by the
Apache 2.0 license. Some of the components often used in combination with
Kafka are covered by another license called Confluent Community License, e.g.
Rest Proxy, Schema Registry, and KSL. This license still allows people to
freely download, modify, and redistribute the code (very much like Apache
2.0 does), but it does not allow anyone to provide the software as a SaaS
offering.
</p>
<p>
Both licenses are free and open-source software licenses. If Kafka changes the
license again to something even stricter, this is where RabbitMQ has the
advantage as it can easily be replaced by another AMQP broker while Kafka
cannot.
</p>
<h3>
Complexity
</h3>
<p>
Personally, I thought it was easier to get started with RabbitMQ and found it
easy to work with. And as a customer of ours said;
</p>
<blockquote>
"We didn't spend any time learning RabbitMQ and it worked for years. It
definitely reduced tons of operational cost during DoorDash's hyper-growth."
Zhaobang Liu, Doordash
</blockquote>
<p>
In my opinion, the architecture in Kafka brings more complexity, as it does
include more concepts such as topics/partitions/message offsets, etc. from the
very beginning. You have to be familiar with consumer groups and how to handle
offsets.
</p>
<p>
As Kafka and RabbitMQ operators, we feel that it's a bit more complicated to
handle failures in Kafka. The process to recover or fix something is usually
more time consuming and bit more messy.
</p>
<h3>
The Kafka Ecosystem
</h3>
<p>
Kafka is not just a broker, it’s a streaming platform, and there are many
tools available that are easy to integrate with Kafka outside the main
distribution. The Kafka ecosystem consists of Kafka Core, Kafka Streams,
Kafka Connect, Kafka REST Proxy, and the Schema Registry. Please note that
most of the additional tools of the Kafka ecosystem come from Confluent and
are not part of Apache.
</p>
<p>
The good thing with all these tools is that you can configure a huge system
before you need to write a single line of code.
</p>
<p>
Kafka Connect lets you integrate other systems with Kafka. You can add a data
source that allows you to consume data from that source and store it in Kafka,
or the other way around, and have all data in a topic sent to another system
for processing or storage. There are many possibilities with using Kafka
Connect, and it's easy to get started since there are already a lot of
connectors available.
</p>
<p>
The Kafka REST Proxy gives you the opportunity to receive metadata from a
cluster and produce and consume messages over a simple REST API. This feature
can easily be enabled from the Control Panel for your cluster.
</p>
<h2>
Common use cases - RabbitMQ vs Apache Kafka
</h2>
<p>
There has been a lot of information about what one system can or can’t do.
Here are two main use cases describing how I and many of our customers have
been thinking about and making a decision on which system to use. Of course,
we have also seen situations where a customer has built a system where one
system should have been used instead of the other one.
</p>
<h3>
Use cases for RabbitMQ
</h3>
<p>
In general, if you want a simple/traditional pub-sub message broker, the
obvious choice is RabbitMQ, as it will most probably scale more than you will
ever need it to scale. I would have chosen RabbitMQ if my requirements were
simple enough to deal with system communication through channels/queues, and
where retention and streaming is not a requirement.
</p>
<p>
There are two main situations where I would choose RabbitMQ; For long-running
tasks, when I need to run reliable background jobs.
And for communication and integration within, and between applications, i.e as
middleman between microservices, where a system
simply needs to notify another part of the system to start to work on a task,
like ordering handling in a webshop (order placed, update order status, send
order, payment, etc.).
</p>
<h4>
Long-running tasks
</h4>
<p>
Message queues enable asynchronous processing, meaning that they allow you to
put a message in a queue without processing it immediately. RabbitMQ is ideal
for long-running tasks.
</p>
<p>
An example can be found in our RabbitMQ beginner guide, which follows a
classic scenario where a web application allows users to upload information
to a web site. The site will handle this information, generate a PDF, and
email it back to the user. Completing the tasks in this example case takes
several seconds, which is one of the reasons why a message queue will be used.
</p>
<p>
Many of our customers let RabbitMQ queues serve as event buses allowing web
servers to respond quickly to requests instead of being forced to perform
computationally intensive tasks on the spot.
</p>
<p>
Take Softonic as an example, they use
<a href='/blog/softonic-userstory-rabbitmq-eventbased-communication.html'>
RabbitMQ in an event-based microservices architecture
</a>
that supports 100 million users a month.
</p>
<h4>
Middleman in a Microservice architectures
</h4>
<p>
RabbitMQ is also used by many customers for microservice architecture, where
it serves as a means of communicating between applications, avoiding
bottlenecks passing messages.
</p>
<p>
You can for example read how Parkster (a digital parking service) are
<a href='/blog/breaking-down-a-monolithic-system-into-microservices.html'>
breaking down a system into multiple microservices by using RabbitMQ.
</a>
</p>
<p>
MapQuest is a large direction service supporting 23.1 million unique mobile
users every month. Map updates are published to personal devices and software
located in organizations and corporations. Here
<a href='https://developer.mapquest.com/devblog/2016/10/19/five-things-users-should-know-about-mapquests-directions-api/index.html'>
RabbitMQ topics spread over an appropriate number of queues.
</a>
Tens of millions of users receive accurate enterprise-grade map information
through the framework.
</p>
<h3>
Use cases for Apache Kafka
</h3>
<p>
In general,  if you want a framework for storing, reading (re-reading), and
analyzing streaming data, use Apache Kafka. It’s ideal for systems that are
audited or those that need to store messages permanently. These can also be
broken down into two main use cases for analyzing data (tracking, ingestion,
logging, security etc.) or real-time processing.
</p>
<h4>
Data Analysis: Tracking, Ingestion, Logging, Security
</h4>
<p>
In all these cases, large amounts of data need to be collected, stored, and
handled. Companies that need to gain insights into data, provide search
features, auditing or analysis of tons of data justify the use of Kafka.
</p>
<p>
According to the creators of Apache Kafka, the original use case for Kafka was
to track website activity including page views, searches, uploads or other
actions users may take. This kind of activity tracking often requires a very
high volume of throughput, since messages are generated for each action and
for each user. Many of these activities - in fact, all of the system
activities -  can be stored in Kafka and handled as needed.
</p>
<p>
Producers of data only need to send their data to a single place while a host
of backend services can consume the data as required. Major analytics, search
and storage systems have integrations with Kafka.
</p>
<p>
Kafka can be used to stream large amounts of information to storage systems,
and these days hard drive space is not a large expense.
</p>
<h4>
Real-time processing
</h4>
<p>
Kafka acts as a high-throughput distributed system; source services push
streams of data into the target services that pull them in real-time.
</p>
<p>
Kafka could be used in systems handling many producers in real-time with a
small number of consumers; i.e. financial IT systems monitoring stock data.
</p>
<p>
Streaming services from Spotify to the Rabobank publish information in
real-time over Kafka. The ability to handle high-throughput in real-time
empowers applications., making these applications more powerful than ever
before.
</p>
<p>
CloudAMQP uses RabbitMQ in the automated process of server setups, but we
have used Kafka when publishing logs and metrics.
</p>
<table class='table table-hover'>
<thead>
<tr>
<th></th>
<th>
RabbitMQ
</th>
<th>
Apache Kafka
</th>
</tr>
<tbody>
<tr>
<th class='scope'>
What it is?
</th>
<td>
RabbitMQ is a solid, mature, general purpose message broker
</td>
<td>
Apache Kafka is a message bus optimized for high-ingress data streams
and replay
</td>
</tr>
<tr>
<th class='scope'>
Primary use
</th>
<td>
Message queue for communication and
integration within, and between applications. For long-running tasks,
or when you need to run reliable background jobs.
</td>
<td>
A framework for storing, reading (re-reading), and analyzing streaming
data. Optimal for
</td>
</tr>
<tr>
<th class='scope'>
License
</th>
<td>
Open Source: Mozilla Public License
</td>
<td>
Open Source: Apache License 2.0
</td>
</tr>
<tr>
<th class='scope'>
Written in
</th>
<td>
Erlang
</td>
<td>
Scala (JVM)
</td>
</tr>
<tr>
<th class='scope'>
First Version Released
</th>
<td>
2007
</td>
<td>
2011
</td>
</tr>
<tr>
<th class='scope'>
Persistence
</th>
<td>
Persist messages until they are dropped on the acknowledgement of receipt
</td>
<td>
Persists messages with an option to delete after a
<a href='https://www.cloudkarafka.com/blog/2018-05-08-what-is-kafka-retention-period.html'>
retention period
</a>
</td>
</tr>
<tr>
<th class='scope'>
Replay
</th>
<td>
No
</td>
<td>
Yes
</td>
</tr>
<tr>
<th class='scope'>
Routing
</th>
<td>
Supports
<a href='https://www.rabbitmq.com/features.html'>
flexible routing
</a>
which can return information to a consumer node
</td>
<td>
Does not support flexible routing, must be done through
<a href='https://www.cloudkarafka.com/blog/2016-11-30-part1-kafka-for-beginners-what-is-apache-kafka.html'>
separate topics
</a>
</td>
</tr>
<tr>
<th class='scope'>
Message Priority
</th>
<td>
Supported
</td>
<td>
Not supported
</td>
</tr>
<tr>
<th class='scope'>
Monitoring
</th>
<td>
Available through a built-in UI
</td>
<td>
Available through third-party tools such as when deployed on
<a href='https://www.cloudkarafka.com/'>CloudKarafka</a>
or through
<a href='https://www.confluent.io/blog/blog-post-on-monitoring-an-apache-kafka-deployment-to-end-most-blog-posts'>
Confluent
</a>
</td>
</tr>
<tr>
<th class='scope'>
Language Support
</th>
<td>
Most languages are supported
</td>
<td>
Most languages are supported
</td>
</tr>
<tr>
<th class='scope'>
Secure Authentication
</th>
<td>
Supports standard authentication and OAuth2
</td>
<td>
Supports Kerberos, OAuth2, and standard authentication
</td>
</tr>
</tbody>
</thead>
</table>
<p>
Contact us and we can guide you along the road, independent of if that road
leads towards Apache Kafka, or RabbitMQ. Compare for yourself, by getting started
with a free Apache Kafka and
a free RabbitMQ plan on
<a href='https://www.cloudkarafka.com'>
CloudKarafka
</a>
or
<a href='https://www.cloudamqp.com'>
CloudAMQP.
</a>
</p>

<div class='blog-post-footer social-buttons'>
<h3>
Enjoy this article? Don't forget to share it with others. 😉
</h3>
<a class='facebook' href='https://www.facebook.com/sharer/sharer.php?u=https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html' rel='noopener' target='_blank'>
<span class='fa-stack fa-lg'>
<i class='fa fa-square fa-stack-2x'></i>
<i class='fa fa-facebook fa-stack-1x fa-inverse'></i>
</span>
</a>
<a class='twitter' href='https://twitter.com/share?text=When to use RabbitMQ or Apache Kafka&amp;url=https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html&amp;hashtags=cloudamqp,blog,rabbitmq' rel='noopener' target='_blank'>
<span class='fa-stack fa-lg'>
<i class='fa fa-square fa-stack-2x'></i>
<i class='fa fa-twitter fa-stack-1x fa-inverse'></i>
</span>
</a>
<a class='linkedin' href='https://www.linkedin.com/shareArticle?mini=true&amp;title=When to use RabbitMQ or Apache Kafka&amp;url=https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html&amp;source=CloudAMQP' rel='noopener' target='_blank'>
<span class='fa-stack fa-lg'>
<i class='fa fa-square fa-stack-2x'></i>
<i class='fa fa-linkedin fa-stack-1x fa-inverse'></i>
</span>
</a>
<a class='email' href='mailto:?&amp;subject=Check out this blog post from CloudAMQP&amp;body=Hi,%0A%0AI%20just%20found%20this%20blog%20post%20and%20thought%20you%20might%20find%20it%20interesting.%20Check%20it%20out!%0A%0A%22When to use RabbitMQ or Apache Kafka%22,%0Ahttps://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html'>
<span class='fa-stack fa-lg'>
<i class='fa fa-square fa-stack-2x'></i>
<i class='fa fa-envelope-o fa-stack-1x fa-inverse'></i>
</span>
</a>
<div id='disqus_thread'></div>
</div>
</div>
<div class='col-lg-3 col-md-4 col-sm-12 blog-sidebar text-center'>
<div class='sidebar-card mb-4'>
<div class='sidebar-card-block'>
<img class='img-thumbnail mx-auto img-fluid profile' src='/img/profiles/lovisajohansson.jpg'>
<h3>
Lovisa johansson
</h3>
<p class='team-role'>
Developer
</p>
</div>
</div>
<div class='sidebar-card mb-4'>
<div class='header-image'>
<a href='/rabbitmq_ebook.html' onclick='ga(&#39;send&#39;, &#39;event&#39;, &#39;Ebook Download&#39;, &#39;CTA&#39;, &#39;Blog ebook sidebar&#39;);'></a>
</div>
<div class='sidebar-card-block ebook-block arrow'>
<h4 class='ebook-title'>
<a href='/rabbitmq_ebook.html' onclick='ga(&#39;send&#39;, &#39;event&#39;, &#39;Ebook Download&#39;, &#39;CTA&#39;, &#39;Blog ebook sidebar&#39;);'>Free Ebook</a>
</h4>
<p class='ebook-text mt-3 mb-3'>
"The Optimal
<br>
RabbitMQ Guide"
</p>
</div>
<div class='row social-links no-gutters'>
<div class='col'>
<a href='/rabbitmq_ebook.html' onclick='ga(&#39;send&#39;, &#39;event&#39;, &#39;Ebook Download&#39;, &#39;CTA&#39;, &#39;Blog ebook sidebar&#39;);'>
<i aria-hidden='true' class='fa fa-download'></i>
Download
<span class='d-none d-md-inline'>your copy</span>
</a>
</div>
</div>
</div>
<div class='card mb-4 d-none d-md-block'>
<a class='twitter-timeline' data-height='500' data-theme='light' data-width='255' href='https://twitter.com/CloudAMQP'>Tweets by CloudAMQP</a>
<script async='' charset='utf-8' src='//platform.twitter.com/widgets.js'></script>
</div>
</div>
</div>
</div>
</section>
<script src='/js/jquery-3.1.1.min.js' type='text/javascript'></script>
<script>
  jQuery(document).ready(function($){
    var shareWindow = function(url, medium, path) {
      var width = $(window).width();
      var height = $(window).height();
      var H=Math.round((width/2)-(550/2)),
      G=0;
      if(height>450) {
        G=Math.round((height/2)-(450/2));
      }
      if (typeof ga === 'function') {
        ga('send', 'event', 'Share', medium, path);
      }
      if (medium == 'email') {
        window.location.href = url;
      } else {
        window.open(url,'','left='+H+',top='+G+',width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1');
      }
    };
    $(".social-buttons a").click(function(e){
      e.preventDefault();
      shareWindow($(this).attr("href"),$(this).attr("class"), window.location.pathname);
    });
  });
</script>
<script>
  var disqus_config = function () {
  this.page.url = "https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html";
  this.page.identifier = "https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html";
  };
  
  (function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://cloudamqp.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<section class='mid-cta dark-bg'>
<div class='container'>
<div class='row'>
<div class='col-md-12 text-center'>
<h2 class='cta-title mb-4'>CloudAMQP - industry leading RabbitMQ as a service</h2>
<p class='sub-title'>
Start your managed cluster today. CloudAMQP is 100% free to try.
</p>
</div>
</div>
<div class='row'>
<div class='col-md-12 text-center'>
<p class='mb-0'>
<a class='btn btn-lg btn-secondary mt-4 pr-5 pl-5' href='https://customer.cloudamqp.com/signup' onclick='ga(&#39;send&#39;, &#39;event&#39;, &#39;Blog general&#39;, &#39;CTA&#39;, &#39;When to use RabbitMQ or Apache Kafka&#39;);'>Start your FREE plan today!</a>
</p>
</div>
</div>
</div>
</section>
<section class='customers'>
<div class='container'>
<div class='row'>
<div class='col-md-12 text-center'>
<h2 class='title mb-4'>
<span>13,000+</span>
users including these smart companies
</h2>
</div>
</div>
<div class='row'>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3'>
<div>
<img alt='DraftKings' class='img-fluid' src='/img/customers/logo-draftkings.jpg'>
</div>
</div>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3'>
<div>
<img alt='Mozilla' class='img-fluid' src='/img/customers/logo-mozilla.jpg'>
</div>
</div>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3'>
<div>
<img alt='Docker' class='img-fluid' src='/img/customers/logo-docker.jpg'>
</div>
</div>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3'>
<div>
<img alt='Heroku' class='img-fluid' src='/img/customers/logo-heroku.jpg'>
</div>
</div>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3 d-none d-sm-block'>
<div>
<img alt='Discovery' class='img-fluid' src='/img/customers/logo-discovery.jpg'>
</div>
</div>
<div class='col-lg-2 col-md-4 col-sm-6 col-6 customer-logo mb-3 d-none d-sm-block'>
<div>
<img alt='Salesforce' class='img-fluid' src='/img/customers/logo-salesforce.jpg'>
</div>
</div>
</div>
</div>
</section>
<script src='/js/anchor-titles.js' type='text/javascript'></script>
<link href='/prettify/prettify.css' rel='stylesheet' type='text/css'>
<script src='/prettify/prettify.js' type='text/javascript'></script>

<footer class='dark-bg hidden-print'>
<div class='footer-top pt-5 pb-4'>
<div class='container'>
<div class='row justify-content-center'>
<div class='col-md-3 col-sm-3 col-6 hidden-print'>
<h4>Menu</h4>
<ul class='quicklinks list-unstyled'>
<li>
<a href='/'>Home</a>
</li>
<li>
<a href='/tour.html'>Tour</a>
</li>
<li>
<a href='/plans.html'>Pricing</a>
</li>
<li>
<a href='/docs/index.html'>Documentation</a>
</li>
<li>
<a href='/support.html'>Support</a>
</li>
<li>
<a href='/blog/index.html'>Blog</a>
</li>
<li>
<a href='/customers.html'>Customers</a>
</li>
<li>
<a href='/about_us.html'>About Us</a>
</li>
</ul>
</div>
<div class='col-md-3 col-sm-3 col-6 hidden-print'>
<h4>Resources</h4>
<ul class='quicklinks list-unstyled'>
<li>
<a href='/changelog.html'>Changelog</a>
</li>
<li>
<a href='/docs/faq.html'>FAQ</a>
</li>
<li>
<a href='/legal/legal_and_policies.html'>Legal and Policies</a>
</li>
<li>
<a href='/legal/security_and_compliance.html'>Security and Compliance</a>
</li>
<li>
<a href='https://status.cloudamqp.com/' target='_new'>Status</a>
</li>
</ul>
</div>
<div class='col-md-3 col-sm-3 col-6 hidden-print'></div>
<div class='col-12 col-sm-3 col-md-3 ml-auto mx-auto text-center support-call-out'>
<h4 class='mt-3 mt-md-0 mb-3'>Need help?</h4>
<a class='btn btn-xl btn-secondary mb-3 hidden-print' href='/support.html'>Contact Support</a>
<p class='opening-hours hidden-print'>Open 24 hours a day, 7 days a week.</p>
<h4 class='mt-4 mb-2'>Talk to Sales</h4>
<ul class='quicklinks list-unstyled mb-2'>
<li>
<a href='tel:+01-812-461-6841'>+1 812 461 6841</a>
</li>
</ul>
<p class='opening-hours hidden-print'>Sales inquiries only. Open: 8-5 CST</p>
</div>
</div>
</div>
</div>
<div class='footer-bottom pt-4'>
<div class='container'>
<div class='row justify-content-center'>
<div class='col-12 col-xl-3 col-lg-4 col-md-5 mb-4 mb-md-0'>
<h4>Brought to you by</h4>
<a class='codes-link' href='https://www.84codes.com' rel='noopener' target='_blank'>
<img alt='84codes' class='logo mb-0' src='/img/84codes-logo.png'>
<span>www.84codes.com</span>
</a>
</div>
<div class='col-12 col-xl-3 col-lg-4 col-md-5 ml-auto'>
<h4>Our Services</h4>
<div class='dropdown'>
<a aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' href='#' id='dropdownMenuLink' role='button'>
<img alt='CloudAMQP' src='/img/logo-cloudamqp-footer.png'>
</a>
<div aria-labelledby='dropdownMenuLink' class='dropdown-menu'>
<a class='dropdown-item' href='https://www.cloudkarafka.com/' rel='noopener' target='_blank'>
<strong>CloudKarafka</strong>
&ndash; Apache Kafka
</a>
<a class='dropdown-item' href='https://www.elephantsql.com/' rel='noopener' target='_blank'>
<strong>ElephantSQL</strong>
&ndash; PostgreSQL
</a>
<a class='dropdown-item' href='https://www.cloudmqtt.com/' rel='noopener' target='_blank'>
<strong>CloudMQTT</strong>
&ndash; MQTT
</a>
</div>
</div>
</div>
</div>
<div class='row'>
<div class='col-md-12 text-center pt-3 pb-3'>
<hr>
<p class='mb-0'>© Copyright 2011-2022 CloudAMQP. RabbitMQ and the RabbitMQ Logo are trademarks of VMware, Inc.</p>
</div>
</div>
</div>
</div>
</footer>
<script>
  !function(e,t,n){function a(){var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://beacon-v2.helpscout.net",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],"complete"===t.readyState)return a();e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}(window,document,window.Beacon||function(){});
  window.Beacon('init', 'ff675097-ec55-404b-999e-a3d16efa5340')
</script>
</body>
<script>
  function follow () {
    var footerHeight = document.querySelector('footer').offsetHeight
    var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)
    window.scrollTo(0, document.body.scrollHeight - viewHeight - footerHeight);
  }
</script>
</html>
